{"version":3,"sources":["webpack:///webpack/bootstrap 359d6780bf513aecd03b","webpack:///./src/main.js","webpack:///./src/Duck.js","webpack:///EaselJS (bower component)","webpack:///./bower_components/EaselJS/lib/easeljs-0.8.2.combined.js","webpack:///PreloadJS (bower component)","webpack:///./bower_components/PreloadJS/lib/preloadjs-0.6.2.combined.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-options.js"],"names":["Duck","createjs","extend","subclass","superclass","o","constructor","prototype","promote","prefix","subP","supP","Object","getPrototypeOf","__proto__","n","hasOwnProperty","indexOf","array","searchElement","i","l","length","Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","p","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","set","props","toString","EventDispatcher","_listeners","_captureListeners","initialize","addEventListener","on","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listener","useCapture","listeners","arr","push","scope","once","data","handleEvent","evt","call","splice","eventObj","e","parent","top","list","captureListeners","slice","Ticker","RAF_SYNCHED","RAF","TIMEOUT","useRAF","timingMode","maxDelta","paused","_addEventListener","_inited","init","apply","arguments","_startTime","_pausedTime","_ticks","_pausedTicks","_interval","_lastTime","_times","_tickTimes","_timerId","_raf","setInterval","interval","_setupTick","getInterval","setFPS","value","getFPS","defineProperties","get","framerate","console","log","_getTime","reset","f","window","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","getMeasuredTickTime","ticks","ttl","times","Math","min","getMeasuredFPS","setPaused","getPaused","runTime","getEventTime","getTicks","pauseable","_handleSynch","_tick","_handleRAF","_handleTimeout","mode","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","time","elapsedTime","event","delta","unshift","pop","now","performance","mozNow","msNow","oNow","webkitNow","UID","_nextID","MouseEvent","stageX","stageY","nativeEvent","pointerID","primary","rawX","rawY","relatedTarget","Event_constructor","_get_localX","globalToLocal","x","_get_localY","y","_get_isTouch","localX","localY","isTouch","Matrix2D","a","b","c","d","tx","ty","setValues","DEG_TO_RAD","PI","identity","append","a1","b1","c1","d1","prepend","tx1","appendMatrix","matrix","prependMatrix","appendTransform","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","prependTransform","rotate","angle","skew","scale","translate","invert","isIdentity","equals","transformPoint","pt","decompose","sqrt","atan2","abs","copy","DisplayProps","visible","alpha","shadow","compositeOperation","Point","point","Rectangle","width","height","pad","left","bottom","right","rectangle","contains","union","rect","intersection","x1","y1","x2","y2","intersects","isEmpty","ButtonHelper","outLabel","overLabel","downLabel","play","hitArea","hitLabel","_isPressed","_isOver","_enabled","mouseChildren","enabled","actionsEnabled","gotoAndStop","setEnabled","cursor","_reset","__reset","getEnabled","label","t","gotoAndPlay","Shadow","color","offsetX","offsetY","blur","SpriteSheet","EventDispatcher_constructor","complete","_animations","_frames","_images","_data","_loadCount","_frameHeight","_frameWidth","_numFrames","_regX","_regY","_spacing","_margin","_parseData","getAnimations","animations","getNumFrames","animation","frames","getAnimation","name","getFrame","frameIndex","frame","getFrameBounds","images","img","src","document","createElement","getContext","naturalWidth","onload","_handleImageLoad","onerror","_handleImageError","Array","isArray","image","spacing","margin","count","_calculateFrames","anim","obj","speed","next","undefined","errorEvent","maxFrames","frameCount","frameWidth","frameHeight","imgLoop","imgs","imgW","imgH","Graphics","command","_stroke","_strokeStyle","_oldStrokeStyle","_strokeDash","_oldStrokeDash","_strokeIgnoreScale","_fill","_instructions","_commitIndex","_activeInstructions","_dirty","_storeIndex","clear","G","getRGB","g","getHSL","hue","saturation","lightness","BASE_64","STROKE_CAPS_MAP","STROKE_JOINTS_MAP","canvas","createCanvas","_ctx","getInstructions","_updateInstructions","instructions","draw","ctx","instr","exec","drawAsPath","instrs","path","moveTo","MoveTo","lineTo","LineTo","arcTo","radius","ArcTo","arc","startAngle","endAngle","anticlockwise","Arc","quadraticCurveTo","cpx","cpy","QuadraticCurveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","BezierCurveTo","w","h","Rect","closePath","ClosePath","beginFill","_setFill","Fill","beginLinearGradientFill","colors","ratios","x0","y0","linearGradient","beginRadialGradientFill","r0","r1","radialGradient","beginBitmapFill","repetition","bitmap","endFill","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","StrokeStyle","setStrokeDash","segments","offset","StrokeDash","beginStroke","_setStroke","Stroke","beginLinearGradientStroke","beginRadialGradientStroke","beginBitmapStroke","endStroke","curveTo","drawRect","drawRoundRect","drawRoundRectComplex","radiusTL","radiusTR","radiusBR","radiusBL","RoundRect","drawCircle","Circle","drawEllipse","Ellipse","drawPolyStar","sides","pointSize","PolyStar","clean","decodePath","str","paramCount","params","base64","charAt","fi","pl","charCount","num","sign","store","unstore","mt","lt","at","bt","qt","cp","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","commit","active","commitIndex","beginCmd","ll","fill","stroke","BeginPath","beginPath","style","fillStyle","mtx","save","transform","restore","createLinearGradient","addColorStop","createRadialGradient","readyState","createPattern","strokeStyle","setTransform","lineWidth","lineCap","isNaN","lineJoin","setLineDash","EMPTY_SEGMENTS","lineDashOffset","max","mTL","mTR","mBR","mBL","rTL","rTR","rBR","rBL","k","ox","oy","xe","ye","xm","ym","ps","DisplayObject","cacheCanvas","cacheID","id","mouseEnabled","tickEnabled","transformMatrix","snapToPixel","filters","mask","_cacheOffsetX","_cacheOffsetY","_filterOffsetX","_filterOffsetY","_cacheScale","_cacheDataURLID","_cacheDataURL","_props","_rectangle","_bounds","_MOUSE_EVENTS","suppressCrossDomainErrors","_snapToPixelEnabled","_hitTestCanvas","_hitTestContext","_nextCacheID","getStage","_Stage","stage","isVisible","ignoreCache","drawImage","updateContext","graphics","getMatrix","clip","globalAlpha","globalCompositeOperation","_applyShadow","cache","_cacheWidth","_cacheHeight","updateCache","offX","offY","fBounds","_getFilterBounds","ceil","clearRect","_applyFilters","uncache","getCacheDataURL","toDataURL","localToGlobal","getConcatenatedMatrix","localToLocal","getConcatenatedDisplayProps","hitTest","hit","_testHit","getBounds","getTransformedBounds","_getBounds","setBounds","_cloneProps","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","evtObj","getImageData","applyFilter","bounds","ignoreTransform","_transformBounds","x_a","x_b","y_c","y_d","minX","maxX","minY","maxY","_hasMouseEventListener","evts","Container","DisplayObject_constructor","children","tickChildren","getNumChildren","numChildren","hasContent","DisplayObject_draw","child","addChild","removeChild","addChildAt","index","indx","good","removeChildAt","sort","removeAllChildren","kids","getChildAt","getChildByName","sortChildren","sortFunction","getChildIndex","swapChildrenAt","index1","index2","o1","o2","swapChildren","child1","child2","setChildIndex","getObjectUnderPoint","getObjectsUnderPoint","_getObjectsUnderPoint","recursive","_cloneChildren","DisplayObject__tick","mouse","activeListener","currentDepth","_testMask","result","DisplayObject_getBounds","Stage","Container_constructor","autoClear","getElementById","mouseX","mouseY","snapToPixelEnabled","mouseInBounds","tickOnUpdate","mouseMoveOutside","preventSelection","_pointerData","_pointerCount","_primaryPointerID","_mouseOverIntervalID","_nextStage","_prevStage","enableDOMEvents","_get_nextStage","_set_nextStage","nextStage","update","tick","backgroundColor","mimeType","fillRect","dataURL","putImageData","enableMouseOver","frequency","clearInterval","_testMouseOver","enable","_eventListeners","_this","_handleMouseUp","_handleMouseMove","_handleDoubleClick","_handleMouseDown","_getElementRect","getBoundingClientRect","err","offsetTop","offsetLeft","offsetWidth","offsetHeight","pageXOffset","scrollLeft","clientLeft","body","pageYOffset","scrollTop","clientTop","styles","getComputedStyle","currentStyle","padL","parseInt","paddingLeft","borderLeftWidth","padT","paddingTop","borderTopWidth","padR","paddingRight","borderRightWidth","padB","paddingBottom","borderBottomWidth","_getPointerData","_handlePointerMove","pageX","pageY","owner","inBounds","_updatePointerPosition","_dispatchMouseEvent","posEvtObj","_handlePointerUp","oTarget","down","_handlePointerDown","eventTarget","_mouseOverX","_mouseOverY","isEventTarget","common","oldList","_mouseOverTarget","oldTarget","pointerId","Bitmap","imageOrUri","sourceRect","Sprite","spriteSheet","frameOrAnimation","currentFrame","currentAnimation","currentAnimationFrame","_animation","_currentFrame","_skipAdvance","_normalizeFrame","stop","_goto","advance","fps","DisplayObject__cloneProps","frameDelta","animFrame","_dispatchAnimationEnd","end","changed","Shape","Text","text","font","textAlign","textBaseline","maxWidth","outline","lineHeight","_workingContext","H_OFFSETS","start","center","V_OFFSETS","hanging","middle","alphabetic","ideographic","col","_drawText","_prepContext","getMeasuredWidth","_getMeasuredWidth","getMeasuredLineHeight","getMeasuredHeight","getMetrics","lines","vOffset","substr","paint","maxW","hardLines","String","split","measureText","words","j","jl","wordW","_drawTextLine","strokeText","fillText","BitmapText","letterSpacing","spaceWidth","_oldProps","maxPoolSize","_spritePool","_updateText","Container_draw","Container_getBounds","Container__cloneProps","_getFrameIndex","character","toUpperCase","toLowerCase","_getFrame","_getLineHeight","_getSpaceWidth","change","spaceW","lineH","pool","childIndex","numKids","sprite","hasSpace","MovieClip","startPosition","loop","labels","inited","INDEPENDENT","timeline","Timeline","position","useTicks","autoReset","frameBounds","_synchOffset","_prevPos","_prevPosition","_t","_managed","SINGLE_FRAME","SYNCHED","MovieClipPlugin","install","getLabels","getCurrentLabel","_updateTimeline","getDuration","duration","currentLabel","totalFrames","positionOrLabel","independent","_framerate","Container__tick","pos","resolve","NaN","tl","synched","Tween","NONE","_calcPosition","setPosition","tweens","_tweens","tween","_target","passive","_stepPosition","_addManagedChild","_setState","state","_off","Container__getBounds","priority","installPlugin","prop","step","startValues","endValues","ratio","wait","SpriteSheetUtils","_workingCanvas","addFlippedFrames","horizontal","vertical","both","_flip","extractFrame","mergeAlpha","rgbImage","alphaImage","v","il","__tmp","fl","sfx","names","al","SpriteSheetBuilder","maxHeight","padding","timeSlice","progress","_nextFrameIndex","_index","_timerID","_scale","ERR_DIMENSIONS","ERR_RUNNING","addFrame","source","setupFunction","setupData","nominalBounds","funct","addAnimation","addMovieClip","labelFunction","rects","baseFrameIndex","_setupMovieClipFrame","_labels","lbls","build","_startBuild","_drawNext","_endBuild","buildAsync","_run","stopAsync","dataFrames","_fillRow","_getSize","ae","size","pow","maxH","sc","rx","floor","ry","rh","rw","round","ts","DOMElement","htmlElement","transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin","_handleDrawEnd","visibility","oldProps","oldMtx","WebkitTransform","OTransform","msTransform","MozTransform","opacity","Filter","targetCtx","targetX","targetY","imageData","_applyFilter","BlurFilter","blurX","blurY","quality","MUL_TABLE","SHG_TABLE","q","radiusX","radiusY","iterations","px","yp","yi","yw","pr","pg","pb","pa","divx","divy","w1","h1","rxp1","ryp1","ssx","sx","ssy","sy","si","stx","mty","sty","ms","AlphaMapFilter","alphaMap","_alphaMap","_mapData","_prepAlphaMap","map","HTMLCanvasElement","imgData","AlphaMaskFilter","ColorFilter","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","ColorMatrix","brightness","contrast","setColor","DELTA_INDEX","IDENTITY_MATRIX","LENGTH","adjustColor","adjustHue","adjustContrast","adjustBrightness","adjustSaturation","_cleanValue","_multiplyMatrix","lumR","lumG","lumB","cosVal","sinVal","concat","_fixMatrix","toArray","val","limit","ColorMatrixFilter","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","Touch","isSupported","navigator","singleTouch","allowDefault","__touch","pointers","multitouch","_IOS_enable","_IE_enable","disable","_IOS_disable","_IE_disable","_IOS_handleEvent","touches","changedTouches","touch","identifier","_handleStart","_handleMove","_handleEnd","_IE_handleEvent","msTouchAction","touchAction","activeIDs","ids","srcElement","EaselJS","version","buildDate","PreloadJS","proxy","method","aArgs","ErrorEvent","title","message","ProgressEvent","loaded","total","isLoader","objectTypes","freeExports","exports","nodeType","root","freeGlobal","module","global","runInContext","context","Number","SyntaxError","TypeError","nativeJSON","stringify","parse","objectProto","getClass","isProperty","forEach","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","has","serialized","stringifySupported","toJSON","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","original","object","callback","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","unicodePrefix","quote","useCharIndex","symbols","charCode","charCodeAt","serialize","properties","whitespace","indentation","stack","className","date","hours","minutes","seconds","milliseconds","results","element","join","filter","fromCharCode","Unescapes","Index","Source","abort","lex","begin","isSigned","hasMembers","walk","JSON","previousJSON","isRestored","JSON3","define","appendToHead","el","getHead","appendChild","head","getElementsByTagName","getBody","DomUtils","parseXML","xml","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","parseJSON","DataUtils","LoadItem","maintainOrder","GET","values","headers","withCredentials","crossOrigin","loadTimeout","LOAD_TIMEOUT_DEFAULT","create","item","Error","ABSOLUTE_PATT","RELATIVE_PATT","EXTENSION_PATT","parseURI","info","absolute","relative","queryIndex","match","test","extension","formatQueryString","query","escape","buildPath","idx","isCrossDomain","href","host","location","crossdomain","hostname","port","protocol","isLocal","isBinary","AbstractLoader","IMAGE","BINARY","isImageTag","HTMLImageElement","isAudioTag","HTMLAudioElement","isVideoTag","HTMLVideoElement","isText","TEXT","MANIFEST","XML","CSS","SVG","JAVASCRIPT","SPRITESHEET","getTypeByExtension","SOUND","VIDEO","RequestUtils","loadItem","preferXHR","canceled","resultFormatter","_item","_preferXHR","_result","_rawResult","_loadedItems","_tagSrcAttribute","_tag","POST","JSONP","getItem","getResult","raw","getTag","setTag","tag","load","_createRequest","_request","loader","cancel","destroy","_loadItems","getLoadedItems","TagRequest","_createTag","XHRRequest","_sendLoadStart","_isCanceled","_sendProgress","Infinity","_sendComplete","rawResult","_sendError","_response","Function","_resultFormatSuccess","_resultFormatFailed","AbstractMediaLoader","AbstractLoader_constructor","_formatResult","_updateXHR","preload","AbstractLoader_load","MediaTagRequest","setResponseType","_loadedHandler","onstalled","URL","webkitURL","createObjectURL","AbstractRequest","srcAttribute","AbstractRequest_constructor","_handleTagComplete","_addedToDOM","_startTagVisibility","onreadystatechange","_handleReadyStateChange","_handleError","_hideTag","_loadTimeout","parentNode","_clean","AbstractRequest_destroy","_showTag","_handleStalled","_stalledCallback","pc","_handleProgress","TagRequest_load","newEvent","_progressCallback","TagRequest__clean","_xhrLevel","_rawResponse","_canceled","_handleLoadStartProxy","_handleLoadStart","_handleProgressProxy","_handleAbortProxy","_handleAbort","_handleErrorProxy","_handleTimeoutProxy","_handleLoadProxy","_handleLoad","_handleReadyStateChangeProxy","_createXHR","ACTIVEX_VERSIONS","onloadstart","onprogress","onabort","ontimeout","send","error","_responseType","responseType","getAllResponseHeaders","getResponseHeader","header","_checkError","_getResponse","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","getBlob","status","response","responseText","responseXML","req","XMLHttpRequest","XDomainRequest","axVersion","overrideMimeType","open","origin","setRequestHeader","LoadQueue","basePath","_plugins","_typeCallbacks","_extensionCallbacks","maintainScriptOrder","stopOnError","_maxConnections","_availableLoaders","ImageLoader","JavaScriptLoader","CSSLoader","JSONLoader","JSONPLoader","SoundLoader","ManifestLoader","SpriteSheetLoader","XMLLoader","SVGLoader","BinaryLoader","VideoLoader","TextLoader","_defaultLoaderLength","useXHR","setPreferXHR","_paused","_basePath","_crossOrigin","_loadStartWasDispatched","_currentlyLoadingScript","_currentLoads","_loadQueue","_loadQueueBackup","_loadItemsById","_loadItemsBySrc","_loadedResults","_loadedRawResults","_numItems","_numItemsLoaded","_scriptOrder","_loadedScripts","_lastProgress","LOAD_TIMEOUT","registerLoader","canLoadItem","unregisterLoader","setUseXHR","removeAll","idsOrUrls","args","itemsWereRemoved","close","_disposeItem","_loadNext","loadManifest","plugin","getPreloadHandlers","types","extensions","setMaxConnections","loadFile","file","loadNow","_addItem","manifest","fileList","getItems","loadStartWasDispatched","_itemCount","_createLoadItem","_createLoader","plugins","_loader","_updateProgress","bp","useBasePath","pathMatch","ext","autoId","customHandler","_canStartLoad","_loadItem","_handleFileLoad","_handleFileComplete","_handleFileError","_sendFileStart","_finishOrderedItem","_removeLoadItem","_cleanLoadItem","_saveLoadedItems","_processFinishedLoad","loadFailed","_checkScriptLoadOrder","_sendFileComplete","checkItem","_sendFileProgress","remaining","chunk","completeHandler","rel","styleSheet","cssText","textNode","createTextNode","_formatImage","successCallback","errorCallback","objURL","_cleanUpURL","revokeObjectURL","json","AbstractLoader_cancel","_dispose","_manifestQueue","MANIFEST_PROGRESS","_loadManifest","AbstractLoader_handleEvent","AbstractLoader_destroy","queue","_handleManifestFileLoad","_handleManifestProgress","_handleManifestComplete","_handleManifestError","AbstractMediaLoader_constructor","autoplay","SPRITESHEET_PROGRESS","documentElement"],"mappings":"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","file":"dist/duckquest.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 359d6780bf513aecd03b","import Duck from './Duck.js';\r\nimport {LoadQueue} from 'PreloadJS';\r\nimport {Stage, Sprite, SpriteSheet, Ticker} from 'EaselJS';\r\n// console.log( PreloadJS);\r\n// console.log(EaselJS);\r\n// console.log(EaselJS);\r\n\r\n// const queue = new LoadQueue(false);\r\n// queue.on('fileload', (event)=>{\r\n\r\n// \tconst w = event.result.width;\r\n// \tconst h = event.result.height;\r\n// \tconst src = event.result.src;\r\n// \tconst data = {\r\n// \t\timages: [src],\r\n// \t\tframes: {width:w/8+1, height:h, regX:0, regX:0},\r\n// \t\tanimations: {\r\n// \t\t\trun: [0,6,\"run\", 0.5],\r\n// \t\t}\r\n// \t};\r\n// \tconst spriteSheet = new SpriteSheet(data);\r\n// \tlet sprite = new Sprite(spriteSheet);\r\n// \tsprite.gotoAndPlay(\"run\");\r\n// \tsprite.scaleX = 10;\r\n// \tsprite.scaleY = 10;\r\n// \tstage.addChild(sprite);\r\n// });\r\n// queue.loadFile('src/img/batright.png');\r\n// var stage = new Stage(\"canvas\");\r\n\r\n// // var duck = new Duck(0,0);\r\n\r\n// // let img = new Image();\r\n// // img.src = \"src/img/batleft.png\";\r\n// // img.onload = function(){\r\n// // \tconst data = {\r\n// // \t\timages: [img.src],\r\n// // \t\tframes: {width:img.width/8, height:img.height, regX:0, regX:0},\r\n// // \t\tanimations: {\r\n// // \t\t\trun: [0,1,\"run\", 0.5],\r\n// // \t\t}\r\n// // \t};\r\n// // \tlet spriteSheet = new SpriteSheet(data);\r\n// // \tlet sprite = new Sprite(spriteSheet);\r\n// // \tsprite.gotoAndPlay(\"run\");\r\n// // \tsprite.scaleX = 0.5;\r\n// // \tsprite.scaleY = 0.5;\r\n// // \tstage.addChild(sprite);\r\n// // }\r\n\r\n// Ticker.on(\"tick\", ()=>{stage.update()})\r\n\r\n\r\n  \r\n// }\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import {Sprite} from 'EaselJS';\r\n\r\nclass Duck extends Sprite {\r\n\tconstructor(){\r\n  \t\tsuper();\r\n\r\n\r\n\t}\r\n}\r\n\r\n\r\nexport default Duck\n\n\n// WEBPACK FOOTER //\n// ./src/Duck.js","module.exports = require(\"./lib/easeljs-0.8.2.combined.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// EaselJS (bower component)\n// module id = 2\n// module chunks = 0","/*!\n* EaselJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\tonce&&evt.remove();\n\t\t\t}, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | String | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners) {\n\t\t\tvar arr = listeners[eventObj.type];\n\t\t\tif (!arr||!(l=arr.length)) { return; }\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// Ticker.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n\t * event to be notified when a set time interval has elapsed.\n\t *\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n\t * can not be instantiated.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          // Actions carried out each tick (aka frame)\n\t *          if (!event.paused) {\n\t *              // Actions carried out when the Ticker is not paused.\n\t *          }\n\t *      }\n\t *\n\t * @class Ticker\n\t * @uses EventDispatcher\n\t * @static\n\t **/\n\tfunction Ticker() {\n\t\tthrow \"Ticker cannot be instantiated.\";\n\t}\n\n\n// constants:\n\t/**\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n\t * dispatches the tick when the time is within a certain threshold.\n\t *\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n\t * gaining the benefits of that API (screen synch, background throttling).\n\t *\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n\t * framerates of 10, 12, 15, 20, and 30 work well.\n\t *\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF_SYNCHED\n\t * @static\n\t * @type {String}\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tTicker.RAF_SYNCHED = \"synched\";\n\n\t/**\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object's \"delta\" properties to make this easier.\n\t *\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF\n\t * @static\n\t * @type {String}\n\t * @default \"raf\"\n\t * @readonly\n\t **/\n\tTicker.RAF = \"raf\";\n\n\t/**\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n\t * @property TIMEOUT\n\t * @static\n\t * @type {String}\n\t * @default \"timeout\"\n\t * @readonly\n\t **/\n\tTicker.TIMEOUT = \"timeout\";\n\n\n// static events:\n\t/**\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n\t * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          console.log(\"Paused:\", event.paused, event.delta);\n\t *      }\n\t *\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\n\t * @param {Number} delta The time elapsed in ms since the last tick.\n\t * @param {Number} time The total time in ms since Ticker was initialized.\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n\t * @since 0.6.0\n\t */\n\n\n// public static properties:\n\t/**\n\t * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\n\t * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\n\t * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\n\t * @property useRAF\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.useRAF = false;\n\n\t/**\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n\t * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\n\t * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\n\t * @property timingMode\n\t * @static\n\t * @type {String}\n\t * @default Ticker.TIMEOUT\n\t **/\n\tTicker.timingMode = null;\n\n\t/**\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n\t * (ex. maxDelta=50 when running at 40fps).\n\t * \n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n\t * when using both delta and other values.\n\t * \n\t * If 0, there is no maximum.\n\t * @property maxDelta\n\t * @static\n\t * @type {number}\n\t * @default 0\n\t */\n\tTicker.maxDelta = 0;\n\t\n\t/**\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n\t * info.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      createjs.Ticker.paused = true;\n\t *      function handleTick(event) {\n\t *          console.log(event.paused,\n\t *          \tcreatejs.Ticker.getTime(false),\n\t *          \tcreatejs.Ticker.getTime(true));\n\t *      }\n\t *\n\t * @property paused\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.paused = false;\n\n\n// mix-ins:\n\t// EventDispatcher methods:\n\tTicker.removeEventListener = null;\n\tTicker.removeAllEventListeners = null;\n\tTicker.dispatchEvent = null;\n\tTicker.hasEventListener = null;\n\tTicker._listeners = null;\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n\tTicker._addEventListener = Ticker.addEventListener;\n\tTicker.addEventListener = function() {\n\t\t!Ticker._inited&&Ticker.init();\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\n\t};\n\n\n// private static properties:\n\t/**\n\t * @property _inited\n\t * @static\n\t * @type {Boolean}\n\t * @protected\n\t **/\n\tTicker._inited = false;\n\n\t/**\n\t * @property _startTime\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._startTime = 0;\n\n\t/**\n\t * @property _pausedTime\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._pausedTime=0;\n\n\t/**\n\t * The number of ticks that have passed\n\t * @property _ticks\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._ticks = 0;\n\n\t/**\n\t * The number of ticks that have passed while Ticker has been paused\n\t * @property _pausedTicks\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._pausedTicks = 0;\n\n\t/**\n\t * @property _interval\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._interval = 50;\n\n\t/**\n\t * @property _lastTime\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._lastTime = 0;\n\n\t/**\n\t * @property _times\n\t * @static\n\t * @type {Array}\n\t * @protected\n\t **/\n\tTicker._times = null;\n\n\t/**\n\t * @property _tickTimes\n\t * @static\n\t * @type {Array}\n\t * @protected\n\t **/\n\tTicker._tickTimes = null;\n\n\t/**\n\t * Stores the timeout or requestAnimationFrame id.\n\t * @property _timerId\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._timerId = null;\n\t\n\t/**\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n\t * if that property changed and a tick hasn't fired.\n\t * @property _raf\n\t * @static\n\t * @type {Boolean}\n\t * @protected\n\t **/\n\tTicker._raf = true;\n\t\n\n// static getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method setInterval\n\t * @static\n\t * @param {Number} interval\n\t * @deprecated\n\t **/\n\tTicker.setInterval = function(interval) {\n\t\tTicker._interval = interval;\n\t\tif (!Ticker._inited) { return; }\n\t\tTicker._setupTick();\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method getInterval\n\t * @static\n\t * @return {Number}\n\t * @deprecated\n\t **/\n\tTicker.getInterval = function() {\n\t\treturn Ticker._interval;\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method setFPS\n\t * @static\n\t * @param {Number} value\n\t * @deprecated\n\t **/\n\tTicker.setFPS = function(value) {\n\t\tTicker.setInterval(1000/value);\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method getFPS\n\t * @static\n\t * @return {Number}\n\t * @deprecated\n\t **/\n\tTicker.getFPS = function() {\n\t\treturn 1000/Ticker._interval;\n\t};\n\n\t/**\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\n\t * @property interval\n\t * @static\n\t * @type {Number}\n\t **/\n\t \n\t/**\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n\t * `framerate == 1000/interval`.\n\t * @property framerate\n\t * @static\n\t * @type {Number}\n\t **/\n\ttry {\n\t\tObject.defineProperties(Ticker, {\n\t\t\tinterval: { get: Ticker.getInterval, set: Ticker.setInterval },\n\t\t\tframerate: { get: Ticker.getFPS, set: Ticker.setFPS }\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\n// public static methods:\n\t/**\n\t * Starts the tick. This is called automatically when the first listener is added.\n\t * @method init\n\t * @static\n\t **/\n\tTicker.init = function() {\n\t\tif (Ticker._inited) { return; }\n\t\tTicker._inited = true;\n\t\tTicker._times = [];\n\t\tTicker._tickTimes = [];\n\t\tTicker._startTime = Ticker._getTime();\n\t\tTicker._times.push(Ticker._lastTime = 0);\n\t\tTicker.interval = Ticker._interval;\n\t};\n\t\n\t/**\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n\t * @method reset\n\t * @static\n\t **/\n\tTicker.reset = function() {\n\t\tif (Ticker._raf) {\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n\t\t\tf&&f(Ticker._timerId);\n\t\t} else {\n\t\t\tclearTimeout(Ticker._timerId);\n\t\t}\n\t\tTicker.removeAllEventListeners(\"tick\");\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = 0;\n\t\tTicker._inited = false;\n\t};\n\n\t/**\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n\t * because it only measures the time spent within the tick execution stack. \n\t * \n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n\t *\n\t * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\n\t * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\n\t * other than the tick is using ~80ms (another script, DOM rendering, etc).\n\t * @method getMeasuredTickTime\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n\t * @return {Number} The average time spent in a tick in milliseconds.\n\t **/\n\tTicker.getMeasuredTickTime = function(ticks) {\n\t\tvar ttl=0, times=Ticker._tickTimes;\n\t\tif (!times || times.length < 1) { return -1; }\n\n\t\t// by default, calculate average for the past ~1 second:\n\t\tticks = Math.min(times.length, ticks||(Ticker.getFPS()|0));\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\n\t\treturn ttl/ticks;\n\t};\n\n\t/**\n\t * Returns the actual frames / ticks per second.\n\t * @method getMeasuredFPS\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n\t * Defaults to the number of ticks per second.\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n\t * from the target frames per second.\n\t **/\n\tTicker.getMeasuredFPS = function(ticks) {\n\t\tvar times = Ticker._times;\n\t\tif (!times || times.length < 2) { return -1; }\n\n\t\t// by default, calculate fps for the past ~1 second:\n\t\tticks = Math.min(times.length-1, ticks||(Ticker.getFPS()|0));\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n\t * @method setPaused\n\t * @static\n\t * @param {Boolean} value\n\t * @deprecated\n\t **/\n\tTicker.setPaused = function(value) {\n\t\t// TODO: deprecated.\n\t\tTicker.paused = value;\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n\t * @method getPaused\n\t * @static\n\t * @return {Boolean}\n\t * @deprecated\n\t **/\n\tTicker.getPaused = function() {\n\t\t// TODO: deprecated.\n\t\treturn Ticker.paused;\n\t};\n\n\t/**\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n\t * @method getTime\n\t * @static\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n\t **/\n\tTicker.getTime = function(runTime) {\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\n\t/**\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object.\n\t * @method getEventTime\n\t * @static\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\n\t */\n\tTicker.getEventTime = function(runTime) {\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\t\n\t/**\n\t * Returns the number of ticks that have been broadcast by Ticker.\n\t * @method getTicks\n\t * @static\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n\t * value. The default value is false.\n\t * @return {Number} of ticks that have been broadcast.\n\t **/\n\tTicker.getTicks = function(pauseable) {\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n\t};\n\n\n// private static methods:\n\t/**\n\t * @method _handleSynch\n\t * @static\n\t * @protected\n\t **/\n\tTicker._handleSynch = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\n\t\t\tTicker._tick();\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleRAF\n\t * @static\n\t * @protected\n\t **/\n\tTicker._handleRAF = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _handleTimeout\n\t * @static\n\t * @protected\n\t **/\n\tTicker._handleTimeout = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _setupTick\n\t * @static\n\t * @protected\n\t **/\n\tTicker._setupTick = function() {\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\n\n\t\tvar mode = Ticker.timingMode||(Ticker.useRAF&&Ticker.RAF_SYNCHED);\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\tif (f) {\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n\t\t\t\tTicker._raf = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTicker._raf = false;\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n\t};\n\n\t/**\n\t * @method _tick\n\t * @static\n\t * @protected\n\t **/\n\tTicker._tick = function() {\n\t\tvar paused = Ticker.paused;\n\t\tvar time = Ticker._getTime();\n\t\tvar elapsedTime = time-Ticker._lastTime;\n\t\tTicker._lastTime = time;\n\t\tTicker._ticks++;\n\t\t\n\t\tif (paused) {\n\t\t\tTicker._pausedTicks++;\n\t\t\tTicker._pausedTime += elapsedTime;\n\t\t}\n\t\t\n\t\tif (Ticker.hasEventListener(\"tick\")) {\n\t\t\tvar event = new createjs.Event(\"tick\");\n\t\t\tvar maxDelta = Ticker.maxDelta;\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\n\t\t\tevent.paused = paused;\n\t\t\tevent.time = time;\n\t\t\tevent.runTime = time-Ticker._pausedTime;\n\t\t\tTicker.dispatchEvent(event);\n\t\t}\n\t\t\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\n\n\t\tTicker._times.unshift(time);\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\n\t};\n\n\t/**\n\t * @method _getTime\n\t * @static\n\t * @protected\n\t **/\n\tvar now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\n\tTicker._getTime = function() {\n\t\treturn ((now&&now.call(performance))||(new Date().getTime())) - Ticker._startTime;\n\t};\n\n\n\tcreatejs.Ticker = Ticker;\n}());\n\n//##############################################################################\n// UID.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n\t * and should not be instantiated.\n\t * @class UID\n\t * @static\n\t **/\n\tfunction UID() {\n\t\tthrow \"UID cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _nextID\n\t * @type Number\n\t * @protected\n\t **/\n\tUID._nextID = 0;\n\n\n// public static methods:\n\t/**\n\t * Returns the next unique id.\n\t * @method get\n\t * @return {Number} The next unique id\n\t * @static\n\t **/\n\tUID.get = function() {\n\t\treturn UID._nextID++;\n\t};\n\n\n\tcreatejs.UID = UID;\n}());\n\n//##############################################################################\n// MouseEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n\t * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n\t * @class MouseEvent\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @param {Number} stageX The normalized x position relative to the stage.\n\t * @param {Number} stageY The normalized y position relative to the stage.\n\t * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n\t * @param {Number} pointerID The unique id for the pointer.\n\t * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n\t * @param {Number} rawX The raw x position relative to the stage.\n\t * @param {Number} rawY The raw y position relative to the stage.\n\t * @param {DisplayObject} relatedTarget The secondary target for the event.\n\t * @extends Event\n\t * @constructor\n\t **/\n\tfunction MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n\t\tthis.Event_constructor(type, bubbles, cancelable);\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The normalized x position on the stage. This will always be within the range 0 to stage width.\n\t\t * @property stageX\n\t\t * @type Number\n\t\t*/\n\t\tthis.stageX = stageX;\n\t\n\t\t/**\n\t\t * The normalized y position on the stage. This will always be within the range 0 to stage height.\n\t\t * @property stageY\n\t\t * @type Number\n\t\t **/\n\t\tthis.stageY = stageY;\n\t\n\t\t/**\n\t\t * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawX\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawX = (rawX==null)?stageX:rawX;\n\t\n\t\t/**\n\t\t * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawY\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawY = (rawY==null)?stageY:rawY;\n\t\n\t\t/**\n\t\t * The native MouseEvent generated by the browser. The properties and API for this\n\t\t * event may differ between browsers. This property will be null if the\n\t\t * EaselJS property was not directly generated from a native MouseEvent.\n\t\t * @property nativeEvent\n\t\t * @type HtmlMouseEvent\n\t\t * @default null\n\t\t **/\n\t\tthis.nativeEvent = nativeEvent;\n\t\n\t\t/**\n\t\t * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n\t\t * supplied id value.\n\t\t * @property pointerID\n\t\t * @type {Number}\n\t\t */\n\t\tthis.pointerID = pointerID;\n\t\n\t\t/**\n\t\t * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n\t\t * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n\t\t * @property primary\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis.primary = !!primary;\n\t\t\n\t\t/**\n\t\t * The secondary target for the event, if applicable. This is used for mouseout/rollout\n\t\t * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n\t\t * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n\t\t * \n\t\t * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n\t\t * @property relatedTarget\n\t\t * @type {DisplayObject}\n\t\t */\n\t\tthis.relatedTarget = relatedTarget;\n\t}\n\tvar p = createjs.extend(MouseEvent, createjs.Event);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\t\n// getter / setters:\n\t/**\n\t * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localX\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localX = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n\t};\n\t\n\t/**\n\t * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localY\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localY = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n\t};\n\t\n\t/**\n\t * Indicates whether the event was generated by a touch input (versus a mouse input).\n\t * @property isTouch\n\t * @type {Boolean}\n\t * @readonly\n\t */\n\tp._get_isTouch = function() {\n\t\treturn this.pointerID !== -1;\n\t};\n\t\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlocalX: { get: p._get_localX },\n\t\t\tlocalY: { get: p._get_localY },\n\t\t\tisTouch: { get: p._get_isTouch }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a clone of the MouseEvent instance.\n\t * @method clone\n\t * @return {MouseEvent} a clone of the MouseEvent instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\";\n\t};\n\n\n\tcreatejs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n}());\n\n//##############################################################################\n// Matrix2D.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n\t *\n\t * This matrix can be visualized as:\n\t *\n\t * \t[ a  c  tx\n\t * \t  b  d  ty\n\t * \t  0  0  1  ]\n\t *\n\t * Note the locations of b and c.\n\t *\n\t * @class Matrix2D\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @constructor\n\t **/\n\tfunction Matrix2D(a, b, c, d, tx, ty) {\n\t\tthis.setValues(a,b,c,d,tx,ty);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Position (0, 0) in a 3x3 affine transformation matrix.\n\t\t * @property a\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (0, 1) in a 3x3 affine transformation matrix.\n\t\t * @property b\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 0) in a 3x3 affine transformation matrix.\n\t\t * @property c\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 1) in a 3x3 affine transformation matrix.\n\t\t * @property d\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 0) in a 3x3 affine transformation matrix.\n\t\t * @property tx\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 1) in a 3x3 affine transformation matrix.\n\t\t * @property ty\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Matrix2D.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// constants:\n\t/**\n\t * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n\t * @property DEG_TO_RAD\n\t * @static\n\t * @final\n\t * @type Number\n\t * @readonly\n\t **/\n\tMatrix2D.DEG_TO_RAD = Math.PI/180;\n\n\n// static public properties:\n\t/**\n\t * An identity matrix, representing a null transformation.\n\t * @property identity\n\t * @static\n\t * @type Matrix2D\n\t * @readonly\n\t **/\n\tMatrix2D.identity = null; // set at bottom of class definition.\n\t\n\n// public methods:\n\t/**\n\t * Sets the specified values on this instance. \n\t * @method setValues\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @return {Matrix2D} This instance. Useful for chaining method calls.\n\t*/\n\tp.setValues = function(a, b, c, d, tx, ty) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.a = (a == null) ? 1 : a;\n\t\tthis.b = b || 0;\n\t\tthis.c = c || 0;\n\t\tthis.d = (d == null) ? 1 : d;\n\t\tthis.tx = tx || 0;\n\t\tthis.ty = ty || 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix properties to this matrix. All parameters are required.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method append\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.append = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\tthis.a  = a1*a+c1*b;\n\t\t\tthis.b  = b1*a+d1*b;\n\t\t\tthis.c  = a1*c+c1*d;\n\t\t\tthis.d  = b1*c+d1*d;\n\t\t}\n\t\tthis.tx = a1*tx+c1*ty+this.tx;\n\t\tthis.ty = b1*tx+d1*ty+this.ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Prepends the specified matrix properties to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * All parameters are required.\n\t * @method prepend\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prepend = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar c1 = this.c;\n\t\tvar tx1 = this.tx;\n\n\t\tthis.a  = a*a1+c*this.b;\n\t\tthis.b  = b*a1+d*this.b;\n\t\tthis.c  = a*c1+c*this.d;\n\t\tthis.d  = b*c1+d*this.d;\n\t\tthis.tx = a*tx1+c*this.ty+tx;\n\t\tthis.ty = b*tx1+d*this.ty+ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method appendMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendMatrix = function(matrix) {\n\t\treturn this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Prepends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = o.getMatrix();\n\t * \twhile (o = o.parent) {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\to.prependMatrix(o.getMatrix());\n\t * \t}\n\t * @method prependMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependMatrix = function(matrix) {\n\t\treturn this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n\t * For example, you can use this to generate a matrix representing the transformations of a display object:\n\t * \n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n\t * @method appendTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single append operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t} else {\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\t\n\t\tif (regX || regY) {\n\t\t\t// append the registration offset:\n\t\t\tthis.tx -= regX*this.a+regY*this.c; \n\t\t\tthis.ty -= regX*this.b+regY*this.d;\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tdo  {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t * \t} while (o = o.parent);\n\t * \t\n\t * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n\t * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n\t * @method prependTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (regX || regY) {\n\t\t\t// prepend the registration offset:\n\t\t\tthis.tx -= regX; this.ty -= regY;\n\t\t}\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single prepend operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t\tthis.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t} else {\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a clockwise rotation transformation to the matrix.\n\t * @method rotate\n\t * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.rotate = function(angle) {\n\t\tangle = angle*Matrix2D.DEG_TO_RAD;\n\t\tvar cos = Math.cos(angle);\n\t\tvar sin = Math.sin(angle);\n\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\n\t\tthis.a = a1*cos+this.c*sin;\n\t\tthis.b = b1*cos+this.d*sin;\n\t\tthis.c = -a1*sin+this.c*cos;\n\t\tthis.d = -b1*sin+this.d*cos;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a skew transformation to the matrix.\n\t * @method skew\n\t * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @param {Number} skewY The amount to skew vertically in degrees.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.skew = function(skewX, skewY) {\n\t\tskewX = skewX*Matrix2D.DEG_TO_RAD;\n\t\tskewY = skewY*Matrix2D.DEG_TO_RAD;\n\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a scale transformation to the matrix.\n\t * @method scale\n\t * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n\t * @param {Number} y The amount to scale vertically.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.scale = function(x, y) {\n\t\tthis.a *= x;\n\t\tthis.b *= x;\n\t\tthis.c *= y;\n\t\tthis.d *= y;\n\t\t//this.tx *= x;\n\t\t//this.ty *= y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Translates the matrix on the x and y axes.\n\t * @method translate\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.translate = function(x, y) {\n\t\tthis.tx += this.a*x + this.c*y;\n\t\tthis.ty += this.b*x + this.d*y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n\t * @method identity\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.identity = function() {\n\t\tthis.a = this.d = 1;\n\t\tthis.b = this.c = this.tx = this.ty = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Inverts the matrix, causing it to perform the opposite transformation.\n\t * @method invert\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.invert = function() {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tvar tx1 = this.tx;\n\t\tvar n = a1*d1-b1*c1;\n\n\t\tthis.a = d1/n;\n\t\tthis.b = -b1/n;\n\t\tthis.c = -c1/n;\n\t\tthis.d = a1/n;\n\t\tthis.tx = (c1*this.ty-d1*tx1)/n;\n\t\tthis.ty = -(a1*this.ty-b1*tx1)/n;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns true if the matrix is an identity matrix.\n\t * @method isIdentity\n\t * @return {Boolean}\n\t **/\n\tp.isIdentity = function() {\n\t\treturn this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n\t};\n\t\n\t/**\n\t * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n\t * @method equals\n\t * @param {Matrix2D} matrix The matrix to compare.\n\t * @return {Boolean}\n\t **/\n\tp.equals = function(matrix) {\n\t\treturn this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n\t};\n\n\t/**\n\t * Transforms a point according to this matrix.\n\t * @method transformPoint\n\t * @param {Number} x The x component of the point to transform.\n\t * @param {Number} y The y component of the point to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n\t * @return {Point} This matrix. Useful for chaining method calls.\n\t **/\n\tp.transformPoint = function(x, y, pt) {\n\t\tpt = pt||{};\n\t\tpt.x = x*this.a+y*this.c+this.tx;\n\t\tpt.y = x*this.b+y*this.d+this.ty;\n\t\treturn pt;\n\t};\n\n\t/**\n\t * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n\t * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n\t * results.\n\t * @method decompose\n\t * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n\t * @return {Object} The target, or a new generic object with the transform properties applied.\n\t*/\n\tp.decompose = function(target) {\n\t\t// TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n\t\tif (target == null) { target = {}; }\n\t\ttarget.x = this.tx;\n\t\ttarget.y = this.ty;\n\t\ttarget.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n\t\ttarget.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n\n\t\tvar skewX = Math.atan2(-this.c, this.d);\n\t\tvar skewY = Math.atan2(this.b, this.a);\n\n\t\tvar delta = Math.abs(1-skewX/skewY);\n\t\tif (delta < 0.00001) { // effectively identical, can use rotation:\n\t\t\ttarget.rotation = skewY/Matrix2D.DEG_TO_RAD;\n\t\t\tif (this.a < 0 && this.d >= 0) {\n\t\t\t\ttarget.rotation += (target.rotation <= 0) ? 180 : -180;\n\t\t\t}\n\t\t\ttarget.skewX = target.skewY = 0;\n\t\t} else {\n\t\t\ttarget.skewX = skewX/Matrix2D.DEG_TO_RAD;\n\t\t\ttarget.skewY = skewY/Matrix2D.DEG_TO_RAD;\n\t\t}\n\t\treturn target;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified matrix to this matrix.\n\t * @method copy\n\t * @param {Matrix2D} matrix The matrix to copy properties from.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.copy = function(matrix) {\n\t\treturn this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Returns a clone of the Matrix2D instance.\n\t * @method clone\n\t * @return {Matrix2D} a clone of the Matrix2D instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\n\t};\n\n\t// this has to be populated after the class is defined:\n\tMatrix2D.identity = new Matrix2D();\n\n\n\tcreatejs.Matrix2D = Matrix2D;\n}());\n\n//##############################################################################\n// DisplayProps.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Used for calculating and encapsulating display related properties.\n\t * @class DisplayProps\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n\t * @constructor\n\t **/\n\tfunction DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Property representing the alpha that will be applied to a display object.\n\t\t * @property alpha\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the shadow that will be applied to a display object.\n\t\t * @property shadow\n\t\t * @type Shadow\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the compositeOperation that will be applied to a display object.\n\t\t * You can find a list of valid composite operations at:\n\t\t * <a href=\"https://developer.mozilla.org/en/Canvas_tutorial/Compositing\">https://developer.mozilla.org/en/Canvas_tutorial/Compositing</a>\n\t\t * @property compositeOperation\n\t\t * @type String\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Property representing the value for visible that will be applied to a display object.\n\t\t * @property visible\n\t\t * @type Boolean\n\t\t **/\n\t\t\n\t\t/**\n\t\t * The transformation matrix that will be applied to a display object.\n\t\t * @property matrix\n\t\t * @type Matrix2D\n\t\t **/\n\t}\n\tvar p = DisplayProps.prototype;\n\n// initialization:\n\t/**\n\t * Reinitializes the instance with the specified values.\n\t * @method setValues\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.visible = visible == null ? true : !!visible;\n\t\tthis.alpha = alpha == null ? 1 : alpha;\n\t\tthis.shadow = shadow;\n\t\tthis.compositeOperation = compositeOperation;\n\t\tthis.matrix = matrix || (this.matrix&&this.matrix.identity()) || new createjs.Matrix2D();\n\t\treturn this;\n\t};\n\n// public methods:\n\t/**\n\t * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n\t * @method append\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.append = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = shadow || this.shadow;\n\t\tthis.compositeOperation = compositeOperation || this.compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.appendMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n\t * For example, to get the combined display properties that would be applied to a child, you could use:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar props = new createjs.DisplayProps();\n\t * \tdo {\n\t * \t\t// prepend each parent's props in turn:\n\t * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n\t * \t} while (o = o.parent);\n\t * \t\n\t * @method prepend\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.prepend = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = this.shadow || shadow;\n\t\tthis.compositeOperation = this.compositeOperation || compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.prependMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Resets this instance and its matrix to default values.\n\t * @method identity\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.identity = function() {\n\t\tthis.visible = true;\n\t\tthis.alpha = 1;\n\t\tthis.shadow = this.compositeOperation = null;\n\t\tthis.matrix.identity();\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n\t * @method clone\n\t * @return {DisplayProps} a clone of the DisplayProps instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n\t};\n\n// private methods:\n\n\tcreatejs.DisplayProps = DisplayProps;\n})();\n\n//##############################################################################\n// Point.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a point on a 2 dimensional x / y coordinate system.\n\t *\n\t * <h4>Example</h4>\n\t * \n\t *      var point = new createjs.Point(0, 100);\n\t * \n\t * @class Point\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @constructor\n\t **/\n\tfunction Point(x, y) {\n\t \tthis.setValues(x, y);\n\t \t\n\t \t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Point.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @return {Point} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y) {\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified point to this point.\n\t * @method copy\n\t * @param {Point} point The point to copy properties from.\n\t * @return {Point} This point. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(point) {\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Point instance.\n\t * @method clone\n\t * @return {Point} a clone of the Point instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Point(this.x, this.y);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Point (x=\"+this.x+\" y=\"+this.y+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Point = Point;\n}());\n\n//##############################################################################\n// Rectangle.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n\t *\n\t * @class Rectangle\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @constructor\n\t **/\n\tfunction Rectangle(x, y, width, height) {\n\t\tthis.setValues(x, y, width, height);\n\t\t\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Width.\n\t\t * @property width\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Height.\n\t\t * @property height\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Rectangle.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y, width, height) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\tthis.width = width||0;\n\t\tthis.height = height||0;\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Extends the rectangle's bounds to include the described point or rectangle.\n\t * @method extend\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.extend = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\tif (x+width > this.x+this.width) { this.width = x+width-this.x; }\n\t\tif (y+height > this.y+this.height) { this.height = y+height-this.y; }\n\t\tif (x < this.x) { this.width += this.x-x; this.x = x; }\n\t\tif (y < this.y) { this.height += this.y-y; this.y = y; }\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Adds the specified padding to the rectangle's bounds.\n\t * @method pad\n\t * @param {Number} top\n\t * @param {Number} left\n\t * @param {Number} right\n\t * @param {Number} bottom\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.pad = function(top, left, bottom, right) {\n\t\tthis.x -= left;\n\t\tthis.y -= top;\n\t\tthis.width += left+right;\n\t\tthis.height += top+bottom;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified rectangle to this rectangle.\n\t * @method copy\n\t * @param {Rectangle} rectangle The rectangle to copy properties from.\n\t * @return {Rectangle} This rectangle. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(rectangle) {\n\t\treturn this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n\t};\n\t\n\t/** \n\t * Returns true if this rectangle fully encloses the described point or rectangle.\n\t * @method contains\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n\t*/\n\tp.contains = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\treturn (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which contains this rectangle and the specified rectangle.\n\t * @method union\n\t * @param {Rectangle} rect The rectangle to calculate a union with.\n\t * @return {Rectangle} A new rectangle describing the union.\n\t*/\n\tp.union = function(rect) {\n\t\treturn this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n\t * or null if they do not intersect.\n\t * @method intersection\n\t * @param {Rectangle} rect The rectangle to calculate an intersection with.\n\t * @return {Rectangle} A new rectangle describing the intersection or null.\n\t*/\n\tp.intersection = function(rect) {\n\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\n\t\tif (this.x > x1) { x1 = this.x; }\n\t\tif (this.y > y1) { y1 = this.y; }\n\t\tif (this.x + this.width < x2) { x2 = this.x + this.width; }\n\t\tif (this.y + this.height < y2) { y2 = this.y + this.height; }\n\t\treturn (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\n\t};\n\t\n\t/** \n\t * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n\t * @method intersects\n\t * @param {Rectangle} rect The rectangle to compare.\n\t * @return {Boolean} True if the rectangles intersect.\n\t*/\n\tp.intersects = function(rect) {\n\t\treturn (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\n\t};\n\t\n\t/** \n\t * Returns true if the width or height are equal or less than 0.\n\t * @method isEmpty\n\t * @return {Boolean} True if the rectangle is empty.\n\t*/\n\tp.isEmpty = function() {\n\t\treturn this.width <= 0 || this.height <= 0;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Rectangle instance.\n\t * @method clone\n\t * @return {Rectangle} a clone of the Rectangle instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Rectangle = Rectangle;\n}());\n\n//##############################################################################\n// ButtonHelper.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n\t * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n\t * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n\t *\n\t * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n\t * garbage collection.\n\t * \n\t * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n\t *      myInstance.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *          // Click Happened.\n\t *      }\n\t *\n\t * @class ButtonHelper\n\t * @param {Sprite|MovieClip} target The instance to manage.\n\t * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n\t * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n\t * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n\t * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n\t * states.\n\t * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n\t * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n\t * used for the hitState.\n\t * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n\t * null, then the default state of the hitArea will be used. *\n\t * @constructor\n\t */\n\tfunction ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n\t\tif (!target.addEventListener) { return; }\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The target for this button helper.\n\t\t * @property target\n\t\t * @type MovieClip | Sprite\n\t\t * @readonly\n\t\t **/\n\t\tthis.target = target;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n\t\t * @property overLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.overLabel = overLabel == null ? \"over\" : overLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n\t\t * @property outLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.outLabel = outLabel == null ? \"out\" : outLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n\t\t * @property downLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.downLabel = downLabel == null ? \"down\" : downLabel;\n\t\n\t\t/**\n\t\t * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n\t\t * @property play\n\t\t * @default false\n\t\t * @type Boolean\n\t\t **/\n\t\tthis.play = play;\n\t\t\n\t\t\n\t//  private properties\n\t\t/**\n\t\t * @property _isPressed\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isPressed = false;\n\t\n\t\t/**\n\t\t * @property _isOver\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isOver = false;\n\t\n\t\t/**\n\t\t * @property _enabled\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._enabled = false;\n\t\t\n\t// setup:\n\t\ttarget.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n\t\tthis.enabled = true;\n\t\tthis.handleEvent({});\n\t\tif (hitArea) {\n\t\t\tif (hitLabel) {\n\t\t\t\thitArea.actionsEnabled = false;\n\t\t\t\thitArea.gotoAndStop&&hitArea.gotoAndStop(hitLabel);\n\t\t\t}\n\t\t\ttarget.hitArea = hitArea;\n\t\t}\n\t}\n\tvar p = ButtonHelper.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method setEnabled\n\t * @param {Boolean} value\n\t * @deprecated\n\t **/\n\tp.setEnabled = function(value) { // TODO: deprecated.\n\t\tif (value == this._enabled) { return; }\n\t\tvar o = this.target;\n\t\tthis._enabled = value;\n\t\tif (value) {\n\t\t\to.cursor = \"pointer\";\n\t\t\to.addEventListener(\"rollover\", this);\n\t\t\to.addEventListener(\"rollout\", this);\n\t\t\to.addEventListener(\"mousedown\", this);\n\t\t\to.addEventListener(\"pressup\", this);\n\t\t\tif (o._reset) { o.__reset = o._reset; o._reset = this._reset;}\n\t\t} else {\n\t\t\to.cursor = null;\n\t\t\to.removeEventListener(\"rollover\", this);\n\t\t\to.removeEventListener(\"rollout\", this);\n\t\t\to.removeEventListener(\"mousedown\", this);\n\t\t\to.removeEventListener(\"pressup\", this);\n\t\t\tif (o.__reset) { o._reset = o.__reset; delete(o.__reset); }\n\t\t}\n\t};\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method getEnabled\n\t * @return {Boolean}\n\t * @deprecated\n\t **/\n\tp.getEnabled = function() {\n\t\treturn this._enabled;\n\t};\n\n\t/**\n\t * Enables or disables the button functionality on the target.\n\t * @property enabled\n\t * @type {Boolean}\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tenabled: { get: p.getEnabled, set: p.setEnabled }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ButtonHelper]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method handleEvent\n\t * @param {Object} evt The mouse event to handle.\n\t * @protected\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tvar label, t = this.target, type = evt.type;\n\t\tif (type == \"mousedown\") {\n\t\t\tthis._isPressed = true;\n\t\t\tlabel = this.downLabel;\n\t\t} else if (type == \"pressup\") {\n\t\t\tthis._isPressed = false;\n\t\t\tlabel = this._isOver ? this.overLabel : this.outLabel;\n\t\t} else if (type == \"rollover\") {\n\t\t\tthis._isOver = true;\n\t\t\tlabel = this._isPressed ? this.downLabel : this.overLabel;\n\t\t} else { // rollout and default\n\t\t\tthis._isOver = false;\n\t\t\tlabel = this._isPressed ? this.overLabel : this.outLabel;\n\t\t}\n\t\tif (this.play) {\n\t\t\tt.gotoAndPlay&&t.gotoAndPlay(label);\n\t\t} else {\n\t\t\tt.gotoAndStop&&t.gotoAndStop(label);\n\t\t}\n\t};\n\t\n\t/**\n\t * Injected into target. Preserves the paused state through a reset.\n\t * @method _reset\n\t * @protected\n\t **/\n\tp._reset = function() {\n\t\t// TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n\t\tvar p = this.paused;\n\t\tthis.__reset();\n\t\tthis.paused = p;\n\t};\n\n\n\tcreatejs.ButtonHelper = ButtonHelper;\n}());\n\n//##############################################################################\n// Shadow.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n\t * via its <code>shadow</code> property.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n\t *\n\t * @class Shadow\n\t * @constructor\n\t * @param {String} color The color of the shadow. This can be any valid CSS color value.\n\t * @param {Number} offsetX The x offset of the shadow in pixels.\n\t * @param {Number} offsetY The y offset of the shadow in pixels.\n\t * @param {Number} blur The size of the blurring effect.\n\t **/\n\tfunction Shadow(color, offsetX, offsetY, blur) {\n\t\t\n\t\t\n\t// public properties:\n\t\t/** \n\t\t * The color of the shadow. This can be any valid CSS color value.\n\t\t * @property color\n\t\t * @type String\n\t\t * @default null\n\t\t */\n\t\tthis.color = color||\"black\";\n\t\n\t\t/** The x offset of the shadow.\n\t\t * @property offsetX\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetX = offsetX||0;\n\t\n\t\t/** The y offset of the shadow.\n\t\t * @property offsetY\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetY = offsetY||0;\n\t\n\t\t/** The blur of the shadow.\n\t\t * @property blur\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.blur = blur||0;\n\t}\n\tvar p = Shadow.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public properties:\n\t/**\n\t * An identity shadow object (all properties are set to 0).\n\t * @property identity\n\t * @type Shadow\n\t * @static\n\t * @final\n\t * @readonly\n\t **/\n\tShadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shadow]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Shadow instance.\n\t * @method clone\n\t * @return {Shadow} A clone of the current Shadow instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n\t};\n\t\n\n\tcreatejs.Shadow = Shadow;\n}());\n\n//##############################################################################\n// SpriteSheet.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n\t * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n\t * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n\t *\n\t * The data passed to the SpriteSheet constructor defines:\n\t * <ol>\n\t * \t<li> The source image or images to use.</li>\n\t * \t<li> The positions of individual image frames.</li>\n\t * \t<li> Sequences of frames that form named animations. Optional.</li>\n\t * \t<li> The target playback framerate. Optional.</li>\n\t * </ol>\n\t * <h3>SpriteSheet Format</h3>\n\t * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n\t * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n\t *\n\t * <h4>images</h4>\n\t * An array of source images. Images can be either an HTMlimage\n\t * instance, or a uri to an image. The former is recommended to control preloading.\n\t *\n\t * \timages: [image1, \"path/to/image2.png\"],\n\t *\n\t * <h4>frames</h4>\n\t * Defines the individual frames. There are two supported formats for frame data:\n\t * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n\t * and `count` properties.\n\t *\n\t * <ul>\n\t *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n\t *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n\t *  <li>`spacing` indicate the spacing between frames</li>\n\t *  <li>`margin` specify the margin around the image(s)</li>\n\t *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n\t *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n\t *  indexes based on their position in the source images (left to right, top to bottom).</li>\n\t * </ul>\n\t *\n\t *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n\t *\n\t * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n\t * with 4 required and 3 optional entries, in the order:\n\t *\n\t * <ul>\n\t *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n\t *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n\t *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n\t * </ul>\n\t *\n\t * \tframes: [\n\t * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n\t * \t\t[64, 0, 96, 64],\n\t * \t\t[0, 0, 64, 64, 1, 32, 32]\n\t * \t\t// etc.\n\t * \t]\n\t *\n\t * <h4>animations</h4>\n\t * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n\t * animation of the same name. Each animation must specify the frames to play, and may\n\t * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n\t * the name of the `next` animation to sequence to after it completes.\n\t *\n\t * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n\t * <ol>\n\t * \t<li>for a single frame animation, you can simply specify the frame index\n\t *\n\t * \t\tanimations: {\n\t * \t\t\tsit: 7\n\t * \t\t}\n\t *\n\t * </li>\n\t * <li>\n\t *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n\t * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\t// start, end, next*, speed*\n\t * \t\t\trun: [0, 8],\n\t * \t\t\tjump: [9, 12, \"run\", 2]\n\t * \t\t}\n\t *\n\t *  </li>\n\t *  <li>\n\t *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n\t *     indexes to play in order. The object can also specify `next` and `speed` properties.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\twalk: {\n\t * \t\t\t\tframes: [1,2,3,3,2,1]\n\t * \t\t\t},\n\t * \t\t\tshoot: {\n\t * \t\t\t\tframes: [1,4,5,6],\n\t * \t\t\t\tnext: \"walk\",\n\t * \t\t\t\tspeed: 0.5\n\t * \t\t\t}\n\t * \t\t}\n\t *\n\t *  </li>\n\t * </ol>\n\t * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n\t * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n\t * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n\t *\n\t * <h4>framerate</h4>\n\t * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n\t * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n\t *\n\t * \t\tframerate: 20\n\t *\n\t * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t *\n\t * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n\t * \t\tfunction handleTick(event) {\n\t *\t\t\tstage.update(event);\n\t *\t\t}\n\t *\n\t * <h3>Example</h3>\n\t * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n\t * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n\t * sequencing back to run.\n\t *\n\t * \t\tvar data = {\n\t * \t\t\timages: [\"sprites.jpg\"],\n\t * \t\t\tframes: {width:50, height:50},\n\t * \t\t\tanimations: {\n\t * \t\t\t\tstand:0,\n\t * \t\t\t\trun:[1,5],\n\t * \t\t\t\tjump:[6,8,\"run\"]\n\t * \t\t\t}\n\t * \t\t};\n\t * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n\t * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n\t *\n\t * <h3>Generating SpriteSheet Images</h3>\n\t * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n\t * coordinates manually, however there are a number of tools that facilitate this.\n\t * <ul>\n\t *     <li>Exporting SpriteSheets or HTML5 content from Flash Pro supports the EaselJS SpriteSheet format.</li>\n\t *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n\t *     EaselJS support.\n\t *     <li>SWF animations in Flash can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\"></a></li>\n\t * </ul>\n\t *\n\t * <h3>Cross Origin Issues</h3>\n\t * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n\t * using:\n\t * <ul>\n\t *     <li>a mouse</li>\n\t *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n\t *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n\t *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n\t * </ul>\n\t * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n\t * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n\t *\n\t * \t\tvar image = new Image();\n\t * \t\timg.crossOrigin=\"Anonymous\";\n\t * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n\t *\n\t * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n\t * support cross-origin requests, or this will not work. For more information, check out\n\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n\t *\n\t * @class SpriteSheet\n\t * @constructor\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @extends EventDispatcher\n\t **/\n\tfunction SpriteSheet(data) {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t\t// public properties:\n\t\t/**\n\t\t * Indicates whether all images are finished loading.\n\t\t * @property complete\n\t\t * @type Boolean\n\t\t * @readonly\n\t\t **/\n\t\tthis.complete = true;\n\n\t\t/**\n\t\t * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n\t\t * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t **/\n\t\tthis.framerate = 0;\n\n\n\t\t// private properties:\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = null;\n\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = null;\n\n\t\t/**\n\t\t * @property _images\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._images = null;\n\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Object\n\t\t **/\n\t\tthis._data = null;\n\n\t\t/**\n\t\t * @property _loadCount\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._loadCount = 0;\n\n\t\t// only used for simple frame defs:\n\t\t/**\n\t\t * @property _frameHeight\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameHeight = 0;\n\n\t\t/**\n\t\t * @property _frameWidth\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameWidth = 0;\n\n\t\t/**\n\t\t * @property _numFrames\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._numFrames = 0;\n\n\t\t/**\n\t\t * @property _regX\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regX = 0;\n\n\t\t/**\n\t\t * @property _regY\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regY = 0;\n\n\t\t/**\n\t\t * @property _spacing\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._spacing = 0;\n\n\t\t/**\n\t\t * @property _margin\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._margin = 0;\n\n\t\t// setup:\n\t\tthis._parseData(data);\n\t}\n\tvar p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// events:\n\t/**\n\t * Dispatched when all images are loaded.  Note that this only fires if the images\n\t * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n\t * to prior to adding a listener. Ex.\n\t *\n\t * \tvar sheet = new createjs.SpriteSheet(data);\n\t * \tif (!sheet.complete) {\n\t * \t\t// not preloaded, listen for the complete event:\n\t * \t\tsheet.addEventListener(\"complete\", handler);\n\t * \t}\n\t *\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n\t * when doing on-demand rendering.\n\t * @event getframe\n\t * @param {Number} index The frame index.\n\t * @param {Object} frame The frame object that getFrame will return.\n\t */\n\n\t/**\n\t * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n\t * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n\t * event once all images are finished processing, even if an error is encountered.\n\t * @event error\n\t * @param {String} src The source of the image that failed to load.\n\t * @since 0.8.2\n\t */\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n\t * @method getAnimations\n\t * @return {Array}\n\t * @deprecated\n\t **/\n\tp.getAnimations = function() {\n\t\treturn this._animations.slice();\n\t};\n\n\t/**\n\t * Returns an array of all available animation names available on this sprite sheet as strings.\n\t * @property animations\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tanimations: { get: p.getAnimations }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns the total number of frames in the specified animation, or in the whole sprite\n\t * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n\t * the images have not been fully loaded.\n\t * @method getNumFrames\n\t * @param {String} animation The name of the animation to get a frame count for.\n\t * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n\t */\n\tp.getNumFrames = function(animation) {\n\t\tif (animation == null) {\n\t\t\treturn this._frames ? this._frames.length : this._numFrames || 0;\n\t\t} else {\n\t\t\tvar data = this._data[animation];\n\t\t\tif (data == null) { return 0; }\n\t\t\telse { return data.frames.length; }\n\t\t}\n\t};\n\n\t/**\n\t * Returns an object defining the specified animation. The returned object contains:<UL>\n\t * \t<li>frames: an array of the frame ids in the animation</li>\n\t * \t<li>speed: the playback speed for this animation</li>\n\t * \t<li>name: the name of the animation</li>\n\t * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n\t * \tsame.</li>\n\t * </UL>\n\t * @method getAnimation\n\t * @param {String} name The name of the animation to get.\n\t * @return {Object} a generic object with frames, speed, name, and next properties.\n\t **/\n\tp.getAnimation = function(name) {\n\t\treturn this._data[name];\n\t};\n\n\t/**\n\t * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n\t * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n\t * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n\t * \timage.</li>\n\t * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n\t * </UL>\n\t * @method getFrame\n\t * @param {Number} frameIndex The index of the frame.\n\t * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n\t **/\n\tp.getFrame = function(frameIndex) {\n\t\tvar frame;\n\t\tif (this._frames && (frame=this._frames[frameIndex])) { return frame; }\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n\t * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n\t *\n\t * \t[x=-50, y=-40, width=90, height=70]\n\t *\n\t * @method getFrameBounds\n\t * @param {Number} frameIndex The index of the frame.\n\t * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n\t **/\n\tp.getFrameBounds = function(frameIndex, rectangle) {\n\t\tvar frame = this.getFrame(frameIndex);\n\t\treturn frame ? (rectangle||new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheet]\";\n\t};\n\n\t/**\n\t * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheet cannot be cloned.\")\n\t};\n\n// private methods:\n\t/**\n\t * @method _parseData\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @protected\n\t **/\n\tp._parseData = function(data) {\n\t\tvar i,l,o,a;\n\t\tif (data == null) { return; }\n\n\t\tthis.framerate = data.framerate||0;\n\n\t\t// parse images:\n\t\tif (data.images && (l=data.images.length) > 0) {\n\t\t\ta = this._images = [];\n\t\t\tfor (i=0; i<l; i++) {\n\t\t\t\tvar img = data.images[i];\n\t\t\t\tif (typeof img == \"string\") {\n\t\t\t\t\tvar src = img;\n\t\t\t\t\timg = document.createElement(\"img\");\n\t\t\t\t\timg.src = src;\n\t\t\t\t}\n\t\t\t\ta.push(img);\n\t\t\t\tif (!img.getContext && !img.naturalWidth) {\n\t\t\t\t\tthis._loadCount++;\n\t\t\t\t\tthis.complete = false;\n\t\t\t\t\t(function(o, src) { img.onload = function() { o._handleImageLoad(src); } })(this, src);\n\t\t\t\t\t(function(o, src) { img.onerror = function() { o._handleImageError(src); } })(this, src);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// parse frames:\n\t\tif (data.frames == null) { // nothing\n\t\t} else if (Array.isArray(data.frames)) {\n\t\t\tthis._frames = [];\n\t\t\ta = data.frames;\n\t\t\tfor (i=0,l=a.length;i<l;i++) {\n\t\t\t\tvar arr = a[i];\n\t\t\t\tthis._frames.push({image:this._images[arr[4]?arr[4]:0], rect:new createjs.Rectangle(arr[0],arr[1],arr[2],arr[3]), regX:arr[5]||0, regY:arr[6]||0 });\n\t\t\t}\n\t\t} else {\n\t\t\to = data.frames;\n\t\t\tthis._frameWidth = o.width;\n\t\t\tthis._frameHeight = o.height;\n\t\t\tthis._regX = o.regX||0;\n\t\t\tthis._regY = o.regY||0;\n\t\t\tthis._spacing = o.spacing||0;\n\t\t\tthis._margin = o.margin||0;\n\t\t\tthis._numFrames = o.count;\n\t\t\tif (this._loadCount == 0) { this._calculateFrames(); }\n\t\t}\n\n\t\t// parse animations:\n\t\tthis._animations = [];\n\t\tif ((o=data.animations) != null) {\n\t\t\tthis._data = {};\n\t\t\tvar name;\n\t\t\tfor (name in o) {\n\t\t\t\tvar anim = {name:name};\n\t\t\t\tvar obj = o[name];\n\t\t\t\tif (typeof obj == \"number\") { // single frame\n\t\t\t\t\ta = anim.frames = [obj];\n\t\t\t\t} else if (Array.isArray(obj)) { // simple\n\t\t\t\t\tif (obj.length == 1) { anim.frames = [obj[0]]; }\n\t\t\t\t\telse {\n\t\t\t\t\t\tanim.speed = obj[3];\n\t\t\t\t\t\tanim.next = obj[2];\n\t\t\t\t\t\ta = anim.frames = [];\n\t\t\t\t\t\tfor (i=obj[0];i<=obj[1];i++) {\n\t\t\t\t\t\t\ta.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else { // complex\n\t\t\t\t\tanim.speed = obj.speed;\n\t\t\t\t\tanim.next = obj.next;\n\t\t\t\t\tvar frames = obj.frames;\n\t\t\t\t\ta = anim.frames = (typeof frames == \"number\") ? [frames] : frames.slice(0);\n\t\t\t\t}\n\t\t\t\tif (anim.next === true || anim.next === undefined) { anim.next = name; } // loop\n\t\t\t\tif (anim.next === false || (a.length < 2 && anim.next == name)) { anim.next = null; } // stop\n\t\t\t\tif (!anim.speed) { anim.speed = 1; }\n\t\t\t\tthis._animations.push(name);\n\t\t\t\tthis._data[name] = anim;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageLoad\n\t * @protected\n\t **/\n\tp._handleImageLoad = function(src) {\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis._calculateFrames();\n\t\t\tthis.complete = true;\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageError\n\t * @protected\n\t */\n\tp._handleImageError = function (src) {\n\t\tvar errorEvent = new createjs.Event(\"error\");\n\t\terrorEvent.src = src;\n\t\tthis.dispatchEvent(errorEvent);\n\n\t\t// Complete is still dispatched.\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _calculateFrames\n\t * @protected\n\t **/\n\tp._calculateFrames = function() {\n\t\tif (this._frames || this._frameWidth == 0) { return; }\n\n\t\tthis._frames = [];\n\n\t\tvar maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n\t\tvar frameCount = 0, frameWidth = this._frameWidth, frameHeight = this._frameHeight;\n\t\tvar spacing = this._spacing, margin = this._margin;\n\t\t\n\t\timgLoop:\n\t\tfor (var i=0, imgs=this._images; i<imgs.length; i++) {\n\t\t\tvar img = imgs[i], imgW = img.width, imgH = img.height;\n\n\t\t\tvar y = margin;\n\t\t\twhile (y <= imgH-margin-frameHeight) {\n\t\t\t\tvar x = margin;\n\t\t\t\twhile (x <= imgW-margin-frameWidth) {\n\t\t\t\t\tif (frameCount >= maxFrames) { break imgLoop; }\n\t\t\t\t\tframeCount++;\n\t\t\t\t\tthis._frames.push({\n\t\t\t\t\t\t\timage: img,\n\t\t\t\t\t\t\trect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n\t\t\t\t\t\t\tregX: this._regX,\n\t\t\t\t\t\t\tregY: this._regY\n\t\t\t\t\t\t});\n\t\t\t\t\tx += frameWidth+spacing;\n\t\t\t\t}\n\t\t\t\ty += frameHeight+spacing;\n\t\t\t}\n\t\t}\n\t\tthis._numFrames = frameCount;\n\t};\n\n\n\tcreatejs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Graphics.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n\t * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n\t * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n\t * context of an EaselJS display list.\n\t *\n\t * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n\t * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n\t *\n\t *      var g = new createjs.Graphics();\n\t *      g.setStrokeStyle(1);\n\t *      g.beginStroke(\"#000000\");\n\t *      g.beginFill(\"red\");\n\t *      g.drawCircle(0,0,30);\n\t *\n\t * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n\t * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n\t *\n\t *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n\t *\n\t * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n\t * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n\t *\n\t *      var fillCommand = myGraphics.beginFill(\"red\").command;\n\t *      // ... later, update the fill style/color:\n\t *      fillCommand.style = \"blue\";\n\t *      // or change it to a bitmap fill:\n\t *      fillCommand.bitmap(myImage);\n\t *\n\t * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n\t * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n\t *\n\t *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n\t *      myGraphics.append(createjs.Graphics.beginCmd);\n\t *      // we need to define the path before applying the fill:\n\t *      var circle = new createjs.Graphics.Circle(0,0,30);\n\t *      myGraphics.append(circle);\n\t *      // fill the path we just defined:\n\t *      var fill = new createjs.Graphics.Fill(\"red\");\n\t *      myGraphics.append(fill);\n\t *\n\t * These approaches can be used together, for example to insert a custom command:\n\t *\n\t *      myGraphics.beginFill(\"red\");\n\t *      var customCommand = new CustomSpiralCommand(etc);\n\t *      myGraphics.append(customCommand);\n\t *      myGraphics.beginFill(\"blue\");\n\t *      myGraphics.drawCircle(0, 0, 30);\n\t *\n\t * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n\t *\n\t * <h4>Tiny API</h4>\n\t * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n\t * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n\t * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n\t * descriptions in the docs.\n\t *\n\t * <table>\n\t *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n\t *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n\t *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n\t *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n\t *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n\t *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n\t *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n\t *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n\t *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n\t *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n\t *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n\t *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n\t *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n\t *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n\t *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n\t *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n\t * </table>\n\t *\n\t * Here is the above example, using the tiny API instead.\n\t *\n\t *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n\t *\n\t * @class Graphics\n\t * @constructor\n\t **/\n\tfunction Graphics() {\n\n\n\t// public properties\n\t\t/**\n\t\t * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n\t\t * to a Fill command in order to dynamically update the color later by using:\n\t\t *\n\t\t * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n\t\t * \t\t// update color later:\n\t\t * \t\tmyFill.style = \"yellow\";\n\t\t *\n\t\t * @property command\n\t\t * @type Object\n\t\t **/\n\t\tthis.command = null;\n\n\n\t// private properties\n\t\t/**\n\t\t * @property _stroke\n\t\t * @protected\n\t\t * @type {Stroke}\n\t\t **/\n\t\tthis._stroke = null;\n\n\t\t/**\n\t\t * @property _strokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._strokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._oldStrokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _strokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._strokeDash = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._oldStrokeDash = null;\n\n\t\t/**\n\t\t * @property _strokeIgnoreScale\n\t\t * @protected\n\t\t * @type Boolean\n\t\t **/\n\t\tthis._strokeIgnoreScale = false;\n\n\t\t/**\n\t\t * @property _fill\n\t\t * @protected\n\t\t * @type {Fill}\n\t\t **/\n\t\tthis._fill = null;\n\n\t\t/**\n\t\t * @property _instructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._instructions = [];\n\n\t\t/**\n\t\t * Indicates the last instruction index that was committed.\n\t\t * @property _commitIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t **/\n\t\tthis._commitIndex = 0;\n\n\t\t/**\n\t\t * Uncommitted instructions.\n\t\t * @property _activeInstructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._activeInstructions = [];\n\n\t\t/**\n\t\t * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n\t\t * @property _dirty\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._dirty = false;\n\n\t\t/**\n\t\t * Index to draw from if a store operation has happened.\n\t\t * @property _storeIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._storeIndex = 0;\n\n\t// setup:\n\t\tthis.clear();\n\t}\n\tvar p = Graphics.prototype;\n\tvar G = Graphics; // shortcut\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public methods:\n\t/**\n\t * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n\t *\n\t *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n\t *      // Returns \"rgba(50,100,150,0.5)\"\n\t *\n\t * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n\t * param. For example,\n\t *\n\t *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n\t *      // Returns \"rgba(255,0,255,0.2)\"\n\t *\n\t * @method getRGB\n\t * @static\n\t * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n\t * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n\t * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n\t **/\n\tGraphics.getRGB = function(r, g, b, alpha) {\n\t\tif (r != null && b == null) {\n\t\t\talpha = g;\n\t\t\tb = r&0xFF;\n\t\t\tg = r>>8&0xFF;\n\t\t\tr = r>>16&0xFF;\n\t\t}\n\t\tif (alpha == null) {\n\t\t\treturn \"rgb(\"+r+\",\"+g+\",\"+b+\")\";\n\t\t} else {\n\t\t\treturn \"rgba(\"+r+\",\"+g+\",\"+b+\",\"+alpha+\")\";\n\t\t}\n\t};\n\n\t/**\n\t * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n\t * or if alpha is null then in the format \"hsl(360,100,100)\".\n\t *\n\t *      createjs.Graphics.getHSL(150, 100, 70);\n\t *      // Returns \"hsl(150,100,70)\"\n\t *\n\t * @method getHSL\n\t * @static\n\t * @param {Number} hue The hue component for the color, between 0 and 360.\n\t * @param {Number} saturation The saturation component for the color, between 0 and 100.\n\t * @param {Number} lightness The lightness component for the color, between 0 and 100.\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n\t * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n\t **/\n\tGraphics.getHSL = function(hue, saturation, lightness, alpha) {\n\t\tif (alpha == null) {\n\t\t\treturn \"hsl(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%)\";\n\t\t} else {\n\t\t\treturn \"hsla(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%,\"+alpha+\")\";\n\t\t}\n\t};\n\n\n// static properties:\n\t/**\n\t * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n\t * unnecessary instantiation.\n\t * @property beginCmd\n\t * @type {Graphics.BeginPath}\n\t * @static\n\t **/\n\t // defined at the bottom of this file.\n\n\t/**\n\t * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n\t * @property BASE_64\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Object}\n\t **/\n\tGraphics.BASE_64 = {\"A\":0,\"B\":1,\"C\":2,\"D\":3,\"E\":4,\"F\":5,\"G\":6,\"H\":7,\"I\":8,\"J\":9,\"K\":10,\"L\":11,\"M\":12,\"N\":13,\"O\":14,\"P\":15,\"Q\":16,\"R\":17,\"S\":18,\"T\":19,\"U\":20,\"V\":21,\"W\":22,\"X\":23,\"Y\":24,\"Z\":25,\"a\":26,\"b\":27,\"c\":28,\"d\":29,\"e\":30,\"f\":31,\"g\":32,\"h\":33,\"i\":34,\"j\":35,\"k\":36,\"l\":37,\"m\":38,\"n\":39,\"o\":40,\"p\":41,\"q\":42,\"r\":43,\"s\":44,\"t\":45,\"u\":46,\"v\":47,\"w\":48,\"x\":49,\"y\":50,\"z\":51,\"0\":52,\"1\":53,\"2\":54,\"3\":55,\"4\":56,\"5\":57,\"6\":58,\"7\":59,\"8\":60,\"9\":61,\"+\":62,\"/\":63};\n\n\t/**\n\t * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"butt\", 1 to \"round\", and 2 to \"square\".\n\t * For example, to set the line caps to \"square\":\n\t *\n\t *      myGraphics.ss(16, 2);\n\t *\n\t * @property STROKE_CAPS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n\t/**\n\t * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n\t * For example, to set the line joints to \"bevel\":\n\t *\n\t *      myGraphics.ss(16, 0, 2);\n\t *\n\t * @property STROKE_JOINTS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n\t/**\n\t * @property _ctx\n\t * @static\n\t * @protected\n\t * @type {CanvasRenderingContext2D}\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tGraphics._ctx = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n\t * @method getInstructions\n\t * @return {Array}\n\t * @deprecated\n\t **/\n\tp.getInstructions = function() {\n\t\tthis._updateInstructions();\n\t\treturn this._instructions;\n\t};\n\n\t/**\n\t * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n\t * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n\t *\n\t * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n\t * @property instructions\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tinstructions: { get: p.getInstructions }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true if this Graphics instance has no drawing commands.\n\t * @method isEmpty\n\t * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n\t **/\n\tp.isEmpty = function() {\n\t\treturn !(this._instructions.length || this._activeInstructions.length);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n\t **/\n\tp.draw = function(ctx, data) {\n\t\tthis._updateInstructions();\n\t\tvar instr = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instr.length; i<l; i++) {\n\t\t\tinstr[i].exec(ctx, data);\n\t\t}\n\t};\n\n\t/**\n\t * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n\t * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method drawAsPath\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t **/\n\tp.drawAsPath = function(ctx) {\n\t\tthis._updateInstructions();\n\t\tvar instr, instrs = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instrs.length; i<l; i++) {\n\t\t\t// the first command is always a beginPath command.\n\t\t\tif ((instr = instrs[i]).path !== false) { instr.exec(ctx); }\n\t\t}\n\t};\n\n\n// public methods that map directly to context 2D calls:\n\t/**\n\t * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n\t * @method moveTo\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t **/\n\tp.moveTo = function(x, y) {\n\t\treturn this.append(new G.MoveTo(x,y), true);\n\t};\n\n\t/**\n\t * Draws a line from the current drawing point to the specified position, which become the new current drawing\n\t * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n\t * A tiny API method \"lt\" also exists.\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n\t * whatwg spec</a>.\n\t * @method lineTo\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.lineTo = function(x, y) {\n\t\treturn this.append(new G.LineTo(x,y));\n\t};\n\n\t/**\n\t * Draws an arc with the specified control points and radius.  For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n\t * whatwg spec</a>. A tiny API method \"at\" also exists.\n\t * @method arcTo\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arcTo = function(x1, y1, x2, y2, radius) {\n\t\treturn this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n\t};\n\n\t/**\n\t * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n\t * example, to draw a full circle with a radius of 20 centered at (100, 100):\n\t *\n\t *      arc(100, 100, 20, 0, Math.PI*2);\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n\t * A tiny API method \"a\" also exists.\n\t * @method arc\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\treturn this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n\t};\n\n\t/**\n\t * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n\t * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n\t * whatwg spec</a>. A tiny API method \"qt\" also exists.\n\t * @method quadraticCurveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.quadraticCurveTo = function(cpx, cpy, x, y) {\n\t\treturn this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n\t};\n\n\t/**\n\t * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n\t * cp2y). For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n\t * whatwg spec</a>. A tiny API method \"bt\" also exists.\n\t * @method bezierCurveTo\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\treturn this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n\t};\n\n\t/**\n\t * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n\t * whatwg spec</a>. A tiny API method \"r\" also exists.\n\t * @method rect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.rect = function(x, y, w, h) {\n\t\treturn this.append(new G.Rect(x, y, w, h));\n\t};\n\n\t/**\n\t * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n\t * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n\t * @method closePath\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.closePath = function() {\n\t\treturn this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n\t};\n\n\n// public methods that roughly map to Flash graphics APIs:\n\t/**\n\t * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n\t * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n\t * @method clear\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.clear = function() {\n\t\tthis._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n\t\tthis._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n\t\tthis._dirty = this._strokeIgnoreScale = false;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n\t * @method beginFill\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginFill = function(color) {\n\t\treturn this._setFill(color ? new G.Fill(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"lf\" also exists.\n\t * @method beginLinearGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientFill = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n\t *\n\t *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n\t *\n\t * A tiny API method \"rf\" also exists.\n\t * @method beginRadialGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientFill = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n\t * exists.\n\t * @method beginBitmapFill\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapFill = function(image, repetition, matrix) {\n\t\treturn this._setFill(new G.Fill(null,matrix).bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n\t * A tiny API method \"ef\" also exists.\n\t * @method endFill\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endFill = function() {\n\t\treturn this.beginFill();\n\t};\n\n\t/**\n\t * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n\t * the stroke style and color in a single line of code like so:\n\t *\n\t * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n\t *\n\t * A tiny API method \"ss\" also exists.\n\t * @method setStrokeStyle\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeStyle = function(thickness, caps, joints, miterLimit, ignoreScale) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n\t\t// ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n\t\tif (this._stroke) { this._stroke.ignoreScale = ignoreScale; }\n\t\tthis._strokeIgnoreScale = ignoreScale;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Sets or clears the stroke dash pattern.\n\t *\n\t * \tmyGraphics.setStrokeDash([20, 10], 0);\n\t *\n\t * A tiny API method `sd` also exists.\n\t * @method setStrokeDash\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear the existing stroke dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeDash = function(segments, offset) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeDash = this.command = new G.StrokeDash(segments, offset);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n\t * @method beginStroke\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginStroke = function(color) {\n\t\treturn this._setStroke(color ? new G.Stroke(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10).\n\t *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"ls\" also exists.\n\t * @method beginLinearGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientStroke = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10)\n\t *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n\t *          .drawRect(50, 90, 150, 110);\n\t *\n\t * A tiny API method \"rs\" also exists.\n\t * @method beginRadialGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientStroke = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n\t * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n\t * also exists.\n\t * @method beginBitmapStroke\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapStroke = function(image, repetition) {\n\t\t// NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n\t\treturn this._setStroke(new G.Stroke().bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n\t * A tiny API method \"es\" also exists.\n\t * @method endStroke\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endStroke = function() {\n\t\treturn this.beginStroke();\n\t};\n\n\t/**\n\t * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n\t * method.\n\t * @method quadraticCurveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.curveTo = p.quadraticCurveTo;\n\n\t/**\n\t *\n\t * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n\t * method.\n\t * @method drawRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRect = p.rect;\n\n\t/**\n\t * Draws a rounded rectangle with all corners with the specified radius.\n\t * @method drawRoundRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRect = function(x, y, w, h, radius) {\n\t\treturn this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n\t};\n\n\t/**\n\t * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n\t * method \"rc\" also exists.\n\t * @method drawRoundRectComplex\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRectComplex = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\treturn this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n\t};\n\n\t/**\n\t * Draws a circle with the specified radius at (x, y).\n\t *\n\t *      var g = new createjs.Graphics();\n\t *\t    g.setStrokeStyle(1);\n\t *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n\t *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n\t *\t    g.drawCircle(0,0,3);\n\t *\n\t *\t    var s = new createjs.Shape(g);\n\t *\t\ts.x = 100;\n\t *\t\ts.y = 100;\n\t *\n\t *\t    stage.addChild(s);\n\t *\t    stage.update();\n\t *\n\t * A tiny API method \"dc\" also exists.\n\t * @method drawCircle\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawCircle = function(x, y, radius) {\n\t\treturn this.append(new G.Circle(x, y, radius));\n\t};\n\n\t/**\n\t * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n\t * except the width and height can be different. A tiny API method \"de\" also exists.\n\t * @method drawEllipse\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawEllipse = function(x, y, w, h) {\n\t\treturn this.append(new G.Ellipse(x, y, w, h));\n\t};\n\n\t/**\n\t * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n\t * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n\t * radius of 50:\n\t *\n\t *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n\t *      // Note: -90 makes the first point vertical\n\t *\n\t * A tiny API method \"dp\" also exists.\n\t *\n\t * @method drawPolyStar\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawPolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\treturn this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n\t};\n\n\t// TODO: deprecated.\n\t/**\n\t * Removed in favour of using custom command objects with {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t * @method inject\n\t * @deprecated\n\t **/\n\n\t/**\n\t * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n\t * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n\t * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n\t *\n\t * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n\t * built-in or custom graphics commands. For example:\n\t *\n\t * \t\t// attach data to our shape, so we can access it during the draw:\n\t * \t\tmyShape.color = \"red\";\n\t *\n\t * \t\t// append a Circle command object:\n\t * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n\t *\n\t * \t\t// append a custom command object with an exec method that sets the fill style\n\t * \t\t// based on the shape's data, and then fills the circle.\n\t * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n\t * \t\t\tctx.fillStyle = shape.color;\n\t * \t\t\tctx.fill();\n\t * \t\t}});\n\t *\n\t * @method append\n\t * @param {Object} command A graphics command object exposing an \"exec\" method.\n\t * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.append = function(command, clean) {\n\t\tthis._activeInstructions.push(command);\n\t\tthis.command = command;\n\t\tif (!clean) { this._dirty = true; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Decodes a compact encoded path string into a series of draw instructions.\n\t * This format is not intended to be human readable, and is meant for use by authoring tools.\n\t * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n\t * commands.\n\t *\n\t * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n\t * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n\t * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n\t * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n\t * latter. Bits 5 and 6 are currently unused.\n\t *\n\t * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n\t * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n\t * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n\t * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n\t * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n\t * appropriate).\n\t *\n\t * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n\t * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n\t * parameter.\n\t * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n\t * indicate 1500 tenths of a pixel.\n\t * <br />AA - 000000000000. Absolute y position of 0.\n\t * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n\t * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n\t * provide an absolute position of +150.0px.\n\t * <br />AAA - 000000000000000000. A y delta value of 0.\n\t *\n\t * A tiny API method \"p\" also exists.\n\t * @method decodePath\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.decodePath = function(str) {\n\t\tvar instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n\t\tvar paramCount = [2, 2, 4, 6, 0];\n\t\tvar i=0, l=str.length;\n\t\tvar params = [];\n\t\tvar x=0, y=0;\n\t\tvar base64 = Graphics.BASE_64;\n\n\t\twhile (i<l) {\n\t\t\tvar c = str.charAt(i);\n\t\t\tvar n = base64[c];\n\t\t\tvar fi = n>>3; // highest order bits 1-3 code for operation.\n\t\t\tvar f = instructions[fi];\n\t\t\t// check that we have a valid instruction & that the unused bits are empty:\n\t\t\tif (!f || (n&3)) { throw(\"bad path data (@\"+i+\"): \"+c); }\n\t\t\tvar pl = paramCount[fi];\n\t\t\tif (!fi) { x=y=0; } // move operations reset the position.\n\t\t\tparams.length = 0;\n\t\t\ti++;\n\t\t\tvar charCount = (n>>2&1)+2;  // 4th header bit indicates number size for this operation.\n\t\t\tfor (var p=0; p<pl; p++) {\n\t\t\t\tvar num = base64[str.charAt(i)];\n\t\t\t\tvar sign = (num>>5) ? -1 : 1;\n\t\t\t\tnum = ((num&31)<<6)|(base64[str.charAt(i+1)]);\n\t\t\t\tif (charCount == 3) { num = (num<<6)|(base64[str.charAt(i+2)]); }\n\t\t\t\tnum = sign*num/10;\n\t\t\t\tif (p%2) { x = (num += x); }\n\t\t\t\telse { y = (num += y); }\n\t\t\t\tparams[p] = num;\n\t\t\t\ti += charCount;\n\t\t\t}\n\t\t\tf.apply(this,params);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n\t * the existing store. This also affects `drawAsPath()`.\n\t *\n\t * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n\t * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n\t * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n\t *\n\t * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n\t * the fill or stroke.\n\t *\n\t * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n\t * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n\t * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n\t *\n\t * \t// set up cache:\n\t * \tmyShape.cache(0,0,500,500,scale);\n\t *\n\t * \t// when the user drags, draw a new line:\n\t * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n\t * \t// then draw it into the existing cache:\n\t * \tmyShape.updateCache(\"source-over\");\n\t * \t// store the new line, so it isn't redrawn next time:\n\t * \tmyShape.store();\n\t *\n\t * \t// then, when the window resizes, we can re-render at a different scale:\n\t * \t// first, unstore all our lines:\n\t * \tmyShape.unstore();\n\t * \t// then cache using the new scale:\n\t * \tmyShape.cache(0,0,500,500,newScale);\n\t * \t// finally, store the existing commands again:\n\t * \tmyShape.store();\n\t *\n\t * @method store\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.store = function() {\n\t\tthis._updateInstructions(true);\n\t\tthis._storeIndex = this._instructions.length;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n\t * so that they will be executed in subsequent draw calls.\n\t *\n\t * @method unstore\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.unstore = function() {\n\t\tthis._storeIndex = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n\t * @method clone\n\t * @return {Graphics} A clone of the current Graphics instance.\n\t **/\n\tp.clone = function() {\n\t\tvar o = new Graphics();\n\t\to.command = this.command;\n\t\to._stroke = this._stroke;\n\t\to._strokeStyle = this._strokeStyle;\n\t\to._strokeDash = this._strokeDash;\n\t\to._strokeIgnoreScale = this._strokeIgnoreScale;\n\t\to._fill = this._fill;\n\t\to._instructions = this._instructions.slice();\n\t\to._commitIndex = this._commitIndex;\n\t\to._activeInstructions = this._activeInstructions.slice();\n\t\to._dirty = this._dirty;\n\t\to._storeIndex = this._storeIndex;\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Graphics]\";\n\t};\n\n\n// tiny API:\n\t/**\n\t * Shortcut to moveTo.\n\t * @method mt\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t * @protected\n\t **/\n\tp.mt = p.moveTo;\n\n\t/**\n\t * Shortcut to lineTo.\n\t * @method lt\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lt = p.lineTo;\n\n\t/**\n\t * Shortcut to arcTo.\n\t * @method at\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.at = p.arcTo;\n\n\t/**\n\t * Shortcut to bezierCurveTo.\n\t * @method bt\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bt = p.bezierCurveTo;\n\n\t/**\n\t * Shortcut to quadraticCurveTo / curveTo.\n\t * @method qt\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t * @chainable\n\t **/\n\tp.qt = p.quadraticCurveTo;\n\n\t/**\n\t * Shortcut to arc.\n\t * @method a\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @protected\n\t * @chainable\n\t **/\n\tp.a = p.arc;\n\n\t/**\n\t * Shortcut to rect.\n\t * @method r\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.r = p.rect;\n\n\t/**\n\t * Shortcut to closePath.\n\t * @method cp\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.cp = p.closePath;\n\n\t/**\n\t * Shortcut to clear.\n\t * @method c\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.c = p.clear;\n\n\t/**\n\t * Shortcut to beginFill.\n\t * @method f\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.f = p.beginFill;\n\n\t/**\n\t * Shortcut to beginLinearGradientFill.\n\t * @method lf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lf = p.beginLinearGradientFill;\n\n\t/**\n\t * Shortcut to beginRadialGradientFill.\n\t * @method rf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rf = p.beginRadialGradientFill;\n\n\t/**\n\t * Shortcut to beginBitmapFill.\n\t * @method bf\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bf = p.beginBitmapFill;\n\n\t/**\n\t * Shortcut to endFill.\n\t * @method ef\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ef = p.endFill;\n\n\t/**\n\t * Shortcut to setStrokeStyle.\n\t * @method ss\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ss = p.setStrokeStyle;\n\t\n\t/**\n\t * Shortcut to setStrokeDash.\n\t * @method sd\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear any existing dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.sd = p.setStrokeDash;\n\n\t/**\n\t * Shortcut to beginStroke.\n\t * @method s\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.s = p.beginStroke;\n\n\t/**\n\t * Shortcut to beginLinearGradientStroke.\n\t * @method ls\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ls = p.beginLinearGradientStroke;\n\n\t/**\n\t * Shortcut to beginRadialGradientStroke.\n\t * @method rs\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rs = p.beginRadialGradientStroke;\n\n\t/**\n\t * Shortcut to beginBitmapStroke.\n\t * @method bs\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bs = p.beginBitmapStroke;\n\n\t/**\n\t * Shortcut to endStroke.\n\t * @method es\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.es = p.endStroke;\n\n\t/**\n\t * Shortcut to drawRect.\n\t * @method dr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dr = p.drawRect;\n\n\t/**\n\t * Shortcut to drawRoundRect.\n\t * @method rr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rr = p.drawRoundRect;\n\n\t/**\n\t * Shortcut to drawRoundRectComplex.\n\t * @method rc\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rc = p.drawRoundRectComplex;\n\n\t/**\n\t * Shortcut to drawCircle.\n\t * @method dc\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dc = p.drawCircle;\n\n\t/**\n\t * Shortcut to drawEllipse.\n\t * @method de\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.de = p.drawEllipse;\n\n\t/**\n\t * Shortcut to drawPolyStar.\n\t * @method dp\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dp = p.drawPolyStar;\n\n\t/**\n\t * Shortcut to decodePath.\n\t * @method p\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.p = p.decodePath;\n\n\n// private methods:\n\t/**\n\t * @method _updateInstructions\n\t * @param commit\n\t * @protected\n\t **/\n\tp._updateInstructions = function(commit) {\n\t\tvar instr = this._instructions, active = this._activeInstructions, commitIndex = this._commitIndex;\n\n\t\tif (this._dirty && active.length) {\n\t\t\tinstr.length = commitIndex; // remove old, uncommitted commands\n\t\t\tinstr.push(Graphics.beginCmd);\n\n\t\t\tvar l = active.length, ll = instr.length;\n\t\t\tinstr.length = ll+l;\n\t\t\tfor (var i=0; i<l; i++) { instr[i+ll] = active[i]; }\n\n\t\t\tif (this._fill) { instr.push(this._fill); }\n\t\t\tif (this._stroke) {\n\t\t\t\t// doesn't need to be re-applied if it hasn't changed.\n\t\t\t\tif (this._strokeDash !== this._oldStrokeDash) {\n\t\t\t\t\tthis._oldStrokeDash = this._strokeDash;\n\t\t\t\t\tinstr.push(this._strokeDash);\n\t\t\t\t}\n\t\t\t\tif (this._strokeStyle !== this._oldStrokeStyle) {\n\t\t\t\t\tthis._oldStrokeStyle = this._strokeStyle;\n\t\t\t\t\tinstr.push(this._strokeStyle);\n\t\t\t\t}\n\t\t\t\tinstr.push(this._stroke);\n\t\t\t}\n\n\t\t\tthis._dirty = false;\n\t\t}\n\n\t\tif (commit) {\n\t\t\tactive.length = 0;\n\t\t\tthis._commitIndex = instr.length;\n\t\t}\n\t};\n\n\t/**\n\t * @method _setFill\n\t * @param fill\n\t * @protected\n\t **/\n\tp._setFill = function(fill) {\n\t\tthis._updateInstructions(true);\n\t\tthis.command = this._fill = fill;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _setStroke\n\t * @param stroke\n\t * @protected\n\t **/\n\tp._setStroke = function(stroke) {\n\t\tthis._updateInstructions(true);\n\t\tif (this.command = this._stroke = stroke) {\n\t\t\tstroke.ignoreScale = this._strokeIgnoreScale;\n\t\t}\n\t\treturn this;\n\t};\n\n// Command Objects:\n\t/**\n\t * @namespace Graphics\n\t */\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class LineTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.LineTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.lineTo(this.x,this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class MoveTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx\n\t */\n\t(G.MoveTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.moveTo(this.x, this.y); };\n\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ArcTo\n\t * @constructor\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x1\n\t * @type Number\n\t */\n\t/**\n\t * @property y1\n\t * @type Number\n\t */\n\t/**\n\t * @property x2\n\t * @type Number\n\t */\n\t/**\n\t * @property y2\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ArcTo = function(x1, y1, x2, y2, radius) {\n\t\tthis.x1 = x1; this.y1 = y1;\n\t\tthis.x2 = x2; this.y2 = y2;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Arc\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle\n\t * @param {Number} endAngle\n\t * @param {Number} anticlockwise\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property startAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property endAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property anticlockwise\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.startAngle = startAngle; this.endAngle = endAngle;\n\t\tthis.anticlockwise = !!anticlockwise;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class QuadraticCurveTo\n\t * @constructor\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cpx\n\t * @type Number\n\t */\n\t/**\n\t * @property cpy\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.QuadraticCurveTo = function(cpx, cpy, x, y) {\n\t\tthis.cpx = cpx; this.cpy = cpy;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BezierCurveTo\n\t * @constructor\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cp1x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp1y\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2y\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\tthis.cp1x = cp1x; this.cp1y = cp1y;\n\t\tthis.cp2x = cp2x; this.cp2y = cp2y;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Rect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Rect = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) { ctx.rect(this.x, this.y, this.w, this.h); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ClosePath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ClosePath = function() {\n\t}).prototype.exec = function(ctx) { ctx.closePath(); };\n\n\t/**\n\t * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BeginPath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BeginPath = function() {\n\t}).prototype.exec = function(ctx) { ctx.beginPath(); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Fill\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Matrix2D} matrix\n\t **/\n\t/**\n\t * A valid Context2D fillStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property matrix\n\t * @type Matrix2D\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Fill = function(style, matrix) {\n\t\tthis.style = style;\n\t\tthis.matrix = matrix;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.fillStyle = this.style;\n\t\tvar mtx = this.matrix;\n\t\tif (mtx) { ctx.save(); ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty); }\n\t\tctx.fill();\n\t\tif (mtx) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t *\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.linearGradient = function(colors, ratios, x0, y0, x1, y1) {\n\t\tvar o = this.style =  Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, x1:x1, y1:y1, type:\"linear\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.radialGradient = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\tvar o = this.style =  Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, r0:r0, x1:x1, y1:y1, r1:r1, type:\"radial\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.bitmap = function(image, repetition) {\n\t\tif (image.naturalWidth || image.getContext || image.readyState >= 2) {\n\t\t\tvar o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n\t\t\to.props = {image: image, repetition: repetition, type: \"bitmap\"};\n\t\t}\n\t\treturn this;\n\t};\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Stroke\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Boolean} ignoreScale\n\t **/\n\t/**\n\t * A valid Context2D strokeStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property ignoreScale\n\t * @type Boolean\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Stroke = function(style, ignoreScale) {\n\t\tthis.style = style;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.strokeStyle = this.style;\n\t\tif (this.ignoreScale) { ctx.save(); ctx.setTransform(1,0,0,1,0,0); }\n\t\tctx.stroke();\n\t\tif (this.ignoreScale) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.linearGradient = G.Fill.prototype.linearGradient;\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.radialGradient = G.Fill.prototype.radialGradient;\n\t/**\n\t * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement} image\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.bitmap = G.Fill.prototype.bitmap;\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeStyle\n\t * @constructor\n\t * @param {Number} width\n\t * @param {String} [caps=butt]\n\t * @param {String} [joints=miter]\n\t * @param {Number} [miterLimit=10]\n\t * @param {Boolean} [ignoreScale=false]\n\t **/\n\t/**\n\t * @property width\n\t * @type Number\n\t */\n\t/**\n\t * One of: butt, round, square\n\t * @property caps\n\t * @type String\n\t */\n\t/**\n\t * One of: round, bevel, miter\n\t * @property joints\n\t * @type String\n\t */\n\t/**\n\t * @property miterLimit\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.StrokeStyle = function(width, caps, joints, miterLimit, ignoreScale) {\n\t\tthis.width = width;\n\t\tthis.caps = caps;\n\t\tthis.joints = joints;\n\t\tthis.miterLimit = miterLimit;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tctx.lineWidth = (this.width == null ? \"1\" : this.width);\n\t\tctx.lineCap = (this.caps == null ? \"butt\" : (isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps]));\n\t\tctx.lineJoin = (this.joints == null ? \"miter\" : (isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints]));\n\t\tctx.miterLimit = (this.miterLimit == null ? \"10\" : this.miterLimit);\n\t\tctx.ignoreScale = (this.ignoreScale == null ? false : this.ignoreScale);\n\t};\n\tp.path = false;\n\t\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeDash\n\t * @constructor\n\t * @param {Array} [segments]\n\t * @param {Number} [offset=0]\n\t **/\n\t/**\n\t * @property segments\n\t * @type Array\n\t */\n\t/**\n\t * @property offset\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.StrokeDash = function(segments, offset) {\n\t\tthis.segments = segments;\n\t\tthis.offset = offset||0;\n\t}).prototype.exec = function(ctx) {\n\t\tif (ctx.setLineDash) { // feature detection.\n\t\t\tctx.setLineDash(this.segments|| G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n\t\t\tctx.lineDashOffset = this.offset||0;\n\t\t}\n\t};\n\t/**\n\t * The default value for segments (ie. no dash).\n\t * @property EMPTY_SEGMENTS\n\t * @static\n\t * @final\n\t * @readonly\n\t * @protected\n\t * @type {Array}\n\t **/\n\tG.StrokeDash.EMPTY_SEGMENTS = [];\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class RoundRect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radiusTL\n\t * @param {Number} radiusTR\n\t * @param {Number} radiusBR\n\t * @param {Number} radiusBL\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTL\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBL\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.RoundRect = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t\tthis.radiusTL = radiusTL; this.radiusTR = radiusTR;\n\t\tthis.radiusBR = radiusBR; this.radiusBL = radiusBL;\n\t}).prototype.exec = function(ctx) {\n\t\tvar max = (w<h?w:h)/2;\n\t\tvar mTL=0, mTR=0, mBR=0, mBL=0;\n\t\tvar x = this.x, y = this.y, w = this.w, h = this.h;\n\t\tvar rTL = this.radiusTL, rTR = this.radiusTR, rBR = this.radiusBR, rBL = this.radiusBL;\n\n\t\tif (rTL < 0) { rTL *= (mTL=-1); }\n\t\tif (rTL > max) { rTL = max; }\n\t\tif (rTR < 0) { rTR *= (mTR=-1); }\n\t\tif (rTR > max) { rTR = max; }\n\t\tif (rBR < 0) { rBR *= (mBR=-1); }\n\t\tif (rBR > max) { rBR = max; }\n\t\tif (rBL < 0) { rBL *= (mBL=-1); }\n\t\tif (rBL > max) { rBL = max; }\n\n\t\tctx.moveTo(x+w-rTR, y);\n\t\tctx.arcTo(x+w+rTR*mTR, y-rTR*mTR, x+w, y+rTR, rTR);\n\t\tctx.lineTo(x+w, y+h-rBR);\n\t\tctx.arcTo(x+w+rBR*mBR, y+h+rBR*mBR, x+w-rBR, y+h, rBR);\n\t\tctx.lineTo(x+rBL, y+h);\n\t\tctx.arcTo(x-rBL*mBL, y+h+rBL*mBL, x, y+h-rBL, rBL);\n\t\tctx.lineTo(x, y+rTL);\n\t\tctx.arcTo(x-rTL*mTL, y-rTL*mTL, x+rTL, y, rTL);\n\t\tctx.closePath();\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Circle\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Circle = function(x, y, radius) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Ellipse\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Ellipse = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar w = this.w, h = this.h;\n\n\t\tvar k = 0.5522848;\n\t\tvar ox = (w / 2) * k;\n\t\tvar oy = (h / 2) * k;\n\t\tvar xe = x + w;\n\t\tvar ye = y + h;\n\t\tvar xm = x + w / 2;\n\t\tvar ym = y + h / 2;\n\n\t\tctx.moveTo(x, ym);\n\t\tctx.bezierCurveTo(x, ym-oy, xm-ox, y, xm, y);\n\t\tctx.bezierCurveTo(xm+ox, y, xe, ym-oy, xe, ym);\n\t\tctx.bezierCurveTo(xe, ym+oy, xm+ox, ye, xm, ye);\n\t\tctx.bezierCurveTo(xm-ox, ye, x, ym+oy, x, ym);\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class PolyStar\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} sides\n\t * @param {Number} pointSize\n\t * @param {Number} angle\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property sides\n\t * @type Number\n\t */\n\t/**\n\t * @property pointSize\n\t * @type Number\n\t */\n\t/**\n\t * @property angle\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.PolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.sides = sides;\n\t\tthis.pointSize = pointSize;\n\t\tthis.angle = angle;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar radius = this.radius;\n\t\tvar angle = (this.angle||0)/180*Math.PI;\n\t\tvar sides = this.sides;\n\t\tvar ps = 1-(this.pointSize||0);\n\t\tvar a = Math.PI/sides;\n\n\t\tctx.moveTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\tfor (var i=0; i<sides; i++) {\n\t\t\tangle += a;\n\t\t\tif (ps != 1) {\n\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius*ps, y+Math.sin(angle)*radius*ps);\n\t\t\t}\n\t\t\tangle += a;\n\t\t\tctx.lineTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\t}\n\t\tctx.closePath();\n\t};\n\n\t// docced above.\n\tGraphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n\n\tcreatejs.Graphics = Graphics;\n}());\n\n//##############################################################################\n// DisplayObject.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\n\t * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\n\t * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\n\t * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\n\t * caching, and mouse handlers.\n\t * @class DisplayObject\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction DisplayObject() {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\n\t\t * @property alpha\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.alpha = 1;\n\t\n\t\t/**\n\t\t * If a cache is active, this returns the canvas that holds the cached version of this display object. See {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t * for more information.\n\t\t * @property cacheCanvas\n\t\t * @type {HTMLCanvasElement | Object}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.cacheCanvas = null;\n\t\n\t\t/**\n\t\t * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\n\t\t * determine if the cache has changed since a previous check.\n\t\t * @property cacheID\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.cacheID = 0;\n\t\n\t\t/**\n\t\t * Unique ID for this display object. Makes display objects easier for some uses.\n\t\t * @property id\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t **/\n\t\tthis.id = createjs.UID.get();\n\t\n\t\t/**\n\t\t * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\n\t\t * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\n\t\t * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\n\t\t * method from returning the child.\n\t\t *\n\t\t * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\n\t\t * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\n\t\t * provided in the next release of EaselJS.\n\t\t * @property mouseEnabled\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.mouseEnabled = true;\n\t\t\n\t\t/**\n\t\t * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t * @property tickEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickEnabled = true;\n\t\n\t\t/**\n\t\t * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\n\t\t * debugging.\n\t\t * @property name\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis.name = null;\n\t\n\t\t/**\n\t\t * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\n\t\t * contains this display object, or null if it has not been added\n\t\t * to one.\n\t\t * @property parent\n\t\t * @final\n\t\t * @type {Container}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.parent = null;\n\t\n\t\t/**\n\t\t * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\n\t\t * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\n\t\t * @property regX\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.regX = 0;\n\t\n\t\t/**\n\t\t * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\n\t\t * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\n\t\t * @property regY\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.regY = 0;\n\t\n\t\t/**\n\t\t * The rotation in degrees for this display object.\n\t\t * @property rotation\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.rotation = 0;\n\t\n\t\t/**\n\t\t * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\n\t\t * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\n\t\t * @property scaleX\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scaleX = 1;\n\t\n\t\t/**\n\t\t * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\n\t\t * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\n\t\t * @property scaleY\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scaleY = 1;\n\t\n\t\t/**\n\t\t * The factor to skew this display object horizontally.\n\t\t * @property skewX\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.skewX = 0;\n\t\n\t\t/**\n\t\t * The factor to skew this display object vertically.\n\t\t * @property skewY\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.skewY = 0;\n\t\n\t\t/**\n\t\t * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\n\t\t * null, this property is inherited from the parent container.\n\t\t * @property shadow\n\t\t * @type {Shadow}\n\t\t * @default null\n\t\t **/\n\t\tthis.shadow = null;\n\t\n\t\t/**\n\t\t * Indicates whether this display object should be rendered to the canvas and included when running the Stage\n\t\t * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\n\t\t * @property visible\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.visible = true;\n\t\n\t\t/**\n\t\t * The x (horizontal) position of the display object, relative to its parent.\n\t\t * @property x\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.x = 0;\n\t\n\t\t/** The y (vertical) position of the display object, relative to its parent.\n\t\t * @property y\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.y = 0;\n\t\t\n\t\t/**\n\t\t * If set, defines the transformation for this display object, overriding all other transformation properties\n\t\t * (x, y, rotation, scale, skew).\n\t\t * @property transformMatrix\n\t\t * @type {Matrix2D}\n\t\t * @default null\n\t\t **/\n\t\tthis.transformMatrix = null;\n\t\t\n\t\t/**\n\t\t * The composite operation indicates how the pixels of this display object will be composited with the elements\n\t\t * behind it. If `null`, this property is inherited from the parent container. For more information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n\t\t * whatwg spec on compositing</a>.\n\t\t * @property compositeOperation\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis.compositeOperation = null;\n\t\n\t\t/**\n\t\t * Indicates whether the display object should be drawn to a whole pixel when\n\t\t * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\n\t\t * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\n\t\t * @property snapToPixel\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.snapToPixel = true;\n\t\n\t\t/**\n\t\t * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\n\t\t * cached.\n\t\t * @property filters\n\t\t * @type {Array}\n\t\t * @default null\n\t\t **/\n\t\tthis.filters = null;\n\t\t\n\t\t/**\n\t\t * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\n\t\t * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\n\t\t * @property mask\n\t\t * @type {Shape}\n\t\t * @default null\n\t\t */\n\t\tthis.mask = null;\n\t\t\n\t\t/**\n\t\t * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\n\t\t * The hit area will have its transformation applied relative to this display object's coordinate space (as though\n\t\t * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\n\t\t * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\n\t\t * ancestors (parents).\n\t\t * \n\t\t * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\n\t\t * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\n\t\t *\n\t\t * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\tthis.hitArea = null;\n\t\t\n\t\t/**\n\t\t * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\n\t\t * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\n\t\t * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\n\t\t * @property cursor\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.cursor = null;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _cacheOffsetX\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._cacheOffsetX = 0;\n\t\n\t\t/**\n\t\t * @property _cacheOffsetY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._cacheOffsetY = 0;\n\t\t\n\t\t/**\n\t\t * @property _filterOffsetX\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffsetX = 0;\n\t\t\n\t\t/**\n\t\t * @property _filterOffsetY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffsetY = 0;\n\t\t\n\t\t/**\n\t\t * @property _cacheScale\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis._cacheScale = 1;\n\t\n\t\t/**\n\t\t* @property _cacheDataURLID\n\t\t* @protected\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t*/\n\t\tthis._cacheDataURLID = 0;\n\t\t\n\t\t/**\n\t\t* @property _cacheDataURL\n\t\t* @protected\n\t\t* @type {String}\n\t\t* @default null\n\t\t*/\n\t\tthis._cacheDataURL = null;\n\t\n\t\t/**\n\t\t * @property _props\n\t\t * @protected\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t **/\n\t\tthis._props = new createjs.DisplayProps();\n\t\n\t\t/**\n\t\t * @property _rectangle\n\t\t * @protected\n\t\t * @type {Rectangle}\n\t\t * @default null\n\t\t **/\n\t\tthis._rectangle = new createjs.Rectangle();\n\t\n\t\t/**\n\t\t * @property _bounds\n\t\t * @protected\n\t\t * @type {Rectangle}\n\t\t * @default null\n\t\t **/\n\t\tthis._bounds = null;\n\t}\n\tvar p = createjs.extend(DisplayObject, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n// static properties:\n\t/**\n\t * Listing of mouse event names. Used in _hasMouseEventListener.\n\t * @property _MOUSE_EVENTS\n\t * @protected\n\t * @static\n\t * @type {Array}\n\t **/\n\tDisplayObject._MOUSE_EVENTS = [\"click\",\"dblclick\",\"mousedown\",\"mouseout\",\"mouseover\",\"pressmove\",\"pressup\",\"rollout\",\"rollover\"];\n\n\t/**\n\t * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\n\t * with cross domain content.\n\t * @property suppressCrossDomainErrors\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tDisplayObject.suppressCrossDomainErrors = false;\n\t\n\t/**\n\t * @property _snapToPixelEnabled\n\t * @protected\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tDisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\n\n\t/**\n\t * @property _hitTestCanvas\n\t * @type {HTMLCanvasElement | Object}\n\t * @static\n\t * @protected\n\t **/\n\t/**\n\t * @property _hitTestContext\n\t * @type {CanvasRenderingContext2D}\n\t * @static\n\t * @protected\n\t **/\n\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\n\tif (canvas.getContext) {\n\t\tDisplayObject._hitTestCanvas = canvas;\n\t\tDisplayObject._hitTestContext = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\t/**\n\t * @property _nextCacheID\n\t * @type {Number}\n\t * @static\n\t * @protected\n\t **/\n\tDisplayObject._nextCacheID = 1;\n\n\n// events:\n\t/**\n\t * Dispatched when the user presses their left mouse button over the display object. See the \n\t * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mousedown\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched when the user presses their left mouse button and then releases it while over the display object.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event click\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched when the user double clicks their left mouse button over this display object.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event dblclick\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched when the user's mouse enters this display object. This event must be enabled using \n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mouseover\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user's mouse leaves this display object. This event must be enabled using \n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mouseout\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t * aggregate of their content.\n\t * \n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\n\t * myContainer, two events would be received, each targeting a child element:<OL>\n\t * <LI>when the mouse enters shapeA (target=shapeA)</LI>\n\t * <LI>when the mouse enters shapeB (target=shapeB)</LI>\n\t * </OL>\n\t * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\n\t * the aggregate myContainer content (target=myContainer).\n\t * \n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event rollover\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t * aggregate of their content.\n\t * \n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\n\t * on myContainer, two events would be received, each targeting a child element:<OL>\n\t * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\n\t * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\n\t * </OL>\n\t * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\n\t * the aggregate myContainer content (target=myContainer).\n\t * \n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event rollout\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\n\t * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\n\t * useful for dragging and similar operations.\n\t * @event pressmove\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\n\t * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\n\t * operations.\n\t * @event pressup\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched when the display object is added to a parent container.\n\t * @event added\n\t */\n\t \n\t/**\n\t * Dispatched when the display object is removed from its parent container.\n\t * @event removed\n\t */\n\t \n\t/**\n\t * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\n\t * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\n\t * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\n\t * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\n\t * dispatched on their parent.\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\n\t *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\n\t * @since 0.6.0\n\t */\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\n\t * @method getStage\n\t * @return {Stage}\n\t * @deprecated\n\t **/\n\tp.getStage = function() {\n\t\t// uses dynamic access to avoid circular dependencies;\n\t\tvar o = this, _Stage = createjs[\"Stage\"];\n\t\twhile (o.parent) { o = o.parent; }\n\t\tif (o instanceof _Stage) { return o; }\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\n\t * @property stage\n\t * @type {Stage}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tstage: { get: p.getStage }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (ignoreCache || !cacheCanvas) { return false; }\n\t\tvar scale = this._cacheScale;\n\t\tctx.drawImage(cacheCanvas, this._cacheOffsetX+this._filterOffsetX, this._cacheOffsetY+this._filterOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\n\t * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\n\t * @method updateContext\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\n\t **/\n\tp.updateContext = function(ctx) {\n\t\tvar o=this, mask=o.mask, mtx= o._props.matrix;\n\t\t\n\t\tif (mask && mask.graphics && !mask.graphics.isEmpty()) {\n\t\t\tmask.getMatrix(mtx);\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t\t\n\t\t\tmask.graphics.drawAsPath(ctx);\n\t\t\tctx.clip();\n\t\t\t\n\t\t\tmtx.invert();\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t}\n\t\t\n\t\tthis.getMatrix(mtx);\n\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\tif (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\n\t\t\ttx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\n\t\t\tty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\n\t\t}\n\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, tx, ty);\n\t\tctx.globalAlpha *= o.alpha;\n\t\tif (o.compositeOperation) { ctx.globalCompositeOperation = o.compositeOperation; }\n\t\tif (o.shadow) { this._applyShadow(ctx, o.shadow); }\n\t};\n\n\t/**\n\t * Draws the display object into a new canvas, which is then used for subsequent draws. For complex content\n\t * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\n\t * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\n\t * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must\n\t * manually update the cache by calling <code>updateCache()</code> or <code>cache()</code> again. You must specify\n\t * the cache area via the x, y, w, and h parameters. This defines the rectangle that will be rendered and cached\n\t * using this display object's coordinates.\n\t *\n\t * <h4>Example</h4>\n\t * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\n\t *\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t *      myShape.cache(-25, -25, 50, 50);\n\t *\n\t * Note that filters need to be defined <em>before</em> the cache is applied. Check out the {{#crossLink \"Filter\"}}{{/crossLink}}\n\t * class for more information. Some filters (ex. BlurFilter) will not work as expected in conjunction with the scale param.\n\t * \n\t * Usually, the resulting cacheCanvas will have the dimensions width*scale by height*scale, however some filters (ex. BlurFilter)\n\t * will add padding to the canvas dimensions.\n\t *\n\t * @method cache\n\t * @param {Number} x The x coordinate origin for the cache region.\n\t * @param {Number} y The y coordinate origin for the cache region.\n\t * @param {Number} width The width of the cache region.\n\t * @param {Number} height The height of the cache region.\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\n\t * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\n\t * \tcached elements with greater fidelity. Default is 1.\n\t **/\n\tp.cache = function(x, y, width, height, scale) {\n\t\t// draw to canvas.\n\t\tscale = scale||1;\n\t\tif (!this.cacheCanvas) { this.cacheCanvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\n\t\tthis._cacheWidth = width;\n\t\tthis._cacheHeight = height;\n\t\tthis._cacheOffsetX = x;\n\t\tthis._cacheOffsetY = y;\n\t\tthis._cacheScale = scale;\n\t\tthis.updateCache();\n\t};\n\n\t/**\n\t * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\n\t * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\n\t * will be drawn over the existing cache using the specified compositeOperation.\n\t *\n\t * <h4>Example</h4>\n\t * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\n\t * will be drawn on top of the old one.\n\t *\n\t *      // Not shown: Creating the shape, and caching it.\n\t *      shapeInstance.clear();\n\t *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\n\t *      shapeInstance.updateCache();\n\t *\n\t * @method updateCache\n\t * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n\t * whatwg spec on compositing</a>.\n\t **/\n\tp.updateCache = function(compositeOperation) {\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (!cacheCanvas) { throw \"cache() must be called before updateCache()\"; }\n\t\tvar scale = this._cacheScale, offX = this._cacheOffsetX*scale, offY = this._cacheOffsetY*scale;\n\t\tvar w = this._cacheWidth, h = this._cacheHeight, ctx = cacheCanvas.getContext(\"2d\");\n\t\t\n\t\tvar fBounds = this._getFilterBounds();\n\t\toffX += (this._filterOffsetX = fBounds.x);\n\t\toffY += (this._filterOffsetY = fBounds.y);\n\t\t\n\t\tw = Math.ceil(w*scale) + fBounds.width;\n\t\th = Math.ceil(h*scale) + fBounds.height;\n\t\tif (w != cacheCanvas.width || h != cacheCanvas.height) {\n\t\t\t// TODO: it would be nice to preserve the content if there is a compositeOperation.\n\t\t\tcacheCanvas.width = w;\n\t\t\tcacheCanvas.height = h;\n\t\t} else if (!compositeOperation) {\n\t\t\tctx.clearRect(0, 0, w+1, h+1);\n\t\t}\n\t\t\n\t\tctx.save();\n\t\tctx.globalCompositeOperation = compositeOperation;\n\t\tctx.setTransform(scale, 0, 0, scale, -offX, -offY);\n\t\tthis.draw(ctx, true);\n\t\t// TODO: filters and cache scale don't play well together at present.\n\t\tthis._applyFilters();\n\t\tctx.restore();\n\t\tthis.cacheID = DisplayObject._nextCacheID++;\n\t};\n\n\t/**\n\t * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\n\t * @method uncache\n\t **/\n\tp.uncache = function() {\n\t\tthis._cacheDataURL = this.cacheCanvas = null;\n\t\tthis.cacheID = this._cacheOffsetX = this._cacheOffsetY = this._filterOffsetX = this._filterOffsetY = 0;\n\t\tthis._cacheScale = 1;\n\t};\n\t\n\t/**\n\t * Returns a data URL for the cache, or null if this display object is not cached.\n\t * Uses cacheID to ensure a new data URL is not generated if the cache has not changed.\n\t * @method getCacheDataURL\n\t * @return {String} The image data url for the cache.\n\t **/\n\tp.getCacheDataURL = function() {\n\t\tif (!this.cacheCanvas) { return null; }\n\t\tif (this.cacheID != this._cacheDataURLID) { this._cacheDataURL = this.cacheCanvas.toDataURL(); }\n\t\treturn this._cacheDataURL;\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the coordinate space of the display object\n\t * to the global (stage) coordinate space. For example, this could be used to position an HTML label\n\t * over a specific point on a nested display object. Returns a Point instance with x and y properties\n\t * correlating to the transformed coordinates on the stage.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.x = 300;\n\t *      displayObject.y = 200;\n\t *      stage.addChild(displayObject);\n\t *      var point = displayObject.localToGlobal(100, 100);\n\t *      // Results in x=400, y=300\n\t *\n\t * @method localToGlobal\n\t * @param {Number} x The x position in the source display object to transform.\n\t * @param {Number} y The y position in the source display object to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\n\t * on the stage.\n\t **/\n\tp.localToGlobal = function(x, y, pt) {\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).transformPoint(x,y, pt||new createjs.Point());\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the global (stage) coordinate space to the\n\t * coordinate space of the display object. For example, this could be used to determine\n\t * the current mouse position within the display object. Returns a Point instance with x and y properties\n\t * correlating to the transformed position in the display object's coordinate space.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.x = 300;\n\t *      displayObject.y = 200;\n\t *      stage.addChild(displayObject);\n\t *      var point = displayObject.globalToLocal(100, 100);\n\t *      // Results in x=-200, y=-100\n\t *\n\t * @method globalToLocal\n\t * @param {Number} x The x position on the stage to transform.\n\t * @param {Number} y The y position on the stage to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\n\t * display object's coordinate space.\n\t **/\n\tp.globalToLocal = function(x, y, pt) {\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x,y, pt||new createjs.Point());\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\n\t * space of the target display object. Returns a Point instance with x and y properties correlating to the\n\t * transformed position in the target's coordinate space. Effectively the same as using the following code with\n\t * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t *\n\t *      var pt = this.localToGlobal(x, y);\n\t *      pt = target.globalToLocal(pt.x, pt.y);\n\t *\n\t * @method localToLocal\n\t * @param {Number} x The x position in the source display object to transform.\n\t * @param {Number} y The y position on the source display object to transform.\n\t * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\n\t * in the target's coordinate space.\n\t **/\n\tp.localToLocal = function(x, y, target, pt) {\n\t\tpt = this.localToGlobal(x, y, pt);\n\t\treturn target.globalToLocal(pt.x, pt.y, pt);\n\t};\n\n\t/**\n\t * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\n\t * Omitted parameters will have the default value set.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.setTransform(100, 100, 2, 2);\n\t *\n\t * @method setTransform\n\t * @param {Number} [x=0] The horizontal translation (x position) in pixels\n\t * @param {Number} [y=0] The vertical translation (y position) in pixels\n\t * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\n\t * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\n\t * @param {Number} [rotation=0] The rotation, in degrees\n\t * @param {Number} [skewX=0] The horizontal skew factor\n\t * @param {Number} [skewY=0] The vertical skew factor\n\t * @param {Number} [regX=0] The horizontal registration point in pixels\n\t * @param {Number} [regY=0] The vertical registration point in pixels\n\t * @return {DisplayObject} Returns this instance. Useful for chaining commands.\n\t * @chainable\n\t*/\n\tp.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.scaleX = scaleX == null ? 1 : scaleX;\n\t\tthis.scaleY = scaleY == null ? 1 : scaleY;\n\t\tthis.rotation = rotation || 0;\n\t\tthis.skewX = skewX || 0;\n\t\tthis.skewY = skewY || 0;\n\t\tthis.regX = regX || 0;\n\t\tthis.regY = regY || 0;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a matrix based on this object's current transform.\n\t * @method getMatrix\n\t * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\n\t * Matrix object is returned.\n\t * @return {Matrix2D} A matrix representing this display object's transform.\n\t **/\n\tp.getMatrix = function(matrix) {\n\t\tvar o = this, mtx = matrix&&matrix.identity() || new createjs.Matrix2D();\n\t\treturn o.transformMatrix ?  mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t};\n\t\n\t/**\n\t * Generates a Matrix2D object representing the combined transform of the display object and all of its\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\n\t * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t * @method getConcatenatedMatrix\n\t * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\n\t * If null, a new Matrix2D object is returned.\n\t * @return {Matrix2D} The combined matrix.\n\t **/\n\tp.getConcatenatedMatrix = function(matrix) {\n\t\tvar o = this, mtx = this.getMatrix(matrix);\n\t\twhile (o = o.parent) {\n\t\t\tmtx.prependMatrix(o.getMatrix(o._props.matrix));\n\t\t}\n\t\treturn mtx;\n\t};\n\t\n\t/**\n\t * Generates a DisplayProps object representing the combined display properties of the  object and all of its\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\n\t * @method getConcatenatedDisplayProps\n\t * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\n\t * If null, a new DisplayProps object is returned.\n\t * @return {DisplayProps} The combined display properties.\n\t **/\n\tp.getConcatenatedDisplayProps = function(props) {\n\t\tprops = props ? props.identity() : new createjs.DisplayProps();\n\t\tvar o = this, mtx = o.getMatrix(props.matrix); \n\t\tdo {\n\t\t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\n\t\t\t\n\t\t\t// we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\n\t\t\t// this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\n\t\t\tif (o != this) { mtx.prependMatrix(o.getMatrix(o._props.matrix)); }\n\t\t} while (o = o.parent);\n\t\treturn props;\n\t};\n\n\t/**\n\t * Tests whether the display object intersects the specified point in <em>local</em> coordinates (ie. draws a pixel\n\t * with alpha > 0 at the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation\n\t * of the display object.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar myShape = new createjs.Shape();\n\t * \t\tmyShape.graphics.beginFill(\"red\").drawRect(100, 100, 20, 50);\n\t *\n\t * \t\tconsole.log(myShape.hitTest(10,10); // false\n\t * \t\tconsole.log(myShape.hitTest(110, 25); // true\n\t *\n\t * Note that to use Stage coordinates (such as {{#crossLink \"Stage/mouseX:property\"}}{{/crossLink}}), they must\n\t * first be converted to local coordinates:\n\t *\n\t *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\n\t *      function handleMouseDown(event) {\n\t *      \tvar p = myShape.globalToLocal(stage.mouseX, stage.mouseY);\n\t *          var hit = myShape.hitTest(p.x, p.y);\n\t *      }\n\t *\n\t * Shape-to-shape collision is not currently supported by EaselJS.\n\t *\n\t * @method hitTest\n\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\n\t * local Point.\n\t*/\n\tp.hitTest = function(x, y) {\n\t\tvar ctx = DisplayObject._hitTestContext;\n\t\tctx.setTransform(1, 0, 0, 1, -x, -y);\n\t\tthis.draw(ctx);\n\n\t\tvar hit = this._testHit(ctx);\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, 2, 2);\n\t\treturn hit;\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t *      var shape = stage.addChild(new createjs.Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\n\t * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\n\t * Objects that have been cached will return the bounds of the cache.\n\t * \n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t * bounds.\n\t * \n\t * <table>\n\t * \t<tr><td><b>All</b></td><td>\n\t * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\n\t * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\n\t * \t\tthe automatic calculations listed below.\n\t * \t</td></tr>\n\t * \t<tr><td><b>Bitmap</b></td><td>\n\t * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\n\t * \t</td></tr>\n\t * \t<tr><td><b>Sprite</b></td><td>\n\t * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\n\t * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\n\t * \t</td></tr>\n\t * \t<tr><td><b>Container</b></td><td>\n\t * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\n\t * \t</td></tr>\n\t * \t<tr><td><b>Shape</b></td><td>\n\t * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\n\t * \t</td></tr>\n\t * \t<tr><td><b>Text</b></td><td>\n\t * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\n\t * \t\tnot, especially when using textBaseline values other than \"top\".\n\t * \t</td></tr>\n\t * \t<tr><td><b>BitmapText</b></td><td>\n\t * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\n\t * \t\tto (x=0,y=0).\n\t * \t</td></tr>\n\t* </table>\n\t * \n\t * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\n\t * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\n\t * bounds explicitly:\n\t * \n\t * \tvar bounds = obj.getBounds();\n\t * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\n\t * \t// getBounds will now use the set values, instead of recalculating\n\t * \n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t * values if you need to retain it.\n\t * \n\t * \tvar myBounds = obj.getBounds().clone();\n\t * \t// OR:\n\t * \tmyRect.copy(obj.getBounds());\n\t * \n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\n\t * object.\n\t **/\n\tp.getBounds = function() {\n\t\tif (this._bounds) { return this._rectangle.copy(this._bounds); }\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (cacheCanvas) {\n\t\t\tvar scale = this._cacheScale;\n\t\t\treturn this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\t}\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\n\t * Objects that have been cached will return the transformed bounds of the cache.\n\t * \n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t * bounds.\n\t * \n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t * values if you need to retain it.\n\t * \n\t * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\n\t * @method getTransformedBounds\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\n\t **/\n\tp.getTransformedBounds = function() {\n\t\treturn this._getBounds();\n\t};\n\t\n\t/**\n\t * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\n\t * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\n\t * override calculated bounds.\n\t * \n\t * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\n\t * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\n\t * @method setBounds\n\t * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\n\t * @param {Number} y The y origin of the bounds.\n\t * @param {Number} width The width of the bounds.\n\t * @param {Number} height The height of the bounds.\n\t **/\n\tp.setBounds = function(x, y, width, height) {\n\t\tif (x == null) { this._bounds = x; }\n\t\tthis._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\n\t};\n\n\t/**\n\t * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\n\t * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\n\t * are copied by reference (masks, individual filter instances, hit area)\n\t * @method clone\n\t * @return {DisplayObject} A clone of the current DisplayObject instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new DisplayObject());\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[DisplayObject (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t// separated so it can be used more easily in subclasses:\n\t/**\n\t * @method _cloneProps\n\t * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\n\t * instance copied into.\n\t * @return {DisplayObject} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\to.alpha = this.alpha;\n\t\to.mouseEnabled = this.mouseEnabled;\n\t\to.tickEnabled = this.tickEnabled;\n\t\to.name = this.name;\n\t\to.regX = this.regX;\n\t\to.regY = this.regY;\n\t\to.rotation = this.rotation;\n\t\to.scaleX = this.scaleX;\n\t\to.scaleY = this.scaleY;\n\t\to.shadow = this.shadow;\n\t\to.skewX = this.skewX;\n\t\to.skewY = this.skewY;\n\t\to.visible = this.visible;\n\t\to.x  = this.x;\n\t\to.y = this.y;\n\t\to.compositeOperation = this.compositeOperation;\n\t\to.snapToPixel = this.snapToPixel;\n\t\to.filters = this.filters==null?null:this.filters.slice(0);\n\t\to.mask = this.mask;\n\t\to.hitArea = this.hitArea;\n\t\to.cursor = this.cursor;\n\t\to._bounds = this._bounds;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _applyShadow\n\t * @protected\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Shadow} shadow\n\t **/\n\tp._applyShadow = function(ctx, shadow) {\n\t\tshadow = shadow || Shadow.identity;\n\t\tctx.shadowColor = shadow.color;\n\t\tctx.shadowOffsetX = shadow.offsetX;\n\t\tctx.shadowOffsetY = shadow.offsetY;\n\t\tctx.shadowBlur = shadow.blur;\n\t};\n\t\n\t\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\t// because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\n\t\tvar ls = this._listeners;\n\t\tif (ls && ls[\"tick\"]) {\n\t\t\t// reset & reuse the event object to avoid construction / GC costs:\n\t\t\tevtObj.target = null;\n\t\t\tevtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\n\t\t\tthis.dispatchEvent(evtObj);\n\t\t}\n\t};\n\n\t/**\n\t * @method _testHit\n\t * @protected\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {Boolean}\n\t **/\n\tp._testHit = function(ctx) {\n\t\ttry {\n\t\t\tvar hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\n\t\t} catch (e) {\n\t\t\tif (!DisplayObject.suppressCrossDomainErrors) {\n\t\t\t\tthrow \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n\t\t\t}\n\t\t}\n\t\treturn hit;\n\t};\n\n\t/**\n\t * @method _applyFilters\n\t * @protected\n\t **/\n\tp._applyFilters = function() {\n\t\tif (!this.filters || this.filters.length == 0 || !this.cacheCanvas) { return; }\n\t\tvar l = this.filters.length;\n\t\tvar ctx = this.cacheCanvas.getContext(\"2d\");\n\t\tvar w = this.cacheCanvas.width;\n\t\tvar h = this.cacheCanvas.height;\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tthis.filters[i].applyFilter(ctx, 0, 0, w, h);\n\t\t}\n\t};\n\t\n\t/**\n\t * @method _getFilterBounds\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getFilterBounds = function(rect) {\n\t\tvar l, filters = this.filters, bounds = this._rectangle.setValues(0,0,0,0);\n\t\tif (!filters || !(l=filters.length)) { return bounds; }\n\t\t\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tvar f = this.filters[i];\n\t\t\tf.getBounds&&f.getBounds(bounds);\n\t\t}\n\t\treturn bounds;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform){\n\t\treturn this._transformBounds(this.getBounds(), matrix, ignoreTransform);\n\t};\n\t\n\t/**\n\t * @method _transformBounds\n\t * @param {Rectangle} bounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._transformBounds = function(bounds, matrix, ignoreTransform) {\n\t\tif (!bounds) { return bounds; }\n\t\tvar x = bounds.x, y = bounds.y, width = bounds.width, height = bounds.height, mtx = this._props.matrix;\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\t\n\t\tif (x || y) { mtx.appendTransform(0,0,1,1,0,0,0,-x,-y); } // TODO: simplify this.\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\n\t\tvar x_a = width*mtx.a, x_b = width*mtx.b;\n\t\tvar y_c = height*mtx.c, y_d = height*mtx.d;\n\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\t\n\t\tvar minX = tx, maxX = tx, minY = ty, maxY = ty;\n\n\t\tif ((x = x_a + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\tif ((x = x_a + y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\tif ((x = y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\t\n\t\tif ((y = x_b + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\tif ((y = x_b + y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\tif ((y = y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\t\n\t\treturn bounds.setValues(minX, minY, maxX-minX, maxY-minY);\n\t};\n\t\n\t/**\n\t * Indicates whether the display object has any mouse event listeners or a cursor.\n\t * @method _isMouseOpaque\n\t * @return {Boolean}\n\t * @protected\n\t **/\n\tp._hasMouseEventListener = function() {\n\t\tvar evts = DisplayObject._MOUSE_EVENTS;\n\t\tfor (var i= 0, l=evts.length; i<l; i++) {\n\t\t\tif (this.hasEventListener(evts[i])) { return true; }\n\t\t}\n\t\treturn !!this.cursor;\n\t};\n\n\tcreatejs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Container.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\t\n\n// constructor:\n/**\n * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\n * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\n * transform them as a group, while still being able to move the individual parts relative to each other. Children of\n * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\n * Container.\n *\n * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\n * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\n * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\n *\n * <h4>Example</h4>\n *\n *      var container = new createjs.Container();\n *      container.addChild(bitmapInstance, shapeInstance);\n *      container.x = 100;\n *\n * @class Container\n * @extends DisplayObject\n * @constructor\n **/\n\tfunction Container() {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The array of children in the display list. You should usually use the child management methods such as\n\t\t * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\n\t\t * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\n\t\t * included for advanced uses.\n\t\t * @property children\n\t\t * @type Array\n\t\t * @default null\n\t\t **/\n\t\tthis.children = [];\n\t\t\n\t\t/**\n\t\t * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\n\t\t * If false, the children will be aggregated under the container - for example, a click on a child shape would\n\t\t * trigger a click event on the container.\n\t\t * @property mouseChildren\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.mouseChildren = true;\n\t\t\n\t\t/**\n\t\t * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t * @property tickChildren\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickChildren = true;\n\t}\n\tvar p = createjs.extend(Container, createjs.DisplayObject);\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\n\t * @method getNumChildren\n\t * @return {Number}\n\t * @deprecated\n\t **/\n\tp.getNumChildren = function() {\n\t\treturn this.children.length;\n\t};\n\n\t/**\n\t * Returns the number of children in the container.\n\t * @property numChildren\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnumChildren: { get: p.getNumChildren }\n\t\t});\n\t} catch (e) {}\n\t\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Container; // TODO: deprecated.\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.children.length;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\n\t\t// this ensures we don't have issues with display list changes that occur during a draw:\n\t\tvar list = this.children.slice();\n\t\tfor (var i=0,l=list.length; i<l; i++) {\n\t\t\tvar child = list[i];\n\t\t\tif (!child.isVisible()) { continue; }\n\t\t\t\n\t\t\t// draw the child:\n\t\t\tctx.save();\n\t\t\tchild.updateContext(ctx);\n\t\t\tchild.draw(ctx);\n\t\t\tctx.restore();\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Adds a child to the top of the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tcontainer.addChild(bitmapInstance);\n\t *\n\t * You can also add multiple children at once:\n\t *\n\t * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\n\t *\n\t * @method addChild\n\t * @param {DisplayObject} child The display object to add.\n\t * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\n\t **/\n\tp.addChild = function(child) {\n\t\tif (child == null) { return child; }\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tfor (var i=0; i<l; i++) { this.addChild(arguments[i]); }\n\t\t\treturn arguments[l-1];\n\t\t}\n\t\tif (child.parent) { child.parent.removeChild(child); }\n\t\tchild.parent = this;\n\t\tthis.children.push(child);\n\t\tchild.dispatchEvent(\"added\");\n\t\treturn child;\n\t};\n\n\t/**\n\t * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\n\t * setting its parent to this Container.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      addChildAt(child1, index);\n\t *\n\t * You can also add multiple children, such as:\n\t *\n\t *      addChildAt(child1, child2, ..., index);\n\t *\n\t * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\n\t * you could use:\n\t *\n\t *      container.addChildAt(myShape, container.getChildIndex(otherShape));\n\t *\n\t * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\n\t *\n\t * @method addChildAt\n\t * @param {DisplayObject} child The display object to add.\n\t * @param {Number} index The index to add the child at.\n\t * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\n\t **/\n\tp.addChildAt = function(child, index) {\n\t\tvar l = arguments.length;\n\t\tvar indx = arguments[l-1]; // can't use the same name as the index param or it replaces arguments[1]\n\t\tif (indx < 0 || indx > this.children.length) { return arguments[l-2]; }\n\t\tif (l > 2) {\n\t\t\tfor (var i=0; i<l-1; i++) { this.addChildAt(arguments[i], indx+i); }\n\t\t\treturn arguments[l-2];\n\t\t}\n\t\tif (child.parent) { child.parent.removeChild(child); }\n\t\tchild.parent = this;\n\t\tthis.children.splice(index, 0, child);\n\t\tchild.dispatchEvent(\"added\");\n\t\treturn child;\n\t};\n\n\t/**\n\t * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\n\t * already known.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.removeChild(child);\n\t *\n\t * You can also remove multiple children:\n\t *\n\t *      removeChild(child1, child2, ...);\n\t *\n\t * Returns true if the child (or children) was removed, or false if it was not in the display list.\n\t * @method removeChild\n\t * @param {DisplayObject} child The child to remove.\n\t * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\n\t **/\n\tp.removeChild = function(child) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChild(arguments[i]); }\n\t\t\treturn good;\n\t\t}\n\t\treturn this.removeChildAt(createjs.indexOf(this.children, child));\n\t};\n\n\t/**\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.removeChildAt(2);\n\t *\n\t * You can also remove multiple children:\n\t *\n\t *      container.removeChild(2, 7, ...)\n\t *\n\t * Returns true if the child (or children) was removed, or false if any index was out of range.\n\t * @method removeChildAt\n\t * @param {Number} index The index of the child to remove.\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n\t **/\n\tp.removeChildAt = function(index) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar a = [];\n\t\t\tfor (var i=0; i<l; i++) { a[i] = arguments[i]; }\n\t\t\ta.sort(function(a, b) { return b-a; });\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChildAt(a[i]); }\n\t\t\treturn good;\n\t\t}\n\t\tif (index < 0 || index > this.children.length-1) { return false; }\n\t\tvar child = this.children[index];\n\t\tif (child) { child.parent = null; }\n\t\tthis.children.splice(index, 1);\n\t\tchild.dispatchEvent(\"removed\");\n\t\treturn true;\n\t};\n\n\t/**\n\t * Removes all children from the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tcontainer.removeAllChildren();\n\t *\n\t * @method removeAllChildren\n\t **/\n\tp.removeAllChildren = function() {\n\t\tvar kids = this.children;\n\t\twhile (kids.length) { this.removeChildAt(0); }\n\t};\n\n\t/**\n\t * Returns the child at the specified index.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.getChildAt(2);\n\t *\n\t * @method getChildAt\n\t * @param {Number} index The index of the child to return.\n\t * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\n\t **/\n\tp.getChildAt = function(index) {\n\t\treturn this.children[index];\n\t};\n\t\n\t/**\n\t * Returns the child with the specified name.\n\t * @method getChildByName\n\t * @param {String} name The name of the child to return.\n\t * @return {DisplayObject} The child with the specified name.\n\t **/\n\tp.getChildByName = function(name) {\n\t\tvar kids = this.children;\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\tif(kids[i].name == name) { return kids[i]; }\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Performs an array sort operation on the child list.\n\t *\n\t * <h4>Example: Display children with a higher y in front.</h4>\n\t * \n\t *      var sortFunction = function(obj1, obj2, options) {\n\t *          if (obj1.y > obj2.y) { return 1; }\n\t *          if (obj1.y < obj2.y) { return -1; }\n\t *          return 0;\n\t *      }\n\t *      container.sortChildren(sortFunction);\n\t *\n\t * @method sortChildren\n\t * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\n\t * documentation for details.\n\t **/\n\tp.sortChildren = function(sortFunction) {\n\t\tthis.children.sort(sortFunction);\n\t};\n\n\t/**\n\t * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var index = container.getChildIndex(child);\n\t *\n\t * @method getChildIndex\n\t * @param {DisplayObject} child The child to return the index of.\n\t * @return {Number} The index of the specified child. -1 if the child is not found.\n\t **/\n\tp.getChildIndex = function(child) {\n\t\treturn createjs.indexOf(this.children, child);\n\t};\n\t\n\t/**\n\t * Swaps the children at the specified indexes. Fails silently if either index is out of range.\n\t * @method swapChildrenAt\n\t * @param {Number} index1\n\t * @param {Number} index2\n\t **/\n\tp.swapChildrenAt = function(index1, index2) {\n\t\tvar kids = this.children;\n\t\tvar o1 = kids[index1];\n\t\tvar o2 = kids[index2];\n\t\tif (!o1 || !o2) { return; }\n\t\tkids[index1] = o2;\n\t\tkids[index2] = o1;\n\t};\n\t\n\t/**\n\t * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\n\t * Container.\n\t * @method swapChildren\n\t * @param {DisplayObject} child1\n\t * @param {DisplayObject} child2\n\t **/\n\tp.swapChildren = function(child1, child2) {\n\t\tvar kids = this.children;\n\t\tvar index1,index2;\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\tif (kids[i] == child1) { index1 = i; }\n\t\t\tif (kids[i] == child2) { index2 = i; }\n\t\t\tif (index1 != null && index2 != null) { break; }\n\t\t}\n\t\tif (i==l) { return; } // TODO: throw error?\n\t\tkids[index1] = child2;\n\t\tkids[index2] = child1;\n\t};\n\t\n\t/**\n\t * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\n\t * @param {DisplayObject} child\n\t * @param {Number} index  \n\t * @method setChildIndex\n\t **/\n\tp.setChildIndex = function(child, index) {\n\t\tvar kids = this.children, l=kids.length;\n\t\tif (child.parent != this || index < 0 || index >= l) { return; }\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tif (kids[i] == child) { break; }\n\t\t}\n\t\tif (i==l || i == index) { return; }\n\t\tkids.splice(i,1);\n\t\tkids.splice(index,0,child);\n\t};\n\n\t/**\n\t * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\n\t * of this container.\n\t * @method contains\n\t * @param {DisplayObject} child The DisplayObject to be checked.\n\t * @return {Boolean} true if the specified display object either is this container or is a descendent.\n\t **/\n\tp.contains = function(child) {\n\t\twhile (child) {\n\t\t\tif (child == this) { return true; }\n\t\t\tchild = child.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\n\t * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\n\t * transform properties including regX/Y.\n\t * @method hitTest\n\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\n\t * coordinates.\n\t **/\n\tp.hitTest = function(x, y) {\n\t\t// TODO: optimize to use the fast cache check where possible.\n\t\treturn (this.getObjectUnderPoint(x, y) != null);\n\t};\n\n\t/**\n\t * Returns an array of all display objects under the specified coordinates that are in this container's display\n\t * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\n\t * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\n\t * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\n\t * and only if the mouse's position has changed.\n\t * \n\t * <ul>\n\t *     <li>By default (mode=0) this method evaluates all display objects.</li>\n\t *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\n\t * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\n\t * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\n\t * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\n\t * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\n\t * </li>\n\t * \n\t * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\n\t * @method getObjectsUnderPoint\n\t * @param {Number} x The x position in the container to test.\n\t * @param {Number} y The y position in the container to test.\n\t * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t * @return {Array} An Array of DisplayObjects under the specified coordinates.\n\t **/\n\tp.getObjectsUnderPoint = function(x, y, mode) {\n\t\tvar arr = [];\n\t\tvar pt = this.localToGlobal(x, y);\n\t\tthis._getObjectsUnderPoint(pt.x, pt.y, arr, mode>0, mode==1);\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\n\t * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\n\t * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\n\t * @method getObjectUnderPoint\n\t * @param {Number} x The x position in the container to test.\n\t * @param {Number} y The y position in the container to test.\n\t * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t * @return {DisplayObject} The top-most display object under the specified coordinates.\n\t **/\n\tp.getObjectUnderPoint = function(x, y, mode) {\n\t\tvar pt = this.localToGlobal(x, y);\n\t\treturn this._getObjectsUnderPoint(pt.x, pt.y, null, mode>0, mode==1);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\treturn this._getBounds(null, true);\n\t};\n\t\n\t\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getTransformedBounds = function() {\n\t\treturn this._getBounds();\n\t};\n\n\t/**\n\t * Returns a clone of this Container. Some properties that are specific to this instance's current context are\n\t * reverted to their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\n\t * properties of the container will be cloned, but the new instance will not have any children.\n\t * @return {Container} A clone of the current Container instance.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar o = this._cloneProps(new Container());\n\t\tif (recursive) { this._cloneChildren(o); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Container (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (this.tickChildren) {\n\t\t\tfor (var i=this.children.length-1; i>=0; i--) {\n\t\t\t\tvar child = this.children[i];\n\t\t\t\tif (child.tickEnabled && child._tick) { child._tick(evtObj); }\n\t\t\t}\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * Recursively clones all children of this container, and adds them to the target container.\n\t * @method cloneChildren\n\t * @protected\n\t * @param {Container} o The target container.\n\t **/\n\tp._cloneChildren = function(o) {\n\t\tif (o.children.length) { o.removeAllChildren(); }\n\t\tvar arr = o.children;\n\t\tfor (var i=0, l=this.children.length; i<l; i++) {\n\t\t\tvar clone = this.children[i].clone(true);\n\t\t\tclone.parent = o;\n\t\t\tarr.push(clone);\n\t\t}\n\t};\n\n\t/**\n\t * @method _getObjectsUnderPoint\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Array} arr\n\t * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\n\t * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\n\t * @param {Number} currentDepth Indicates the current depth of the search.\n\t * @return {DisplayObject}\n\t * @protected\n\t **/\n\tp._getObjectsUnderPoint = function(x, y, arr, mouse, activeListener, currentDepth) {\n\t\tcurrentDepth = currentDepth || 0;\n\t\tif (!currentDepth && !this._testMask(this, x, y)) { return null; }\n\t\tvar mtx, ctx = createjs.DisplayObject._hitTestContext;\n\t\tactiveListener = activeListener || (mouse&&this._hasMouseEventListener());\n\n\t\t// draw children one at a time, and check if we get a hit:\n\t\tvar children = this.children, l = children.length;\n\t\tfor (var i=l-1; i>=0; i--) {\n\t\t\tvar child = children[i];\n\t\t\tvar hitArea = child.hitArea;\n\t\t\tif (!child.visible || (!hitArea && !child.isVisible()) || (mouse && !child.mouseEnabled)) { continue; }\n\t\t\tif (!hitArea && !this._testMask(child, x, y)) { continue; }\n\t\t\t\n\t\t\t// if a child container has a hitArea then we only need to check its hitArea, so we can treat it as a normal DO:\n\t\t\tif (!hitArea && child instanceof Container) {\n\t\t\t\tvar result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth+1);\n\t\t\t\tif (!arr && result) { return (mouse && !this.mouseChildren) ? this : result; }\n\t\t\t} else {\n\t\t\t\tif (mouse && !activeListener && !child._hasMouseEventListener()) { continue; }\n\t\t\t\t\n\t\t\t\t// TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\n\t\t\t\tvar props = child.getConcatenatedDisplayProps(child._props);\n\t\t\t\tmtx = props.matrix;\n\t\t\t\t\n\t\t\t\tif (hitArea) {\n\t\t\t\t\tmtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\n\t\t\t\t\tprops.alpha = hitArea.alpha;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tctx.globalAlpha = props.alpha;\n\t\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\t\t(hitArea||child).draw(ctx);\n\t\t\t\tif (!this._testHit(ctx)) { continue; }\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\t\tif (arr) { arr.push(child); }\n\t\t\t\telse { return (mouse && !this.mouseChildren) ? this : child; }\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * @method _testMask\n\t * @param {DisplayObject} target\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Boolean} Indicates whether the x/y is within the masked region.\n\t * @protected\n\t **/\n\tp._testMask = function(target, x, y) {\n\t\tvar mask = target.mask;\n\t\tif (!mask || !mask.graphics || mask.graphics.isEmpty()) { return true; }\n\t\t\n\t\tvar mtx = this._props.matrix, parent = target.parent;\n\t\tmtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\n\t\tmtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\n\t\t\n\t\tvar ctx = createjs.DisplayObject._hitTestContext;\n\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\n\t\t// draw the mask as a solid fill:\n\t\tmask.graphics.drawAsPath(ctx);\n\t\tctx.fillStyle = \"#000\";\n\t\tctx.fill();\n\t\t\n\t\tif (!this._testHit(ctx)) { return false; }\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\t\n\t\tvar mtx = this._props.matrix;\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\n\t\tvar l = this.children.length, rect=null;\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tvar child = this.children[i];\n\t\t\tif (!child.visible || !(bounds = child._getBounds(mtx))) { continue; }\n\t\t\tif (rect) { rect.extend(bounds.x, bounds.y, bounds.width, bounds.height); }\n\t\t\telse { rect = bounds.clone(); }\n\t\t}\n\t\treturn rect;\n\t};\n\n\n\tcreatejs.Container = createjs.promote(Container, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Stage.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * method is called, it will render its display list to its target canvas.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n\t * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvasElementId\");\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t *      stage.addChild(image);\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          image.x += 10;\n\t *          stage.update();\n\t *      }\n\t *\n\t * @class Stage\n\t * @extends Container\n\t * @constructor\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n\t * of a canvas object in the current document.\n\t **/\n\tfunction Stage(canvas) {\n\t\tthis.Container_constructor();\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n\t\t * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n\t\t * example).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvasId\");\n\t\t *      stage.autoClear = false;\n\t\t *\n\t\t * @property autoClear\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.autoClear = true;\n\t\n\t\t/**\n\t\t * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n\t\t * first stage that will be ticked (or they will clear each other's render).\n\t\t *\n\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t\t * new canvas or mouse events will not work as expected. For example:\n\t\t *\n\t\t *      myStage.enableDOMEvents(false);\n\t\t *      myStage.canvas = anotherCanvas;\n\t\t *      myStage.enableDOMEvents(true);\n\t\t *\n\t\t * @property canvas\n\t\t * @type HTMLCanvasElement | Object\n\t\t **/\n\t\tthis.canvas = (typeof canvas == \"string\") ? document.getElementById(canvas) : canvas;\n\t\n\t\t/**\n\t\t * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseX\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseX = 0;\n\t\n\t\t/**\n\t\t * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseY\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseY = 0;\n\t\n\t\t/**\n\t\t * Specifies the area of the stage to affect when calling update. This can be use to selectively\n\t\t * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n\t\t * @property drawRect\n\t\t * @type {Rectangle}\n\t\t */\n\t\tthis.drawRect = null;\n\t\n\t\t/**\n\t\t * Indicates whether display objects should be rendered on whole pixels. You can set the\n\t\t * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n\t\t * display objects to false to enable/disable this behaviour on a per instance basis.\n\t\t * @property snapToPixelEnabled\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.snapToPixelEnabled = false;\n\t\n\t\t/**\n\t\t * Indicates whether the mouse is currently within the bounds of the canvas.\n\t\t * @property mouseInBounds\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseInBounds = false;\n\t\n\t\t/**\n\t\t * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n\t\t * @property tickOnUpdate\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickOnUpdate = true;\n\t\n\t\t/**\n\t\t * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n\t\t * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * x/y/rawX/rawY.\n\t\t * @property mouseMoveOutside\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseMoveOutside = false;\n\t\t\n\t\t\n\t\t/**\n\t\t * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n\t\t * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n\t\t * @property preventSelection\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.preventSelection = true;\n\t\n\t\t/**\n\t\t * The hitArea property is not supported for Stage.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\t \n\t\t \n\t// private properties:\n\t\t/**\n\t\t * Holds objects with data for each active pointer id. Each object has the following properties:\n\t\t * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n\t\t * @property _pointerData\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerData = {};\n\t\n\t\t/**\n\t\t * Number of active pointers.\n\t\t * @property _pointerCount\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerCount = 0;\n\t\n\t\t/**\n\t\t * The ID of the primary pointer.\n\t\t * @property _primaryPointerID\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._primaryPointerID = null;\n\t\n\t\t/**\n\t\t * @property _mouseOverIntervalID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._mouseOverIntervalID = null;\n\t\t\n\t\t/**\n\t\t * @property _nextStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._nextStage = null;\n\t\t\n\t\t/**\n\t\t * @property _prevStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._prevStage = null;\n\t\t\n\t\t\n\t// initialize:\n\t\tthis.enableDOMEvents(true);\n\t}\n\tvar p = createjs.extend(Stage, createjs.Container);\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// events:\n\t/**\n\t * Dispatched when the user moves the mouse over the canvas.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemousemove\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event stagemousedown\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n\t * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemouseup\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseleave\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseenter\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the tick event is propagated through the display list.\n\t * You can call preventDefault on the event object to cancel propagating the tick event.\n\t * @event tickstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n\t * tickOnUpdate is false. Precedes the \"drawstart\" event.\n\t * @event tickend\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n\t * You can call preventDefault on the event object to cancel the draw.\n\t * @event drawstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t * @event drawend\n\t * @since 0.7.0\n\t */\n\n\t \n// getter / setters:\n\t/**\n\t * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n\t * This can be useful in cases where you have multiple layered canvases and want user interactions\n\t * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n\t *\n\t *      topStage.nextStage = bottomStage;\n\t *\n\t * To disable relaying, set nextStage to null.\n\t * \n\t * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n\t * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n\t * Considerations when using roll over in relay targets:<OL>\n\t * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n\t * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n\t * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n\t * </OL>\n\t * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n\t * 30 as it's desired frequency):\n\t * \ttopStage.nextStage = targetStage;\n\t * \ttopStage.enableMouseOver(10);\n\t * \ttargetStage.enableMouseOver(30);\n\t * \n\t * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n\t * DOM events using:\n\t * \n\t *\ttargetStage.enableDOMEvents(false);\n\t * \n\t * @property nextStage\n\t * @type {Stage}\n\t **/\n\tp._get_nextStage = function() {\n\t\treturn this._nextStage;\n\t};\n\tp._set_nextStage = function(value) {\n\t\tif (this._nextStage) { this._nextStage._prevStage = null; }\n\t\tif (value) { value._prevStage = this; }\n\t\tthis._nextStage = value;\n\t};\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnextStage: { get: p._get_nextStage, set: p._set_nextStage }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n\t * and then render the display list to the canvas.\n\t *\n\t * @method update\n\t * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n\t **/\n\tp.update = function(props) {\n\t\tif (!this.canvas) { return; }\n\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\tif (this.dispatchEvent(\"drawstart\", false, true) === false) { return; }\n\t\tcreatejs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n\t\tvar r = this.drawRect, ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tif (this.autoClear) {\n\t\t\tif (r) { ctx.clearRect(r.x, r.y, r.width, r.height); }\n\t\t\telse { ctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1); }\n\t\t}\n\t\tctx.save();\n\t\tif (this.drawRect) {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(r.x, r.y, r.width, r.height);\n\t\t\tctx.clip();\n\t\t}\n\t\tthis.updateContext(ctx);\n\t\tthis.draw(ctx, false);\n\t\tctx.restore();\n\t\tthis.dispatchEvent(\"drawend\");\n\t};\n\t\n\t/**\n\t * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n\t *\n\t * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n\t * propagated to listeners.\n\t *\n\t * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n\t * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n\t * passed as the `props` parameter to `tick()`. For example:\n\t *\n\t * \tTicker.on(\"tick\", handleTick);\n\t * \tfunction handleTick(evtObj) {\n\t * \t\t// clone the event object from Ticker, and add some custom data to it:\n\t * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n\t * \t\t\n\t * \t\t// pass it to stage.update():\n\t * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n\t * \t}\n\t * \t\n\t * \t// ...\n\t * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n\t * \tfunction handleDisplayObjectTick(evt) {\n\t * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n\t * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n\t * \t}\n\t * \n\t * @method tick\n\t * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n\t **/\n\tp.tick = function(props) {\n\t\tif (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) { return; }\n\t\tvar evtObj = new createjs.Event(\"tick\");\n\t\tif (props) {\n\t\t\tfor (var n in props) {\n\t\t\t\tif (props.hasOwnProperty(n)) { evtObj[n] = props[n]; }\n\t\t\t}\n\t\t}\n\t\tthis._tick(evtObj);\n\t\tthis.dispatchEvent(\"tickend\");\n\t};\n\n\t/**\n\t * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n\t * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t * directly, using:\n\t *\n\t *      Ticker.addEventListener(\"tick\", myStage\");\n\t *\n\t * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n\t * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n\t * @property handleEvent\n\t * @type Function\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tif (evt.type == \"tick\") { this.update(evt); }\n\t};\n\n\t/**\n\t * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n\t * @method clear\n\t **/\n\tp.clear = function() {\n\t\tif (!this.canvas) { return; }\n\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1);\n\t};\n\n\t/**\n\t * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n\t * be specified as the src value of an image element.\n\t * @method toDataURL\n\t * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n\t * value is allowed. The default value is a transparent background.\n\t * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n\t * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n\t * @return {String} a Base64 encoded image.\n\t **/\n\tp.toDataURL = function(backgroundColor, mimeType) {\n\t\tvar data, ctx = this.canvas.getContext('2d'), w = this.canvas.width, h = this.canvas.height;\n\n\t\tif (backgroundColor) {\n\t\t\tdata = ctx.getImageData(0, 0, w, h);\n\t\t\tvar compositeOperation = ctx.globalCompositeOperation;\n\t\t\tctx.globalCompositeOperation = \"destination-over\";\n\t\t\t\n\t\t\tctx.fillStyle = backgroundColor;\n\t\t\tctx.fillRect(0, 0, w, h);\n\t\t}\n\n\t\tvar dataURL = this.canvas.toDataURL(mimeType||\"image/png\");\n\n\t\tif(backgroundColor) {\n\t\t\tctx.putImageData(data, 0, 0);\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t}\n\n\t\treturn dataURL;\n\t};\n\n\t/**\n\t * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n\t * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n\t * independently of mouse move events via the optional `frequency` parameter.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var stage = new createjs.Stage(\"canvasId\");\n\t *      stage.enableMouseOver(10); // 10 updates per second\n\t *\n\t * @method enableMouseOver\n\t * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n\t * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n\t * responsive, but uses less CPU.\n\t **/\n\tp.enableMouseOver = function(frequency) {\n\t\tif (this._mouseOverIntervalID) {\n\t\t\tclearInterval(this._mouseOverIntervalID);\n\t\t\tthis._mouseOverIntervalID = null;\n\t\t\tif (frequency == 0) {\n\t\t\t\tthis._testMouseOver(true);\n\t\t\t}\n\t\t}\n\t\tif (frequency == null) { frequency = 20; }\n\t\telse if (frequency <= 0) { return; }\n\t\tvar o = this;\n\t\tthis._mouseOverIntervalID = setInterval(function(){ o._testMouseOver(); }, 1000/Math.min(50,frequency));\n\t};\n\n\t/**\n\t * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n\t * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n\t * events from the page.\n\t *\n\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t * new canvas or mouse events will not work as expected. For example:\n\t *\n\t *      myStage.enableDOMEvents(false);\n\t *      myStage.canvas = anotherCanvas;\n\t *      myStage.enableDOMEvents(true);\n\t *\n\t * @method enableDOMEvents\n\t * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n\t **/\n\tp.enableDOMEvents = function(enable) {\n\t\tif (enable == null) { enable = true; }\n\t\tvar n, o, ls = this._eventListeners;\n\t\tif (!enable && ls) {\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.removeEventListener(n, o.f, false);\n\t\t\t}\n\t\t\tthis._eventListeners = null;\n\t\t} else if (enable && !ls && this.canvas) {\n\t\t\tvar t = window.addEventListener ? window : document;\n\t\t\tvar _this = this;\n\t\t\tls = this._eventListeners = {};\n\t\t\tls[\"mouseup\"] = {t:t, f:function(e) { _this._handleMouseUp(e)} };\n\t\t\tls[\"mousemove\"] = {t:t, f:function(e) { _this._handleMouseMove(e)} };\n\t\t\tls[\"dblclick\"] = {t:this.canvas, f:function(e) { _this._handleDoubleClick(e)} };\n\t\t\tls[\"mousedown\"] = {t:this.canvas, f:function(e) { _this._handleMouseDown(e)} };\n\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.addEventListener(n, o.f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stage instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"Stage cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Stage (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _getElementRect\n\t * @protected\n\t * @param {HTMLElement} e\n\t **/\n\tp._getElementRect = function(e) {\n\t\tvar bounds;\n\t\ttry { bounds = e.getBoundingClientRect(); } // this can fail on disconnected DOM elements in IE9\n\t\tcatch (err) { bounds = {top: e.offsetTop, left: e.offsetLeft, width:e.offsetWidth, height:e.offsetHeight}; }\n\n\t\tvar offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n\t\tvar offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop  || document.body.clientTop  || 0);\n\n\t\tvar styles = window.getComputedStyle ? getComputedStyle(e,null) : e.currentStyle; // IE <9 compatibility.\n\t\tvar padL = parseInt(styles.paddingLeft)+parseInt(styles.borderLeftWidth);\n\t\tvar padT = parseInt(styles.paddingTop)+parseInt(styles.borderTopWidth);\n\t\tvar padR = parseInt(styles.paddingRight)+parseInt(styles.borderRightWidth);\n\t\tvar padB = parseInt(styles.paddingBottom)+parseInt(styles.borderBottomWidth);\n\n\t\t// note: in some browsers bounds properties are read only.\n\t\treturn {\n\t\t\tleft: bounds.left+offX+padL,\n\t\t\tright: bounds.right+offX-padR,\n\t\t\ttop: bounds.top+offY+padT,\n\t\t\tbottom: bounds.bottom+offY-padB\n\t\t}\n\t};\n\n\t/**\n\t * @method _getPointerData\n\t * @protected\n\t * @param {Number} id\n\t **/\n\tp._getPointerData = function(id) {\n\t\tvar data = this._pointerData[id];\n\t\tif (!data) { data = this._pointerData[id] = {x:0,y:0}; }\n\t\treturn data;\n\t};\n\n\t/**\n\t * @method _handleMouseMove\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseMove = function(e) {\n\t\tif(!e){ e = window.event; }\n\t\tthis._handlePointerMove(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerMove\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerMove = function(id, e, pageX, pageY, owner) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\tif (!this.canvas) { return; }\n\t\tvar nextStage=this._nextStage, o=this._getPointerData(id);\n\n\t\tvar inBounds = o.inBounds;\n\t\tthis._updatePointerPosition(id, e, pageX, pageY);\n\t\tif (inBounds || o.inBounds || this.mouseMoveOutside) {\n\t\t\tif (id === -1 && o.inBounds == !inBounds) {\n\t\t\t\tthis._dispatchMouseEvent(this, (inBounds ? \"mouseleave\" : \"mouseenter\"), false, id, o, e);\n\t\t\t}\n\t\t\t\n\t\t\tthis._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n\t\t\tthis._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._handlePointerMove(id, e, pageX, pageY, null);\n\t};\n\n\t/**\n\t * @method _updatePointerPosition\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t **/\n\tp._updatePointerPosition = function(id, e, pageX, pageY) {\n\t\tvar rect = this._getElementRect(this.canvas);\n\t\tpageX -= rect.left;\n\t\tpageY -= rect.top;\n\n\t\tvar w = this.canvas.width;\n\t\tvar h = this.canvas.height;\n\t\tpageX /= (rect.right-rect.left)/w;\n\t\tpageY /= (rect.bottom-rect.top)/h;\n\t\tvar o = this._getPointerData(id);\n\t\tif (o.inBounds = (pageX >= 0 && pageY >= 0 && pageX <= w-1 && pageY <= h-1)) {\n\t\t\to.x = pageX;\n\t\t\to.y = pageY;\n\t\t} else if (this.mouseMoveOutside) {\n\t\t\to.x = pageX < 0 ? 0 : (pageX > w-1 ? w-1 : pageX);\n\t\t\to.y = pageY < 0 ? 0 : (pageY > h-1 ? h-1 : pageY);\n\t\t}\n\n\t\to.posEvtObj = e;\n\t\to.rawX = pageX;\n\t\to.rawY = pageY;\n\n\t\tif (id === this._primaryPointerID || id === -1) {\n\t\t\tthis.mouseX = o.x;\n\t\t\tthis.mouseY = o.y;\n\t\t\tthis.mouseInBounds = o.inBounds;\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleMouseUp\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseUp = function(e) {\n\t\tthis._handlePointerUp(-1, e, false);\n\t};\n\n\t/**\n\t * @method _handlePointerUp\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Boolean} clear\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerUp = function(id, e, clear, owner) {\n\t\tvar nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar target=null, oTarget = o.target;\n\t\tif (!owner && (oTarget || nextStage)) { target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\t\t\n\t\tif (o.down) { this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target); o.down = false; }\n\t\t\n\t\tif (target == oTarget) { this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e); }\n\t\tthis._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n\t\t\n\t\tif (clear) {\n\t\t\tif (id==this._primaryPointerID) { this._primaryPointerID = null; }\n\t\t\tdelete(this._pointerData[id]);\n\t\t} else { o.target = null; }\n\t\t\n\t\tnextStage&&nextStage._handlePointerUp(id, e, clear, owner || target && this);\n\t};\n\n\t/**\n\t * @method _handleMouseDown\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseDown = function(e) {\n\t\tthis._handlePointerDown(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerDown\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerDown = function(id, e, pageX, pageY, owner) {\n\t\tif (this.preventSelection) { e.preventDefault(); }\n\t\tif (this._primaryPointerID == null || id === -1) { this._primaryPointerID = id; } // mouse always takes over.\n\t\t\n\t\tif (pageY != null) { this._updatePointerPosition(id, e, pageX, pageY); }\n\t\tvar target = null, nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (!owner) { target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\n\t\tif (o.inBounds) { this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target); o.down = true; }\n\t\tthis._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n\t\t\n\t\tnextStage&&nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n\t};\n\n\t/**\n\t * @method _testMouseOver\n\t * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t * @param {Stage} eventTarget The stage that the cursor is actively over.\n\t * @protected\n\t **/\n\tp._testMouseOver = function(clear, owner, eventTarget) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar nextStage = this._nextStage;\n\t\tif (!this._mouseOverIntervalID) {\n\t\t\t// not enabled for mouseover, but should still relay the event.\n\t\t\tnextStage&&nextStage._testMouseOver(clear, owner, eventTarget);\n\t\t\treturn;\n\t\t}\n\t\tvar o = this._getPointerData(-1);\n\t\t// only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n\t\tif (!o || (!clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds)) { return; }\n\t\t\n\t\tvar e = o.posEvtObj;\n\t\tvar isEventTarget = eventTarget || e&&(e.target == this.canvas);\n\t\tvar target=null, common = -1, cursor=\"\", t, i, l;\n\t\t\n\t\tif (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n\t\t\ttarget = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n\t\t\tthis._mouseOverX = this.mouseX;\n\t\t\tthis._mouseOverY = this.mouseY;\n\t\t}\n\n\t\tvar oldList = this._mouseOverTarget||[];\n\t\tvar oldTarget = oldList[oldList.length-1];\n\t\tvar list = this._mouseOverTarget = [];\n\n\t\t// generate ancestor list and check for cursor:\n\t\tt = target;\n\t\twhile (t) {\n\t\t\tlist.unshift(t);\n\t\t\tif (!cursor) { cursor = t.cursor; }\n\t\t\tt = t.parent;\n\t\t}\n\t\tthis.canvas.style.cursor = cursor;\n\t\tif (!owner && eventTarget) { eventTarget.canvas.style.cursor = cursor; }\n\n\t\t// find common ancestor:\n\t\tfor (i=0,l=list.length; i<l; i++) {\n\t\t\tif (list[i] != oldList[i]) { break; }\n\t\t\tcommon = i;\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=oldList.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=list.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n\t};\n\n\t/**\n\t * @method _handleDoubleClick\n\t * @protected\n\t * @param {MouseEvent} e\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handleDoubleClick = function(e, owner) {\n\t\tvar target=null, nextStage=this._nextStage, o=this._getPointerData(-1);\n\t\tif (!owner) {\n\t\t\ttarget = this._getObjectsUnderPoint(o.x, o.y, null, true);\n\t\t\tthis._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n\t\t}\n\t\tnextStage&&nextStage._handleDoubleClick(e, owner || target && this);\n\t};\n\n\t/**\n\t * @method _dispatchMouseEvent\n\t * @protected\n\t * @param {DisplayObject} target\n\t * @param {String} type\n\t * @param {Boolean} bubbles\n\t * @param {Number} pointerId\n\t * @param {Object} o\n\t * @param {MouseEvent} [nativeEvent]\n\t * @param {DisplayObject} [relatedTarget]\n\t **/\n\tp._dispatchMouseEvent = function(target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n\t\t// TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n\t\tif (!target || (!bubbles && !target.hasEventListener(type))) { return; }\n\t\t/*\n\t\t// TODO: account for stage transformations?\n\t\tthis._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n\t\tvar pt = this._mtx.transformPoint(o.x, o.y);\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n\t\t*/\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n\t\ttarget.dispatchEvent(evt);\n\t};\n\n\n\tcreatejs.Stage = createjs.promote(Stage, \"Container\");\n}());\n\n//##############################################################################\n// Bitmap.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\n\t/**\n\t * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n\t * HTML element, or a string.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n\t *\n\t * <strong>Notes:</strong>\n\t * <ol>\n\t *     <li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n\t *      will be displayed.</li>\n\t *     <li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n\t *     the Bitmap can be cached.</li>\n\t *     <li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n\t *     happens in all browsers except recent Firefox builds.</li>\n\t *     <li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n\t *     methods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n\t *     `crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n\t * </ol>\n\t *\n\t * @class Bitmap\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} imageOrUri The source object or URI to an image to\n\t * display. This can be either an Image, Canvas, or Video object, or a string URI to an image file to load and use.\n\t * If it is a URI, a new Image object will be constructed and assigned to the .image property.\n\t **/\n\tfunction Bitmap(imageOrUri) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The image to render. This can be an Image, a Canvas, or a Video. Not all browsers (especially\n\t\t * mobile browsers) support drawing video to a canvas.\n\t\t * @property image\n\t\t * @type HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\n\t\t **/\n\t\tif (typeof imageOrUri == \"string\") {\n\t\t\tthis.image = document.createElement(\"img\");\n\t\t\tthis.image.src = imageOrUri;\n\t\t} else {\n\t\t\tthis.image = imageOrUri;\n\t\t}\n\t\n\t\t/**\n\t\t * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n\t\t * Note that video sources must have a width / height set to work correctly with `sourceRect`.\n\t\t * @property sourceRect\n\t\t * @type Rectangle\n\t\t * @default null\n\t\t */\n\t\tthis.sourceRect = null;\n\t}\n\tvar p = createjs.extend(Bitmap, createjs.DisplayObject);\n\t\n\t\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Bitmap; // TODO: deprecated.\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar image = this.image;\n\t\tvar hasContent = this.cacheCanvas || (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache) || !this.image) { return true; }\n\t\tvar img = this.image, rect = this.sourceRect;\n\t\tif (rect) {\n\t\t\t// some browsers choke on out of bound values, so we'll fix them:\n\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1 + rect.width, y2 = y1 + rect.height, x = 0, y = 0, w = img.width, h = img.height;\n\t\t\tif (x1 < 0) { x -= x1; x1 = 0; }\n\t\t\tif (x2 > w) { x2 = w; }\n\t\t\tif (y1 < 0) { y -= y1; y1 = 0; }\n\t\t\tif (y2 > h) { y2 = h; }\n\t\t\tctx.drawImage(img, x1, y1, x2-x1, y2-y1, x, y, x2-x1, y2-y1);\n\t\t} else {\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method cache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method updateCache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tvar image = this.image, o = this.sourceRect || image;\n\t\tvar hasContent = (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Bitmap instance.\n\t * @method clone\n\t * @return {Bitmap} a clone of the Bitmap instance.\n\t **/\n\tp.clone = function() {\n\t\tvar o = new Bitmap(this.image);\n\t\tif (this.sourceRect) { o.sourceRect = this.sourceRect.clone(); }\n\t\tthis._cloneProps(o);\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Bitmap (name=\"+  this.name +\")]\";\n\t};\n\n\t\n\tcreatejs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Sprite.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n\t * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n\t * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n\t * play frames as an animation, and even sequence animations together.\n\t *\n\t * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var instance = new createjs.Sprite(spriteSheet);\n\t *      instance.gotoAndStop(\"frameName\");\n\t *\n\t * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n\t * only the first defined frame defined in the sprite sheet will be displayed.\n\t *\n\t * @class Sprite\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n\t * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n\t **/\n\tfunction Sprite(spriteSheet, frameOrAnimation) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n\t\t * definitions, this will advance non-sequentially. This will always be an integer value.\n\t\t * @property currentFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * Returns the name of the currently playing animation.\n\t\t * @property currentAnimation\n\t\t * @type {String}\n\t\t * @final\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentAnimation = null;\n\t\n\t\t/**\n\t\t * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n\t\t * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n\t\t * @property paused\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis.paused = true;\n\t\n\t\t/**\n\t\t * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n\t\t * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t\t * @property spriteSheet\n\t\t * @type {SpriteSheet}\n\t\t * @readonly\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n\t\t * from 0 to n-1, where n is the number of frames in the current animation.\n\t\t *\n\t\t * This could be a non-integer value if\n\t\t * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n\t\t * not an integer.\n\t\t * @property currentAnimationFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.currentAnimationFrame = 0;\n\t\n\t\t/**\n\t\t * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n\t\t * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.framerate = 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * Current animation object.\n\t\t * @property _animation\n\t\t * @protected\n\t\t * @type {Object}\n\t\t * @default null\n\t\t **/\n\t\tthis._animation = null;\n\t\n\t\t/**\n\t\t * Current frame index.\n\t\t * @property _currentFrame\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis._currentFrame = null;\n\t\t\n\t\t/**\n\t\t * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n\t\t * @property _skipAdvance\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._skipAdvance = false;\n\t\t\n\t\t\n\t\tif (frameOrAnimation != null) { this.gotoAndPlay(frameOrAnimation); }\n\t}\n\tvar p = createjs.extend(Sprite, createjs.DisplayObject);\n\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Sprite; // TODO: Deprecated. This is for backwards support of FlashCC spritesheet export.\n\n\n// events:\n\t/**\n\t * Dispatched when an animation reaches its ends.\n\t * @event animationend\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} name The name of the animation that just ended.\n\t * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n\t * or calling gotoAndPlay() or gotoAndStop().\n\t * @event change\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t */\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.spriteSheet.complete;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._normalizeFrame();\n\t\tvar o = this.spriteSheet.getFrame(this._currentFrame|0);\n\t\tif (!o) { return false; }\n\t\tvar rect = o.rect;\n\t\tif (rect.width && rect.height) { ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height); }\n\t\treturn true;\n\t};\n\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method cache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method updateCache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n\t * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n\t * unchanged.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\n\t/**\n\t * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n\t * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n\t * will resume playback.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\n\t/**\n\t * Sets paused to false and plays the specified animation name, named frame, or frame number.\n\t * @method gotoAndPlay\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and begin playing.\n\t **/\n\tp.gotoAndPlay = function(frameOrAnimation) {\n\t\tthis.paused = false;\n\t\tthis._skipAdvance = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n\t * @method gotoAndStop\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and stop.\n\t **/\n\tp.gotoAndStop = function(frameOrAnimation) {\n\t\tthis.paused = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n\t * or its SpriteSheet.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\tvar fps = this.framerate || this.spriteSheet.framerate;\n\t\tvar t = (fps && time != null) ? time/(1000/fps) : 1;\n\t\tthis._normalizeFrame(t);\n\t};\n\t\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n\t * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n\t * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n\t *\n\t * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n\t * loaded.\n\t **/\n\tp.getBounds = function() {\n\t\t// TODO: should this normalizeFrame?\n\t\treturn this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n\t};\n\n\t/**\n\t * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n\t * instances.\n\t * @method clone\n\t * @return {Sprite} a clone of the Sprite instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Sprite(this.spriteSheet));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Sprite (name=\"+  this.name +\")]\";\n\t};\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Sprite} o\n\t * @return {Sprite} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.currentFrame = this.currentFrame;\n\t\to.currentAnimation = this.currentAnimation;\n\t\to.paused = this.paused;\n\t\to.currentAnimationFrame = this.currentAnimationFrame;\n\t\to.framerate = this.framerate;\n\t\t\n\t\to._animation = this._animation;\n\t\to._currentFrame = this._currentFrame;\n\t\to._skipAdvance = this._skipAdvance;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n\t * ticks.\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t * @method _tick\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (!this.paused) {\n\t\t\tif (!this._skipAdvance) { this.advance(evtObj&&evtObj.delta); }\n\t\t\tthis._skipAdvance = false;\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\n\n\t/**\n\t * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n\t * @protected\n\t * @method _normalizeFrame\n\t **/\n\tp._normalizeFrame = function(frameDelta) {\n\t\tframeDelta = frameDelta || 0;\n\t\tvar animation = this._animation;\n\t\tvar paused = this.paused;\n\t\tvar frame = this._currentFrame;\n\t\tvar l;\n\t\t\n\t\tif (animation) {\n\t\t\tvar speed = animation.speed || 1;\n\t\t\tvar animFrame = this.currentAnimationFrame;\n\t\t\tl = animation.frames.length;\n\t\t\tif (animFrame + frameDelta * speed >= l) {\n\t\t\t\tvar next = animation.next;\n\t\t\t\tif (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n\t\t\t\t\t// something changed in the event stack, so we shouldn't make any more changes here.\n\t\t\t\t\treturn;\n\t\t\t\t} else if (next) {\n\t\t\t\t\t// sequence. Automatically calls _normalizeFrame again with the remaining frames.\n\t\t\t\t\treturn this._goto(next, frameDelta - (l - animFrame) / speed);\n\t\t\t\t} else {\n\t\t\t\t\t// end.\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t\tanimFrame = animation.frames.length - 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tanimFrame += frameDelta * speed;\n\t\t\t}\n\t\t\tthis.currentAnimationFrame = animFrame;\n\t\t\tthis._currentFrame = animation.frames[animFrame | 0]\n\t\t} else {\n\t\t\tframe = (this._currentFrame += frameDelta);\n\t\t\tl = this.spriteSheet.getNumFrames();\n\t\t\tif (frame >= l && l > 0) {\n\t\t\t\tif (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n\t\t\t\t\t// looped.\n\t\t\t\t\tif ((this._currentFrame -= l) >= l) { return this._normalizeFrame(); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tframe = this._currentFrame | 0;\n\t\tif (this.currentFrame != frame) {\n\t\t\tthis.currentFrame = frame;\n\t\t\tthis.dispatchEvent(\"change\");\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n\t * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n\t * @property _dispatchAnimationEnd\n\t * @private\n\t * @type {Function}\n\t **/\n\tp._dispatchAnimationEnd = function(animation, frame, paused, next, end) {\n\t\tvar name = animation ? animation.name : null;\n\t\tif (this.hasEventListener(\"animationend\")) {\n\t\t\tvar evt = new createjs.Event(\"animationend\");\n\t\t\tevt.name = name;\n\t\t\tevt.next = next;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t\t// did the animation get changed in the event stack?:\n\t\tvar changed = (this._animation != animation || this._currentFrame != frame);\n\t\t// if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n\t\tif (!changed && !paused && this.paused) { this.currentAnimationFrame = end; changed = true; }\n\t\treturn changed;\n\t};\n\n\t/**\n\t * Moves the playhead to the specified frame number or animation.\n\t * @method _goto\n\t * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n\t * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n\t * @protected\n\t **/\n\tp._goto = function(frameOrAnimation, frame) {\n\t\tthis.currentAnimationFrame = 0;\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tvar data = this.spriteSheet.getAnimation(frameOrAnimation);\n\t\t\tif (data) {\n\t\t\t\tthis._animation = data;\n\t\t\t\tthis.currentAnimation = frameOrAnimation;\n\t\t\t\tthis._normalizeFrame(frame);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentAnimation = this._animation = null;\n\t\t\tthis._currentFrame = frameOrAnimation;\n\t\t\tthis._normalizeFrame();\n\t\t}\n\t};\n\n\n\tcreatejs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Shape.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n\t * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n\t * instances to display the same vector graphics with different positions or transforms.\n\t *\n\t * If the vector art will not\n\t * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n\t * rendering cost.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *      var shape = new createjs.Shape(graphics);\n\t *\n\t *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *\n\t * @class Shape\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n\t **/\n\tfunction Shape(graphics) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The graphics instance to display.\n\t\t * @property graphics\n\t\t * @type Graphics\n\t\t **/\n\t\tthis.graphics = graphics ? graphics : new createjs.Graphics();\n\t}\n\tvar p = createjs.extend(Shape, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.graphics && !this.graphics.isEmpty());\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n\t * the draw was handled (useful for overriding functionality).\n\t *\n\t * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis.graphics.draw(ctx, this);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n\t * their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n\t * cloned. If false, the Graphics instance will be shared with the new Shape.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar g = (recursive && this.graphics) ? this.graphics.clone() : this.graphics;\n\t\treturn  this._cloneProps(new Shape(g));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shape (name=\"+  this.name +\")]\";\n\t};\n\n\n\tcreatejs.Shape = createjs.promote(Shape, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Text.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n\t * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n\t * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n\t *\n\t * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n\t * multiple font styles, you will need to create multiple text instances, and position them manually.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n\t *      text.x = 100;\n\t *      text.textBaseline = \"alphabetic\";\n\t *\n\t * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n\t * before it can be displayed.\n\t *\n\t * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n\t * browsers will render Text exactly the same.\n\t * @class Text\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {String} [text] The text to display.\n\t * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n\t * 36px Arial\").\n\t * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n\t * \"#F00\", \"red\", or \"#FF0000\").\n\t **/\n\tfunction Text(text, font, color) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t **/\n\t\tthis.text = text;\n\t\n\t\t/**\n\t\t * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n\t\t * @property font\n\t\t * @type String\n\t\t **/\n\t\tthis.font = font;\n\t\n\t\t/**\n\t\t * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n\t\t * It will also accept valid canvas fillStyle values.\n\t\t * @property color\n\t\t * @type String\n\t\t **/\n\t\tthis.color = color;\n\t\n\t\t/**\n\t\t * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n\t\t * information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"left\".\n\t\t * @property textAlign\n\t\t * @type String\n\t\t **/\n\t\tthis.textAlign = \"left\";\n\t\n\t\t/**\n\t\t * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n\t\t * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"top\".\n\t\t * @property textBaseline\n\t\t * @type String\n\t\t*/\n\t\tthis.textBaseline = \"top\";\n\t\n\t\t/**\n\t\t * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n\t\t * shrunk to make it fit in this width. For detailed information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t*/\n\t\tthis.maxWidth = null;\n\t\n\t\t/**\n\t\t * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n\t\t * @property outline\n\t\t * @type Number\n\t\t **/\n\t\tthis.outline = 0;\n\t\n\t\t/**\n\t\t * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n\t\t * the value of getMeasuredLineHeight is used.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n\t\t * the text will not be wrapped.\n\t\t * @property lineWidth\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineWidth = null;\n\t}\n\tvar p = createjs.extend(Text, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\n// static properties:\n\t/**\n\t * @property _workingContext\n\t * @type CanvasRenderingContext2D\n\t * @private\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) { Text._workingContext = canvas.getContext(\"2d\"); canvas.width = canvas.height = 1; }\n\t\n\t\n// constants:\n\t/**\n\t * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.H_OFFSETS = {start: 0, left: 0, center: -0.5, end: -1, right: -1};\n\t\n\t/**\n\t * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.V_OFFSETS = {top: 0, hanging: -0.01, middle: -0.4, alphabetic: -0.8, ideographic: -0.85, bottom: -1};\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.text != null && this.text !== \"\");\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\n\t\tvar col = this.color || \"#000\";\n\t\tif (this.outline) { ctx.strokeStyle = col; ctx.lineWidth = this.outline*1; }\n\t\telse { ctx.fillStyle = col; }\n\t\t\n\t\tthis._drawText(this._prepContext(ctx));\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n\t * @method getMeasuredWidth\n\t * @return {Number} The measured, untransformed width of the text.\n\t **/\n\tp.getMeasuredWidth = function() {\n\t\treturn this._getMeasuredWidth(this.text);\n\t};\n\n\t/**\n\t * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n\t * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n\t * @method getMeasuredLineHeight\n\t * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n\t * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n\t **/\n\tp.getMeasuredLineHeight = function() {\n\t\treturn this._getMeasuredWidth(\"M\")*1.2;\n\t};\n\n\t/**\n\t * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n\t * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n\t * this operation requires the text flowing logic to run, which has an associated CPU cost.\n\t * @method getMeasuredHeight\n\t * @return {Number} The approximate height of the untransformed multi-line text.\n\t **/\n\tp.getMeasuredHeight = function() {\n\t\treturn this._drawText(null,{}).height;\n\t};\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tif (this.text == null || this.text === \"\") { return null; }\n\t\tvar o = this._drawText(null, {});\n\t\tvar w = (this.maxWidth && this.maxWidth < o.width) ? this.maxWidth : o.width;\n\t\tvar x = w * Text.H_OFFSETS[this.textAlign||\"left\"];\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\tvar y = lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._rectangle.setValues(x, y, w, o.height);\n\t};\n\t\n\t/**\n\t * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n\t * of the drawn text. The lines property contains an array of strings, one for\n\t * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n\t * whitespace removed.\n\t * @method getMetrics\n\t * @return {Object} An object with width, height, and lines properties.\n\t **/\n\tp.getMetrics = function() {\n\t\tvar o = {lines:[]};\n\t\to.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n\t\to.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._drawText(null, o, o.lines);\n\t};\n\n\t/**\n\t * Returns a clone of the Text instance.\n\t * @method clone\n\t * @return {Text} a clone of the Text instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Text(this.text, this.font, this.color));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Text (text=\"+  (this.text.length > 20 ? this.text.substr(0, 17)+\"...\" : this.text) +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Text} o\n\t * @protected\n\t * @return {Text} o\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.textAlign = this.textAlign;\n\t\to.textBaseline = this.textBaseline;\n\t\to.maxWidth = this.maxWidth;\n\t\to.outline = this.outline;\n\t\to.lineHeight = this.lineHeight;\n\t\to.lineWidth = this.lineWidth;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _getWorkingContext\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {CanvasRenderingContext2D}\n\t * @protected\n\t **/\n\tp._prepContext = function(ctx) {\n\t\tctx.font = this.font||\"10px sans-serif\";\n\t\tctx.textAlign = this.textAlign||\"left\";\n\t\tctx.textBaseline = this.textBaseline||\"top\";\n\t\treturn ctx;\n\t};\n\n\t/**\n\t * Draws multiline text.\n\t * @method _drawText\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Object} o\n\t * @param {Array} lines\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._drawText = function(ctx, o, lines) {\n\t\tvar paint = !!ctx;\n\t\tif (!paint) {\n\t\t\tctx = Text._workingContext;\n\t\t\tctx.save();\n\t\t\tthis._prepContext(ctx);\n\t\t}\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\t\n\t\tvar maxW = 0, count = 0;\n\t\tvar hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n\t\tfor (var i=0, l=hardLines.length; i<l; i++) {\n\t\t\tvar str = hardLines[i];\n\t\t\tvar w = null;\n\t\t\t\n\t\t\tif (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n\t\t\t\t// text wrapping:\n\t\t\t\tvar words = str.split(/(\\s)/);\n\t\t\t\tstr = words[0];\n\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\n\t\t\t\tfor (var j=1, jl=words.length; j<jl; j+=2) {\n\t\t\t\t\t// Line needs to wrap:\n\t\t\t\t\tvar wordW = ctx.measureText(words[j] + words[j+1]).width;\n\t\t\t\t\tif (w + wordW > this.lineWidth) {\n\t\t\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\t\t\t\tif (lines) { lines.push(str); }\n\t\t\t\t\t\tif (w > maxW) { maxW = w; }\n\t\t\t\t\t\tstr = words[j+1];\n\t\t\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstr += words[j] + words[j+1];\n\t\t\t\t\t\tw += wordW;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\tif (lines) { lines.push(str); }\n\t\t\tif (o && w == null) { w = ctx.measureText(str).width; }\n\t\t\tif (w > maxW) { maxW = w; }\n\t\t\tcount++;\n\t\t}\n\t\t\n\t\tif (o) {\n\t\t\to.width = maxW;\n\t\t\to.height = count*lineHeight;\n\t\t}\n\t\tif (!paint) { ctx.restore(); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _drawTextLine\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {String} text\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tp._drawTextLine = function(ctx, text, y) {\n\t\t// Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n\t\tif (this.outline) { ctx.strokeText(text, 0, y, this.maxWidth||0xFFFF); }\n\t\telse { ctx.fillText(text, 0, y, this.maxWidth||0xFFFF); }\n\t};\n\t\n\t\n\t/**\n\t * @method _getMeasuredWidth\n\t * @param {String} text\n\t * @protected\n\t **/\n\tp._getMeasuredWidth = function(text) {\n\t\tvar ctx = Text._workingContext;\n\t\tctx.save();\n\t\tvar w = this._prepContext(ctx).measureText(text).width;\n\t\tctx.restore();\n\t\treturn w;\n\t};\n\n\n\tcreatejs.Text = createjs.promote(Text, \"DisplayObject\");\n}());\n\n//##############################################################################\n// BitmapText.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported\n\t * using new line characters, but automatic wrapping is not supported. See the \n\t * {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n\t * property for more information on defining glyphs.\n\t * \n\t * <strong>Important:</strong> BitmapText extends Container, but is not designed to be used as one.\n\t * As such, methods like addChild and removeChild are disabled.\n\t * @class BitmapText\n\t * @extends DisplayObject\n\t * @param {String} [text=\"\"] The text to display.\n\t * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n\t * @constructor\n\t **/\n\tfunction BitmapText(text, spriteSheet) {\n\t\tthis.Container_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t * @default \"\"\n\t\t **/\n\t\tthis.text = text||\"\";\n\t\t\n\t\t/**\n\t\t * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n\t\t * should have a single frame animation defined in the sprite sheet named the same as\n\t\t * corresponding character. For example, the following animation definition:\n\t\t *\n\t\t * \t\t\"A\": {frames: [0]}\n\t\t *\n\t\t * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n\t\t * is also acceptable:\n\t\t * \n\t\t * \t\t\"A\": 0\n\t\t *\n\t\t * Note that if a character in the text is not found in the sprite sheet, it will also\n\t\t * try to use the alternate case (upper or lower).\n\t\t *\n\t\t * See SpriteSheet for more information on defining sprite sheet data.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t * @default null\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * The height of each line of text. If 0, then it will use a line height calculated\n\t\t * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n\t\t * those characters are not defined, it will use the height of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * This spacing (in pixels) will be added after each character in the output.\n\t\t * @property letterSpacing\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.letterSpacing = 0;\n\t\n\t\t/**\n\t\t * If a space character is not defined in the sprite sheet, then empty pixels equal to\n\t\t * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n\t\t * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n\t\t * those characters are not defined, it will use the width of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property spaceWidth\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.spaceWidth = 0;\n\t\t\n\t\t\n\t// private properties:\n\t \t/**\n\t\t * @property _oldProps\n\t\t * @type Object\n\t\t * @protected\n\t\t **/\n\t\tthis._oldProps = {text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};\n\t}\n\tvar p = createjs.extend(BitmapText, createjs.Container);\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n// static properties:\n\t/**\n\t * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n\t * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n\t * retained, slightly increasing memory use, but reducing instantiation.\n\t * @property maxPoolSize\n\t * @type Number\n\t * @static\n\t * @default 100\n\t **/\n\tBitmapText.maxPoolSize = 100;\n\t\n\t/**\n\t * Sprite object pool.\n\t * @type {Array}\n\t * @static\n\t * @private\n\t */\n\tBitmapText._spritePool = [];\n\n\t\n// public methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return; }\n\t\tthis._updateText();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.getBounds = function() {\n\t\tthis._updateText();\n\t\treturn this.Container_getBounds();\n\t};\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.spriteSheet && this.spriteSheet.complete && this.text);\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n\t};\n\t\n\tp.clone = function() {\n\t\treturn this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n\t};\n\t\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeAllChildren\n\t **/\n\tp.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function() {};\n\n\n// private methods:\n \t/**\n\t * @method _cloneProps\n\t * @param {BitmapText} o\n\t * @return {BitmapText} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.Container__cloneProps(o);\n\t\to.lineHeight = this.lineHeight;\n\t\to.letterSpacing = this.letterSpacing;\n\t\to.spaceWidth = this.spaceWidth;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * @method _getFrameIndex\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getFrameIndex = function(character, spriteSheet) {\n\t\tvar c, o = spriteSheet.getAnimation(character);\n\t\tif (!o) {\n\t\t\t(character != (c = character.toUpperCase())) || (character != (c = character.toLowerCase())) || (c=null);\n\t\t\tif (c) { o = spriteSheet.getAnimation(c); }\n\t\t}\n\t\treturn o && o.frames[0];\n\t};\n\t\n\t/**\n\t * @method _getFrame\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._getFrame = function(character, spriteSheet) {\n\t\tvar index = this._getFrameIndex(character, spriteSheet);\n\t\treturn index == null ? index : spriteSheet.getFrame(index);\n\t};\n\t\n\t/**\n\t * @method _getLineHeight\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getLineHeight = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"T\",ss) || this._getFrame(\"L\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.height : 1;\n\t};\n\t/**\n\t * @method _getSpaceWidth\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getSpaceWidth = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"l\",ss) || this._getFrame(\"e\",ss) || this._getFrame(\"a\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.width : 1;\n\t};\n\t\n\t/**\n\t * @method _drawText\n\t * @protected\n\t **/\n\tp._updateText = function() {\n\t\tvar x=0, y=0, o=this._oldProps, change=false, spaceW=this.spaceWidth, lineH=this.lineHeight, ss=this.spriteSheet;\n\t\tvar pool=BitmapText._spritePool, kids=this.children, childIndex=0, numKids=kids.length, sprite;\n\t\t\n\t\tfor (var n in o) {\n\t\t\tif (o[n] != this[n]) {\n\t\t\t\to[n] = this[n];\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t}\n\t\tif (!change) { return; }\n\t\t\n\t\tvar hasSpace = !!this._getFrame(\" \", ss);\n\t\tif (!hasSpace && !spaceW) { spaceW = this._getSpaceWidth(ss); }\n\t\tif (!lineH) { lineH = this._getLineHeight(ss); }\n\t\t\n\t\tfor(var i=0, l=this.text.length; i<l; i++) {\n\t\t\tvar character = this.text.charAt(i);\n\t\t\tif (character == \" \" && !hasSpace) {\n\t\t\t\tx += spaceW;\n\t\t\t\tcontinue;\n\t\t\t} else if (character==\"\\n\" || character==\"\\r\") {\n\t\t\t\tif (character==\"\\r\" && this.text.charAt(i+1) == \"\\n\") { i++; } // crlf\n\t\t\t\tx = 0;\n\t\t\t\ty += lineH;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar index = this._getFrameIndex(character, ss);\n\t\t\tif (index == null) { continue; }\n\t\t\t\n\t\t\tif (childIndex < numKids) {\n\t\t\t\tsprite = kids[childIndex];\n\t\t\t} else {\n\t\t\t\tkids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n\t\t\t\tsprite.parent = this;\n\t\t\t\tnumKids++;\n\t\t\t}\n\t\t\tsprite.spriteSheet = ss;\n\t\t\tsprite.gotoAndStop(index);\n\t\t\tsprite.x = x;\n\t\t\tsprite.y = y;\n\t\t\tchildIndex++;\n\t\t\t\n\t\t\tx += sprite.getBounds().width + this.letterSpacing;\n\t\t}\n\t\twhile (numKids > childIndex) {\n\t\t\t // faster than removeChild.\n\t\t\tpool.push(sprite = kids.pop());\n\t\t\tsprite.parent = null;\n\t\t\tnumKids--;\n\t\t}\n\t\tif (pool.length > BitmapText.maxPoolSize) { pool.length = BitmapText.maxPoolSize; }\n\t};\n\n\n\tcreatejs.BitmapText = createjs.promote(BitmapText, \"Container\");\n}());\n\n//##############################################################################\n// MovieClip.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n\t * you to create objects which encapsulate timeline animations, state changes, and synched actions. Due to the\n\t * complexities inherent in correctly setting up a MovieClip, it is largely intended for tool output and is not included\n\t * in the main EaselJS library.\n\t *\n\t * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n\t * been made to support time-based timelines in the future.\n\t *\n\t * <h4>Example</h4>\n\t * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n\t * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvas\");\n\t *      createjs.Ticker.addEventListener(\"tick\", stage);\n\t *\n\t *      var mc = new createjs.MovieClip(null, 0, true, {start:20});\n\t *      stage.addChild(mc);\n\t *\n\t *      var child1 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#999999\")\n\t *              .drawCircle(30,30,30));\n\t *      var child2 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n\t *              .drawCircle(30,30,30));\n\t *\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child1)\n\t *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child2)\n\t *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n\t *\n\t *      mc.gotoAndPlay(\"start\");\n\t *\n\t * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n\t * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n\t * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n\t *\n\t * @class MovieClip\n\t * @main MovieClip\n\t * @extends Container\n\t * @constructor\n\t * @param {String} [mode=independent] Initial value for the mode property. One of {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}},\n\t * {{#crossLink \"MovieClip/SINGLE_FRAME:property\"}}{{/crossLink}}, or {{#crossLink \"MovieClip/SYNCHED:property\"}}{{/crossLink}}.\n\t * The default is {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}}.\n\t * @param {Number} [startPosition=0] Initial value for the {{#crossLink \"MovieClip/startPosition:property\"}}{{/crossLink}}\n\t * property.\n\t * @param {Boolean} [loop=true] Initial value for the {{#crossLink \"MovieClip/loop:property\"}}{{/crossLink}}\n\t * property. The default is `true`.\n\t * @param {Object} [labels=null] A hash of labels to pass to the {{#crossLink \"MovieClip/timeline:property\"}}{{/crossLink}}\n\t * instance associated with this MovieClip. Labels only need to be passed if they need to be used.\n\t **/\n\tfunction MovieClip(mode, startPosition, loop, labels) {\n\t\tthis.Container_constructor();\n\t\t!MovieClip.inited&&MovieClip.init(); // static init\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n\t\t * See each constant for a description of the behaviour.\n\t\t * @property mode\n\t\t * @type String\n\t\t * @default null\n\t\t **/\n\t\tthis.mode = mode||MovieClip.INDEPENDENT;\n\t\n\t\t/**\n\t\t * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n\t\t * @property startPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.startPosition = startPosition || 0;\n\t\n\t\t/**\n\t\t * Indicates whether this MovieClip should loop when it reaches the end of its timeline.\n\t\t * @property loop\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.loop = loop;\n\t\n\t\t/**\n\t\t * The current frame of the movieclip.\n\t\t * @property currentFrame\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n\t\t * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n\t\t * instances to the timeline.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n\t\t *      var mc = new createjs.MovieClip();\n\t\t *      mc.timeline.addTween(tween);\n\t\t *\n\t\t * Elements can be added and removed from the timeline by toggling an \"_off\" property\n\t\t * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n\t\t * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n\t\t * frame 1. You can use the \"visible\" property to achieve the same effect.\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({_off:false})\n\t\t *          .wait(1).to({_off:true})\n\t\t *          .wait(1).to({_off:false});\n\t\t *\n\t\t * @property timeline\n\t\t * @type Timeline\n\t\t * @default null\n\t\t */\n\t\tthis.timeline = new createjs.Timeline(null, labels, {paused:true, position:startPosition, useTicks:true});\n\t\n\t\t/**\n\t\t * If true, the MovieClip's position will not advance when ticked.\n\t\t * @property paused\n\t\t * @type Boolean\n\t\t * @default false\n\t\t */\n\t\tthis.paused = false;\n\t\n\t\t/**\n\t\t * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n\t\t * @property actionsEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.actionsEnabled = true;\n\t\n\t\t/**\n\t\t * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n\t\t * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n\t\t * <br><br>\n\t\t * For example, if you had a character animation with a \"body\" child MovieClip instance\n\t\t * with different costumes on each frame, you could set body.autoReset = false, so that\n\t\t * you can manually change the frame it is on, without worrying that it will be reset\n\t\t * automatically.\n\t\t * @property autoReset\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.autoReset = true;\n\t\t\n\t\t/**\n\t\t * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n\t\t * @property frameBounds\n\t\t * @type Array\n\t\t * @default null\n\t\t */\n\t\tthis.frameBounds = this.frameBounds||null; // TODO: Deprecated. This is for backwards support of FlashCC\n\t\t\n\t\t/**\n\t\t * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n\t\t * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis.framerate = null;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _synchOffset\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._synchOffset = 0;\n\t\n\t\t/**\n\t\t * @property _prevPos\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @private\n\t\t */\n\t\tthis._prevPos = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\t\n\t\t/**\n\t\t * @property _prevPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._prevPosition = 0;\n\t\n\t\t/**\n\t\t * The time remaining from the previous tick, only applicable when .framerate is set.\n\t\t * @property _t\n\t\t * @type Number\n\t\t * @private\n\t\t */\n\t\tthis._t = 0;\n\t\n\t\t/**\n\t\t * List of display objects that are actively being managed by the MovieClip.\n\t\t * @property _managed\n\t\t * @type Object\n\t\t * @private\n\t\t */\n\t\tthis._managed = {};\n\t}\n\tvar p = createjs.extend(MovieClip, createjs.Container);\n\n\n// constants:\n\t/**\n\t * The MovieClip will advance independently of its parent, even if its parent is paused.\n\t * This is the default mode.\n\t * @property INDEPENDENT\n\t * @static\n\t * @type String\n\t * @default \"independent\"\n\t * @readonly\n\t **/\n\tMovieClip.INDEPENDENT = \"independent\";\n\n\t/**\n\t * The MovieClip will only display a single frame (as determined by the startPosition property).\n\t * @property SINGLE_FRAME\n\t * @static\n\t * @type String\n\t * @default \"single\"\n\t * @readonly\n\t **/\n\tMovieClip.SINGLE_FRAME = \"single\";\n\n\t/**\n\t * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n\t * the parent MovieClip.\n\t * @property SYNCHED\n\t * @static\n\t * @type String\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tMovieClip.SYNCHED = \"synched\";\n\t\n\t\n// static properties:\n\tMovieClip.inited = false;\n\t\n\t\n// static methods:\n\tMovieClip.init = function() {\n\t\tif (MovieClip.inited) { return; }\n\t\t// plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n\t\tMovieClipPlugin.install();\n\t\tMovieClip.inited = true;\n\t};\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n\t * @method getLabels\n\t * @return {Array}\n\t * @deprecated\n\t **/\n\tp.getLabels = function() {\n\t\treturn this.timeline.getLabels();\n\t};\n\t\n\t/**\n\t * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n\t * @method getCurrentLabel\n\t * @return {String}\n\t * @deprecated\n\t **/\n\tp.getCurrentLabel = function() {\n\t\tthis._updateTimeline();\n\t\treturn this.timeline.getCurrentLabel();\n\t};\n\t\n\t/**\n\t * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n\t * @method getDuration\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp.getDuration = function() {\n\t\treturn this.timeline.duration;\n\t};\n\n\t/**\n\t * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n\t * Shortcut to TweenJS: Timeline.getLabels();\n\t * @property labels\n\t * @type {Array}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the name of the label on or immediately before the current frame. See TweenJS: Timeline.getCurrentLabel()\n\t * for more information.\n\t * @property currentLabel\n\t * @type {String}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks. Identical to {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}}\n\t * and provided for Flash API compatibility.\n\t * @property totalFrames\n\t * @type {Number}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks.\n\t * @property duration\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlabels: { get: p.getLabels },\n\t\t\tcurrentLabel: { get: p.getCurrentLabel },\n\t\t\ttotalFrames: { get: p.getDuration },\n\t\t\tduration: { get: p.getDuration }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of FlashCC\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\t// children are placed in draw, so we can't determine if we have content.\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// draw to cache first:\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._updateTimeline();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Sets paused to false.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * Sets paused to true.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to false.\n\t * @method gotoAndPlay\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t **/\n\tp.gotoAndPlay = function(positionOrLabel) {\n\t\tthis.paused = false;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to true.\n\t * @method gotoAndStop\n\t * @param {String|Number} positionOrLabel The animation or frame name to go to.\n\t **/\n\tp.gotoAndStop = function(positionOrLabel) {\n\t\tthis.paused = true;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\t// TODO: should we worry at all about clips who change their own modes via frame scripts?\n\t\tvar independent = MovieClip.INDEPENDENT;\n\t\tif (this.mode != independent) { return; }\n\t\t\n\t\tvar o=this, fps = o.framerate;\n\t\twhile ((o = o.parent) && fps == null) {\n\t\t\tif (o.mode == independent) { fps = o._framerate; }\n\t\t}\n\t\tthis._framerate = fps;\n\t\t\n\t\tvar t = (fps != null && fps != -1 && time != null) ? time/(1000/fps) + this._t : 1;\n\t\tvar frames = t|0;\n\t\tthis._t = t-frames; // leftover time\n\t\t\n\t\twhile (!this.paused && frames--) {\n\t\t\tthis._prevPosition = (this._prevPos < 0) ? 0 : this._prevPosition+1;\n\t\t\tthis._updateTimeline();\n\t\t}\n\t};\n\t\n\t/**\n\t * MovieClip instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\t// TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n\t\tthrow(\"MovieClip cannot be cloned.\")\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MovieClip (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tthis.advance(evtObj&&evtObj.delta);\n\t\tthis.Container__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _goto\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t * @protected\n\t **/\n\tp._goto = function(positionOrLabel) {\n\t\tvar pos = this.timeline.resolve(positionOrLabel);\n\t\tif (pos == null) { return; }\n\t\t// prevent _updateTimeline from overwriting the new position because of a reset:\n\t\tif (this._prevPos == -1) { this._prevPos = NaN; }\n\t\tthis._prevPosition = pos;\n\t\tthis._t = 0;\n\t\tthis._updateTimeline();\n\t};\n\t\n\t/**\n\t * @method _reset\n\t * @private\n\t **/\n\tp._reset = function() {\n\t\tthis._prevPos = -1;\n\t\tthis._t = this.currentFrame = 0;\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * @method _updateTimeline\n\t * @protected\n\t **/\n\tp._updateTimeline = function() {\n\t\tvar tl = this.timeline;\n\t\tvar synched = this.mode != MovieClip.INDEPENDENT;\n\t\ttl.loop = (this.loop==null) ? true : this.loop;\n\t\t\n\t\tvar pos = synched ? this.startPosition + (this.mode==MovieClip.SINGLE_FRAME?0:this._synchOffset) : (this._prevPos < 0 ? 0 : this._prevPosition);\n\t\tvar mode = synched || !this.actionsEnabled ? createjs.Tween.NONE : null;\n\t\t\n\t\t// pre-assign currentFrame so it is available to frame scripts:\n\t\tthis.currentFrame = tl._calcPosition(pos);\n\t\t\n\t\t// update timeline position, ignoring actions if this is a graphic.\n\t\ttl.setPosition(pos, mode);\n\n\t\tthis._prevPosition = tl._prevPosition;\n\t\tif (this._prevPos == tl._prevPos) { return; }\n\t\tthis.currentFrame = this._prevPos = tl._prevPos;\n\n\t\tfor (var n in this._managed) { this._managed[n] = 1; }\n\n\t\tvar tweens = tl._tweens;\n\t\tfor (var i=0, l=tweens.length; i<l; i++) {\n\t\t\tvar tween = tweens[i];\n\t\t\tvar target = tween._target;\n\t\t\tif (target == this || tween.passive) { continue; } // TODO: this assumes actions tween has this as the target. Valid?\n\t\t\tvar offset = tween._stepPosition;\n\n\t\t\tif (target instanceof createjs.DisplayObject) {\n\t\t\t\t// motion tween.\n\t\t\t\tthis._addManagedChild(target, offset);\n\t\t\t} else {\n\t\t\t\t// state tween.\n\t\t\t\tthis._setState(target.state, offset);\n\t\t\t}\n\t\t}\n\n\t\tvar kids = this.children;\n\t\tfor (i=kids.length-1; i>=0; i--) {\n\t\t\tvar id = kids[i].id;\n\t\t\tif (this._managed[id] == 1) {\n\t\t\t\tthis.removeChildAt(i);\n\t\t\t\tdelete(this._managed[id]);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _setState\n\t * @param {Array} state\n\t * @param {Number} offset\n\t * @protected\n\t **/\n\tp._setState = function(state, offset) {\n\t\tif (!state) { return; }\n\t\tfor (var i=state.length-1;i>=0;i--) {\n\t\t\tvar o = state[i];\n\t\t\tvar target = o.t;\n\t\t\tvar props = o.p;\n\t\t\tfor (var n in props) { target[n] = props[n]; }\n\t\t\tthis._addManagedChild(target, offset);\n\t\t}\n\t};\n\n\t/**\n\t * Adds a child to the timeline, and sets it up as a managed child.\n\t * @method _addManagedChild\n\t * @param {MovieClip} child The child MovieClip to manage\n\t * @param {Number} offset\n\t * @private\n\t **/\n\tp._addManagedChild = function(child, offset) {\n\t\tif (child._off) { return; }\n\t\tthis.addChildAt(child,0);\n\n\t\tif (child instanceof MovieClip) {\n\t\t\tchild._synchOffset = offset;\n\t\t\t// TODO: this does not precisely match Flash. Flash loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n\t\t\tif (child.mode == MovieClip.INDEPENDENT && child.autoReset && !this._managed[child.id]) { child._reset(); }\n\t\t}\n\t\tthis._managed[child.id] = 2;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (!bounds) {\n\t\t\tthis._updateTimeline();\n\t\t\tif (this.frameBounds) { bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]); }\n\t\t}\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\treturn this.Container__getBounds(matrix, ignoreTransform);\n\t};\n\n\n\tcreatejs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n\n\n// MovieClipPlugin for TweenJS:\n\t/**\n\t * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n\t * property from tweening.\n\t * @private\n\t * @class MovieClipPlugin\n\t * @constructor\n\t **/\n\tfunction MovieClipPlugin() {\n\t\tthrow(\"MovieClipPlugin cannot be instantiated.\")\n\t}\n\t\n\t/**\n\t * @method priority\n\t * @private\n\t **/\n\tMovieClipPlugin.priority = 100; // very high priority, should run first\n\n\t/**\n\t * @method install\n\t * @private\n\t **/\n\tMovieClipPlugin.install = function() {\n\t\tcreatejs.Tween.installPlugin(MovieClipPlugin, [\"startPosition\"]);\n\t};\n\t\n\t/**\n\t * @method init\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {String|Number|Boolean} value\n\t * @private\n\t **/\n\tMovieClipPlugin.init = function(tween, prop, value) {\n\t\treturn value;\n\t};\n\t\n\t/**\n\t * @method step\n\t * @private\n\t **/\n\tMovieClipPlugin.step = function() {\n\t\t// unused.\n\t};\n\n\t/**\n\t * @method tween\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {String | Number | Boolean} value\n\t * @param {Array} startValues\n\t * @param {Array} endValues\n\t * @param {Number} ratio\n\t * @param {Object} wait\n\t * @param {Object} end\n\t * @return {*}\n\t */\n\tMovieClipPlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\n\t\tif (!(tween.target instanceof MovieClip)) { return value; }\n\t\treturn (ratio == 1 ? endValues[prop] : startValues[prop]);\n\t};\n\n}());\n\n//##############################################################################\n// SpriteSheetUtils.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\n\t * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\n\t * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\n\t * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\n\t * @class SpriteSheetUtils\n\t * @static\n\t **/\n\tfunction SpriteSheetUtils() {\n\t\tthrow \"SpriteSheetUtils cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _workingCanvas\n\t * @static\n\t * @type HTMLCanvasElement | Object\n\t * @protected\n\t*/\n\t/**\n\t * @property _workingContext\n\t * @static\n\t * @type CanvasRenderingContext2D\n\t * @protected\n\t*/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tSpriteSheetUtils._workingCanvas = canvas;\n\t\tSpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// public static methods:\n\t/**\n\t * <b>This is an experimental method, and may be buggy. Please report issues.</b><br/><br/>\n\t * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,\n\t * and adding appropriate animation & frame data. The flipped animations will have a suffix added to their names\n\t * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.\n\t * <br/><br/>\n\t * For example:<br/>\n\t * SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);\n\t * The above would add frames that are flipped horizontally AND frames that are flipped vertically.\n\t * <br/><br/>\n\t * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some\n\t * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,\n\t * which is why addFlippedFrames is available.\n\t * @method addFlippedFrames\n\t * @static\n\t * @param {SpriteSheet} spriteSheet\n\t * @param {Boolean} horizontal If true, horizontally flipped frames will be added.\n\t * @param {Boolean} vertical If true, vertically flipped frames will be added.\n\t * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.\n\t * @deprecated Modern browsers perform better when flipping via a transform (ex. scaleX=-1) rendering this obsolete.\n\t **/\n\tSpriteSheetUtils.addFlippedFrames = function(spriteSheet, horizontal, vertical, both) {\n\t\tif (!horizontal && !vertical && !both) { return; }\n\n\t\tvar count = 0;\n\t\tif (horizontal) { SpriteSheetUtils._flip(spriteSheet,++count,true,false); }\n\t\tif (vertical) { SpriteSheetUtils._flip(spriteSheet,++count,false,true); }\n\t\tif (both) { SpriteSheetUtils._flip(spriteSheet,++count,true,true); }\n\t};\n\n\t/**\n\t * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\n\t * to use a spritesheet frame as the source for a bitmap fill.\n\t *\n\t * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\n\t * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\n\t * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\n\t * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n\t *\n\t * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\n\t * @method extractFrame\n\t * @static\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\n\t * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\n\t * name is specified, only the first frame of the animation will be extracted.\n\t * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\n\t*/\n\tSpriteSheetUtils.extractFrame = function(spriteSheet, frameOrAnimation) {\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tframeOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\n\t\t}\n\t\tvar data = spriteSheet.getFrame(frameOrAnimation);\n\t\tif (!data) { return null; }\n\t\tvar r = data.rect;\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\tcanvas.width = r.width;\n\t\tcanvas.height = r.height;\n\t\tSpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\n\t\tvar img = document.createElement(\"img\");\n\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\treturn img;\n\t};\n\n\t/**\n\t * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed\n\t * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of\n\t * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings\n\t * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).\n\t * @method mergeAlpha\n\t * @static\n\t * @param {HTMLImageElement} rbgImage The image (or canvas) containing the RGB channels to use.\n\t * @param {HTMLImageElement} alphaImage The image (or canvas) containing the alpha channel to use.\n\t * @param {HTMLCanvasElement} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.\n\t * @return {HTMLCanvasElement} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.\n\t * @deprecated Tools such as ImageAlpha generally provide better results. This will be moved to sandbox in the future.\n\t*/\n\tSpriteSheetUtils.mergeAlpha = function(rgbImage, alphaImage, canvas) {\n\t\tif (!canvas) { canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\n\t\tcanvas.width = Math.max(alphaImage.width, rgbImage.width);\n\t\tcanvas.height = Math.max(alphaImage.height, rgbImage.height);\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.save();\n\t\tctx.drawImage(rgbImage,0,0);\n\t\tctx.globalCompositeOperation = \"destination-in\";\n\t\tctx.drawImage(alphaImage,0,0);\n\t\tctx.restore();\n\t\treturn canvas;\n\t};\n\n\n// private static methods:\n\tSpriteSheetUtils._flip = function(spriteSheet, count, h, v) {\n\t\tvar imgs = spriteSheet._images;\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\tvar ctx = SpriteSheetUtils._workingContext;\n\t\tvar il = imgs.length/count;\n\t\tfor (var i=0;i<il;i++) {\n\t\t\tvar src = imgs[i];\n\t\t\tsrc.__tmp = i; // a bit hacky, but faster than doing indexOf below.\n\t\t\tctx.setTransform(1,0,0,1,0,0);\n\t\t\tctx.clearRect(0,0,canvas.width+1,canvas.height+1);\n\t\t\tcanvas.width = src.width;\n\t\t\tcanvas.height = src.height;\n\t\t\tctx.setTransform(h?-1:1, 0, 0, v?-1:1, h?src.width:0, v?src.height:0);\n\t\t\tctx.drawImage(src,0,0);\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\t\t// work around a strange bug in Safari:\n\t\t\timg.width = src.width;\n\t\t\timg.height = src.height;\n\t\t\timgs.push(img);\n\t\t}\n\n\t\tvar frames = spriteSheet._frames;\n\t\tvar fl = frames.length/count;\n\t\tfor (i=0;i<fl;i++) {\n\t\t\tsrc = frames[i];\n\t\t\tvar rect = src.rect.clone();\n\t\t\timg = imgs[src.image.__tmp+il*count];\n\n\t\t\tvar frame = {image:img,rect:rect,regX:src.regX,regY:src.regY};\n\t\t\tif (h) {\n\t\t\t\trect.x = img.width-rect.x-rect.width; // update rect\n\t\t\t\tframe.regX = rect.width-src.regX; // update registration point\n\t\t\t}\n\t\t\tif (v) {\n\t\t\t\trect.y = img.height-rect.y-rect.height;  // update rect\n\t\t\t\tframe.regY = rect.height-src.regY; // update registration point\n\t\t\t}\n\t\t\tframes.push(frame);\n\t\t}\n\n\t\tvar sfx = \"_\"+(h?\"h\":\"\")+(v?\"v\":\"\");\n\t\tvar names = spriteSheet._animations;\n\t\tvar data = spriteSheet._data;\n\t\tvar al = names.length/count;\n\t\tfor (i=0;i<al;i++) {\n\t\t\tvar name = names[i];\n\t\t\tsrc = data[name];\n\t\t\tvar anim = {name:name+sfx,speed:src.speed,next:src.next,frames:[]};\n\t\t\tif (src.next) { anim.next += sfx; }\n\t\t\tframes = src.frames;\n\t\t\tfor (var j=0,l=frames.length;j<l;j++) {\n\t\t\t\tanim.frames.push(frames[j]+fl*count);\n\t\t\t}\n\t\t\tdata[anim.name] = anim;\n\t\t\tnames.push(anim.name);\n\t\t}\n\t};\n\n\n\tcreatejs.SpriteSheetUtils = SpriteSheetUtils;\n}());\n\n//##############################################################################\n// SpriteSheetBuilder.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n\t * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n\t * render them at run time as SpriteSheets for better performance.\n\t *\n\t * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n\t * without locking the UI.\n\t *\n\t * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n\t * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n\t * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n\t * @class SpriteSheetBuilder\n\t * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n\t * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction SpriteSheetBuilder(framerate) {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t * @default 2048\n\t\t*/\n\t\tthis.maxWidth = 2048;\n\t\n\t\t/**\n\t\t * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxHeight\n\t\t * @type Number\n\t\t * @default 2048\n\t\t **/\n\t\tthis.maxHeight = 2048;\n\t\n\t\t/**\n\t\t * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t **/\n\t\tthis.spriteSheet = null;\n\t\n\t\t/**\n\t\t * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n\t\t * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n\t\t * to the a specific device resolution (ex. tablet vs mobile).\n\t\t * @property scale\n\t\t * @type Number\n\t\t * @default 1\n\t\t **/\n\t\tthis.scale = 1;\n\t\n\t\t/**\n\t\t* The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n\t\t* @property padding\n\t\t* @type Number\n\t\t* @default 1\n\t\t**/\n\t\tthis.padding = 1;\n\t\n\t\t/**\n\t\t * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n\t\t * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n\t\t * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n\t\t * Defaults to 0.3.\n\t\t * @property timeSlice\n\t\t * @type Number\n\t\t * @default 0.3\n\t\t **/\n\t\tthis.timeSlice = 0.3;\n\t\n\t\t/**\n\t\t * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n\t\t * been initiated.\n\t\t * @property progress\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @readonly\n\t\t */\n\t\tthis.progress = -1;\n\n\t\t/**\n\t\t * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n\t\t * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t\t * framerate.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.framerate = framerate || 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = [];\n\t\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = {};\n\t\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._data = null;\n\t\n\t\t/**\n\t\t * @property _nextFrameIndex\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._nextFrameIndex = 0;\n\t\n\t\t/**\n\t\t * @property _index\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._index = 0;\n\t\n\t\t/**\n\t\t * @property _timerID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._timerID = null;\n\t\n\t\t/**\n\t\t * @property _scale\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._scale = 1;\n\t}\n\tvar p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// constants:\n\tSpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n\tSpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n// events:\n\t/**\n\t * Dispatched when a build completes.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when an asynchronous build has progress.\n\t * @event progress\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Number} progress The current progress value (0-1).\n\t * @since 0.6.0\n\t */\n\n\n// public methods:\n\t/**\n\t * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n\t * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n\t * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n\t * times, but manipulate it or its children to change it to generate different frames.\n\t *\n\t * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n\t * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n\t * and pass in the Container as the source.\n\t * @method addFrame\n\t * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n\t * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n\t * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n\t * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n\t **/\n\tp.addFrame = function(source, sourceRect, scale, setupFunction, setupData) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect) { return null; }\n\t\tscale = scale||1;\n\t\treturn this._frames.push({source:source, sourceRect:rect, scale:scale, funct:setupFunction, data:setupData, index:this._frames.length, height:rect.height*scale})-1;\n\t};\n\n\t/**\n\t * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n\t * @method addAnimation\n\t * @param {String} name The name for the animation.\n\t * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n\t * that played frame indexes 3, 6, and 5 in that order.\n\t * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n\t * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n\t * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n\t * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n\t * the opposite effect.\n\t **/\n\tp.addAnimation = function(name, frames, next, speed) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._animations[name] = {frames:frames, next:next, speed:speed};\n\t};\n\n\t/**\n\t * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n\t * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n\t * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n\t * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n\t * frame index 10 to 14.\n\t *\n\t * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n\t * set to `false`, ending on the last frame.\n\t * @method addMovieClip\n\t * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n\t * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n\t * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n\t * found, the MovieClip will be skipped.\n\t * @param {Number} [scale=1] The scale to draw the movie clip at.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n\t * with three parameters: the source, setupData, and the frame index.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n\t * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n\t * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n\t **/\n\tp.addMovieClip = function(source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rects = source.frameBounds;\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect && !rects) { return; }\n\n\t\tvar i, l, baseFrameIndex = this._frames.length;\n\t\tvar duration = source.timeline.duration;\n\t\tfor (i=0; i<duration; i++) {\n\t\t\tvar r = (rects&&rects[i]) ? rects[i] : rect;\n\t\t\tthis.addFrame(source, r, scale, this._setupMovieClipFrame, {i:i, f:setupFunction, d:setupData});\n\t\t}\n\t\tvar labels = source.timeline._labels;\n\t\tvar lbls = [];\n\t\tfor (var n in labels) {\n\t\t\tlbls.push({index:labels[n], label:n});\n\t\t}\n\t\tif (lbls.length) {\n\t\t\tlbls.sort(function(a,b){ return a.index-b.index; });\n\t\t\tfor (i=0,l=lbls.length; i<l; i++) {\n\t\t\t\tvar label = lbls[i].label;\n\t\t\t\tvar start = baseFrameIndex+lbls[i].index;\n\t\t\t\tvar end = baseFrameIndex+((i == l-1) ? duration : lbls[i+1].index);\n\t\t\t\tvar frames = [];\n\t\t\t\tfor (var j=start; j<end; j++) { frames.push(j); }\n\t\t\t\tif (labelFunction) {\n\t\t\t\t\tlabel = labelFunction(label, source, start, end);\n\t\t\t\t\tif (!label) { continue; }\n\t\t\t\t}\n\t\t\t\tthis.addAnimation(label, frames, true); // for now, this loops all animations.\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n\t * @method build\n\t * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n\t * occurred.\n\t **/\n\tp.build = function() {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._startBuild();\n\t\twhile (this._drawNext()) {}\n\t\tthis._endBuild();\n\t\treturn this.spriteSheet;\n\t};\n\n\t/**\n\t * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n\t * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n\t * specified callback.\n\t * @method buildAsync\n\t * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n\t **/\n\tp.buildAsync = function(timeSlice) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis.timeSlice = timeSlice;\n\t\tthis._startBuild();\n\t\tvar _this = this;\n\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50);\n\t};\n\n\t/**\n\t * Stops the current asynchronous build.\n\t * @method stopAsync\n\t **/\n\tp.stopAsync = function() {\n\t\tclearTimeout(this._timerID);\n\t\tthis._data = null;\n\t};\n\n\t/**\n\t * SpriteSheetBuilder instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheetBuilder cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheetBuilder]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _startBuild\n\t * @protected\n\t **/\n\tp._startBuild = function() {\n\t\tvar pad = this.padding||0;\n\t\tthis.progress = 0;\n\t\tthis.spriteSheet = null;\n\t\tthis._index = 0;\n\t\tthis._scale = this.scale;\n\t\tvar dataFrames = [];\n\t\tthis._data = {\n\t\t\timages: [],\n\t\t\tframes: dataFrames,\n\t\t\tframerate: this.framerate,\n\t\t\tanimations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n\t\t};\n\n\t\tvar frames = this._frames.slice();\n\t\tframes.sort(function(a,b) { return (a.height<=b.height) ? -1 : 1; });\n\n\t\tif (frames[frames.length-1].height+pad*2 > this.maxHeight) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\tvar y=0, x=0;\n\t\tvar img = 0;\n\t\twhile (frames.length) {\n\t\t\tvar o = this._fillRow(frames, y, img, dataFrames, pad);\n\t\t\tif (o.w > x) { x = o.w; }\n\t\t\ty += o.h;\n\t\t\tif (!o.h || !frames.length) {\n\t\t\t\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = this._getSize(x,this.maxWidth);\n\t\t\t\tcanvas.height = this._getSize(y,this.maxHeight);\n\t\t\t\tthis._data.images[img] = canvas;\n\t\t\t\tif (!o.h) {\n\t\t\t\t\tx=y=0;\n\t\t\t\t\timg++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @method _setupMovieClipFrame\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._setupMovieClipFrame = function(source, data) {\n\t\tvar ae = source.actionsEnabled;\n\t\tsource.actionsEnabled = false;\n\t\tsource.gotoAndStop(data.i);\n\t\tsource.actionsEnabled = ae;\n\t\tdata.f&&data.f(source, data.d, data.i);\n\t};\n\n\t/**\n\t * @method _getSize\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._getSize = function(size,max) {\n\t\tvar pow = 4;\n\t\twhile (Math.pow(2,++pow) < size){}\n\t\treturn Math.min(max,Math.pow(2,pow));\n\t};\n\n\t/**\n\t * @method _fillRow\n\t * @param {Array} frames\n\t * @param {Number} y\n\t * @param {HTMLImageElement} img\n\t * @param {Object} dataFrames\n\t * @param {Number} pad\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._fillRow = function(frames, y, img, dataFrames, pad) {\n\t\tvar w = this.maxWidth;\n\t\tvar maxH = this.maxHeight;\n\t\ty += pad;\n\t\tvar h = maxH-y;\n\t\tvar x = pad;\n\t\tvar height = 0;\n\t\tfor (var i=frames.length-1; i>=0; i--) {\n\t\t\tvar frame = frames[i];\n\t\t\tvar sc = this._scale*frame.scale;\n\t\t\tvar rect = frame.sourceRect;\n\t\t\tvar source = frame.source;\n\t\t\tvar rx = Math.floor(sc*rect.x-pad);\n\t\t\tvar ry = Math.floor(sc*rect.y-pad);\n\t\t\tvar rh = Math.ceil(sc*rect.height+pad*2);\n\t\t\tvar rw = Math.ceil(sc*rect.width+pad*2);\n\t\t\tif (rw > w) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\t\tif (rh > h || x+rw > w) { continue; }\n\t\t\tframe.img = img;\n\t\t\tframe.rect = new createjs.Rectangle(x,y,rw,rh);\n\t\t\theight = height || rh;\n\t\t\tframes.splice(i,1);\n\t\t\tdataFrames[frame.index] = [x,y,rw,rh,img,Math.round(-rx+sc*source.regX-pad),Math.round(-ry+sc*source.regY-pad)];\n\t\t\tx += rw;\n\t\t}\n\t\treturn {w:x, h:height};\n\t};\n\n\t/**\n\t * @method _endBuild\n\t * @protected\n\t **/\n\tp._endBuild = function() {\n\t\tthis.spriteSheet = new createjs.SpriteSheet(this._data);\n\t\tthis._data = null;\n\t\tthis.progress = 1;\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * @method _run\n\t * @protected\n\t **/\n\tp._run = function() {\n\t\tvar ts = Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50;\n\t\tvar t = (new Date()).getTime()+ts;\n\t\tvar complete = false;\n\t\twhile (t > (new Date()).getTime()) {\n\t\t\tif (!this._drawNext()) { complete = true; break; }\n\t\t}\n\t\tif (complete) {\n\t\t\tthis._endBuild();\n\t\t} else {\n\t\t\tvar _this = this;\n\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-ts);\n\t\t}\n\t\tvar p = this.progress = this._index/this._frames.length;\n\t\tif (this.hasEventListener(\"progress\")) {\n\t\t\tvar evt = new createjs.Event(\"progress\");\n\t\t\tevt.progress = p;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t};\n\n\t/**\n\t * @method _drawNext\n\t * @protected\n\t * @return Boolean Returns false if this is the last draw.\n\t **/\n\tp._drawNext = function() {\n\t\tvar frame = this._frames[this._index];\n\t\tvar sc = frame.scale*this._scale;\n\t\tvar rect = frame.rect;\n\t\tvar sourceRect = frame.sourceRect;\n\t\tvar canvas = this._data.images[frame.img];\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tframe.funct&&frame.funct(frame.source, frame.data);\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\tctx.clip();\n\t\tctx.translate(Math.ceil(rect.x-sourceRect.x*sc), Math.ceil(rect.y-sourceRect.y*sc));\n\t\tctx.scale(sc,sc);\n\t\tframe.source.draw(ctx); // display object will draw itself.\n\t\tctx.restore();\n\t\treturn (++this._index) < this._frames.length;\n\t};\n\n\n\tcreatejs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// DOMElement.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n\t *\n\t * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n\t * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n\t * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n\t * drawn in front of or behind the canvas).\n\t *\n\t * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n\t * the DOM Object be added to a div that also contains the canvas so that they share the same position\n\t * on the page.\n\t *\n\t * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n\t * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n\t * content.\n\t *\n\t * <h4>Mouse Interaction</h4>\n\t *\n\t * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n\t * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n\t * the htmlElement (note, this does not support EventDispatcher)\n\t *\n\t *      var domElement = new createjs.DOMElement(htmlElement);\n\t *      domElement.htmlElement.onclick = function() {\n\t *          console.log(\"clicked\");\n\t *      }\n\t *\n\t * @class DOMElement\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n\t */\n\tfunction DOMElement(htmlElement) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\tif (typeof(htmlElement)==\"string\") { htmlElement = document.getElementById(htmlElement); }\n\t\tthis.mouseEnabled = false;\n\t\t\n\t\tvar style = htmlElement.style;\n\t\tstyle.position = \"absolute\";\n\t\tstyle.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The DOM object to manage.\n\t\t * @property htmlElement\n\t\t * @type HTMLElement\n\t\t */\n\t\tthis.htmlElement = htmlElement;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _oldMtx\n\t\t * @type Matrix2D\n\t\t * @protected\n\t\t */\n\t\tthis._oldProps = null;\n\t}\n\tvar p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t */\n\tp.isVisible = function() {\n\t\treturn this.htmlElement != null;\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t */\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// this relies on the _tick method because draw isn't called if the parent is not visible.\n\t\t// the actual update happens in _handleDrawEnd\n\t\treturn true;\n\t};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method cache\n\t */\n\tp.cache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method uncache\n\t */\n\tp.uncache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method updateCache\n\t */\n\tp.updateCache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method hitTest\n\t */\n\tp.hitTest = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToGlobal\n\t */\n\tp.localToGlobal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method globalToLocal\n\t */\n\tp.globalToLocal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToLocal\n\t */\n\tp.localToLocal = function() {};\n\n\t/**\n\t * DOMElement cannot be cloned. Throws an error.\n\t * @method clone\n\t */\n\tp.clone = function() {\n\t\tthrow(\"DOMElement cannot be cloned.\")\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[DOMElement (name=\"+  this.name +\")]\";\n\t};\n\n\t/**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event click\n\t */\n\n     /**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event dblClick\n\t */\n\n     /**\n      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t  * @event mousedown\n\t  */\n\n     /**\n      * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n      * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n      * @event mouseover\n\t  */\n\n     /**\n      * Not applicable to DOMElement.\n\t  * @event tick\n\t  */\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t */\n\tp._tick = function(evtObj) {\n\t\tvar stage = this.getStage();\n\t\tstage&&stage.on(\"drawend\", this._handleDrawEnd, this, true);\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _handleDrawEnd\n\t * @param {Event} evt\n\t * @protected\n\t */\n\tp._handleDrawEnd = function(evt) {\n\t\tvar o = this.htmlElement;\n\t\tif (!o) { return; }\n\t\tvar style = o.style;\n\t\t\n\t\tvar props = this.getConcatenatedDisplayProps(this._props), mtx = props.matrix;\n\t\t\n\t\tvar visibility = props.visible ? \"visible\" : \"hidden\";\n\t\tif (visibility != style.visibility) { style.visibility = visibility; }\n\t\tif (!props.visible) { return; }\n\t\t\n\t\tvar oldProps = this._oldProps, oldMtx = oldProps&&oldProps.matrix;\n\t\tvar n = 10000; // precision\n\t\t\n\t\tif (!oldMtx || !oldMtx.equals(mtx)) {\n\t\t\tvar str = \"matrix(\" + (mtx.a*n|0)/n +\",\"+ (mtx.b*n|0)/n +\",\"+ (mtx.c*n|0)/n +\",\"+ (mtx.d*n|0)/n +\",\"+ (mtx.tx+0.5|0);\n\t\t\tstyle.transform = style.WebkitTransform = style.OTransform = style.msTransform = str +\",\"+ (mtx.ty+0.5|0) +\")\";\n\t\t\tstyle.MozTransform = str +\"px,\"+ (mtx.ty+0.5|0) +\"px)\";\n\t\t\tif (!oldProps) { oldProps = this._oldProps = new createjs.DisplayProps(true, NaN); }\n\t\t\toldProps.matrix.copy(mtx);\n\t\t}\n\t\t\n\t\tif (oldProps.alpha != props.alpha) {\n\t\t\tstyle.opacity = \"\"+(props.alpha*n|0)/n;\n\t\t\toldProps.alpha = props.alpha;\n\t\t}\n\t};\n\n\n\tcreatejs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Filter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n\t * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n\t * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myInstance.filters = [\n\t *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n\t *          new createjs.BlurFilter(5, 5, 10)\n\t *      ];\n\t *      myInstance.cache(0,0, 100, 100);\n\t *\n\t * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n\t * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n\t * will cause an object to feather outwards, resulting in a margin around the shape.\n\t *\n\t * <h4>EaselJS Filters</h4>\n\t * EaselJS comes with a number of pre-built filters:\n\t * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n\t *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n\t *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n\t * </ul>\n\t *\n\t * @class Filter\n\t * @constructor\n\t **/\n\tfunction Filter() {}\n\tvar p = Filter.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// public methods:\n\t/**\n\t * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n\t * @method getBounds\n\t * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n\t * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n\t **/\n\tp.getBounds = function(rect) {\n\t\treturn rect;\n\t};\n\n\t/**\n\t * Applies the filter to the specified context.\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function(ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\t// this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\t\ttry {\n\t\t\tvar imageData = ctx.getImageData(x, y, width, height);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._applyFilter(imageData)) {\n\t\t\ttargetCtx.putImageData(imageData, targetX, targetY);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Filter]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Filter instance.\n\t * @method clone\n\t * @return {Filter} A clone of the current Filter instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Filter();\n\t};\n\t\n// private methods:\n\t/**\n\t * @method _applyFilter\n\t * @param {ImageData} imageData Target ImageData instance.\n\t * @return {Boolean}\n\t **/\n\tp._applyFilter = function(imageData) { return true; };\n\n\n\tcreatejs.Filter = Filter;\n}());\n\n//##############################################################################\n// BlurFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a box blur to DisplayObjects. Note that this filter is fairly CPU intensive, particularly if the quality is\n\t * set higher than 1.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n\t * method to account for the spread that the blur causes.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n\t *      shape.filters = [blurFilter];\n\t *      var bounds = blurFilter.getBounds();\n\t *\n\t *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class BlurFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n\t * @param {Number} [blurY=0] The vertical blur radius in pixels.\n\t * @param {Number} [quality=1] The number of blur iterations.\n\t **/\n\tfunction BlurFilter( blurX, blurY, quality) {\n\t\tif ( isNaN(blurX) || blurX < 0 ) blurX = 0;\n\t\tif ( isNaN(blurY) || blurY < 0 ) blurY = 0;\n\t\tif ( isNaN(quality) || quality < 1  ) quality = 1;\n\n\n\t\t// public properties:\n\t\t/**\n\t\t * Horizontal blur radius in pixels\n\t\t * @property blurX\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis.blurX = blurX | 0;\n\n\t\t/**\n\t\t * Vertical blur radius in pixels\n\t\t * @property blurY\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis.blurY = blurY | 0;\n\n\t\t/**\n\t\t * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n\t\t * smoother blur, but take twice as long to run.\n\t\t * @property quality\n\t\t * @default 1\n\t\t * @type Number\n\t\t **/\n\t\tthis.quality = quality | 0;\n\t}\n\tvar p = createjs.extend(BlurFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// constants:\n\t/**\n\t * Array of multiply values for blur calculations.\n\t * @property MUL_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n\t/**\n\t * Array of shift values for blur calculations.\n\t * @property SHG_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n// public methods:\n\t/** docced in super class **/\n\tp.getBounds = function (rect) {\n\t\tvar x = this.blurX|0, y = this.blurY| 0;\n\t\tif (x <= 0 && y <= 0) { return rect; }\n\t\tvar q = Math.pow(this.quality, 0.2);\n\t\treturn (rect || new createjs.Rectangle()).pad(x*q+1,y*q+1,x*q+1,y*q+1);\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new BlurFilter(this.blurX, this.blurY, this.quality);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[BlurFilter]\";\n\t};\n\n\n// private methods:\n\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\n\t\tvar radiusX = this.blurX >> 1;\n\t\tif (isNaN(radiusX) || radiusX < 0) return false;\n\t\tvar radiusY = this.blurY >> 1;\n\t\tif (isNaN(radiusY) || radiusY < 0) return false;\n\t\tif (radiusX == 0 && radiusY == 0) return false;\n\n\t\tvar iterations = this.quality;\n\t\tif (isNaN(iterations) || iterations < 1) iterations = 1;\n\t\titerations |= 0;\n\t\tif (iterations > 3) iterations = 3;\n\t\tif (iterations < 1) iterations = 1;\n\n\t\tvar px = imageData.data;\n\t\tvar x=0, y=0, i=0, p=0, yp=0, yi=0, yw=0, r=0, g=0, b=0, a=0, pr=0, pg=0, pb=0, pa=0;\n\n\t\tvar divx = (radiusX + radiusX + 1) | 0;\n\t\tvar divy = (radiusY + radiusY + 1) | 0;\n\t\tvar w = imageData.width | 0;\n\t\tvar h = imageData.height | 0;\n\n\t\tvar w1 = (w - 1) | 0;\n\t\tvar h1 = (h - 1) | 0;\n\t\tvar rxp1 = (radiusX + 1) | 0;\n\t\tvar ryp1 = (radiusY + 1) | 0;\n\n\t\tvar ssx = {r:0,b:0,g:0,a:0};\n\t\tvar sx = ssx;\n\t\tfor ( i = 1; i < divx; i++ )\n\t\t{\n\t\t\tsx = sx.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsx.n = ssx;\n\n\t\tvar ssy = {r:0,b:0,g:0,a:0};\n\t\tvar sy = ssy;\n\t\tfor ( i = 1; i < divy; i++ )\n\t\t{\n\t\t\tsy = sy.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsy.n = ssy;\n\n\t\tvar si = null;\n\n\n\t\tvar mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n\t\tvar stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n\t\tvar mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n\t\tvar sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n\n\t\twhile (iterations-- > 0) {\n\n\t\t\tyw = yi = 0;\n\t\t\tvar ms = mtx;\n\t\t\tvar ss = stx;\n\t\t\tfor (y = h; --y > -1;) {\n\t\t\t\tr = rxp1 * (pr = px[(yi) | 0]);\n\t\t\t\tg = rxp1 * (pg = px[(yi + 1) | 0]);\n\t\t\t\tb = rxp1 * (pb = px[(yi + 2) | 0]);\n\t\t\t\ta = rxp1 * (pa = px[(yi + 3) | 0]);\n\n\t\t\t\tsx = ssx;\n\n\t\t\t\tfor( i = rxp1; --i > -1; )\n\t\t\t\t{\n\t\t\t\t\tsx.r = pr;\n\t\t\t\t\tsx.g = pg;\n\t\t\t\t\tsx.b = pb;\n\t\t\t\t\tsx.a = pa;\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tfor( i = 1; i < rxp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tp = (yi + ((w1 < i ? w1 : i) << 2)) | 0;\n\t\t\t\t\tr += ( sx.r = px[p]);\n\t\t\t\t\tg += ( sx.g = px[p+1]);\n\t\t\t\t\tb += ( sx.b = px[p+2]);\n\t\t\t\t\ta += ( sx.a = px[p+3]);\n\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tsi = ssx;\n\t\t\t\tfor ( x = 0; x < w; x++ )\n\t\t\t\t{\n\t\t\t\t\tpx[yi++] = (r * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (g * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (b * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (a * ms) >>> ss;\n\n\t\t\t\t\tp = ((yw + ((p = x + radiusX + 1) < w1 ? p : w1)) << 2);\n\n\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\tsi = si.n;\n\n\t\t\t\t}\n\t\t\t\tyw += w;\n\t\t\t}\n\n\t\t\tms = mty;\n\t\t\tss = sty;\n\t\t\tfor (x = 0; x < w; x++) {\n\t\t\t\tyi = (x << 2) | 0;\n\n\t\t\t\tr = (ryp1 * (pr = px[yi])) | 0;\n\t\t\t\tg = (ryp1 * (pg = px[(yi + 1) | 0])) | 0;\n\t\t\t\tb = (ryp1 * (pb = px[(yi + 2) | 0])) | 0;\n\t\t\t\ta = (ryp1 * (pa = px[(yi + 3) | 0])) | 0;\n\n\t\t\t\tsy = ssy;\n\t\t\t\tfor( i = 0; i < ryp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tsy.r = pr;\n\t\t\t\t\tsy.g = pg;\n\t\t\t\t\tsy.b = pb;\n\t\t\t\t\tsy.a = pa;\n\t\t\t\t\tsy = sy.n;\n\t\t\t\t}\n\n\t\t\t\typ = w;\n\n\t\t\t\tfor( i = 1; i <= radiusY; i++ )\n\t\t\t\t{\n\t\t\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\t\t\tr += ( sy.r = px[yi]);\n\t\t\t\t\tg += ( sy.g = px[yi+1]);\n\t\t\t\t\tb += ( sy.b = px[yi+2]);\n\t\t\t\t\ta += ( sy.a = px[yi+3]);\n\n\t\t\t\t\tsy = sy.n;\n\n\t\t\t\t\tif( i < h1 )\n\t\t\t\t\t{\n\t\t\t\t\t\typ += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tyi = x;\n\t\t\t\tsi = ssy;\n\t\t\t\tif ( iterations > 0 )\n\t\t\t\t{\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpa = 255 / pa;\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss ) * pa;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn true;\n\t};\n\n\tcreatejs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMapFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n\t * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n\t *\n\t * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n\t * better performance.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n\t *\n\t *       var box = new createjs.Shape();\n\t *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n\t *       box.graphics.drawRect(0, 0, 100, 100);\n\t *       box.cache(0, 0, 100, 100);\n\t *\n\t *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *       bmp.filters = [\n\t *           new createjs.AlphaMapFilter(box.cacheCanvas)\n\t *       ];\n\t *       bmp.cache(0, 0, 100, 100);\n\t *       stage.addChild(bmp);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMapFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n\t * result. This should be exactly the same dimensions as the target.\n\t **/\n\tfunction AlphaMapFilter(alphaMap) {\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n\t\t * dimensions as the target.\n\t\t * @property alphaMap\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.alphaMap = alphaMap;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _alphaMap\n\t\t * @protected\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis._alphaMap = null;\n\t\t\n\t\t/**\n\t\t * @property _mapData\n\t\t * @protected\n\t\t * @type Uint8ClampedArray\n\t\t **/\n\t\tthis._mapData = null;\n\t}\n\tvar p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\tvar o = new AlphaMapFilter(this.alphaMap);\n\t\to._alphaMap = this._alphaMap;\n\t\to._mapData = this._mapData;\n\t\treturn o;\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMapFilter]\";\n\t};\n\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\t\tif (!this.alphaMap) { return true; }\n\t\tif (!this._prepAlphaMap()) { return false; }\n\t\t\n\t\t// TODO: update to support scenarios where the target has different dimensions.\n\t\tvar data = imageData.data;\n\t\tvar map = this._mapData;\n\t\tfor(var i=0, l=data.length; i<l; i += 4) { data[i + 3] = map[i] || 0; }\n\t\t\n\t\treturn true;\n\t};\n\n\t/**\n\t * @method _prepAlphaMap\n\t * @protected\n\t **/\n\tp._prepAlphaMap = function () {\n\t\tif (!this.alphaMap) { return false; }\n\t\tif (this.alphaMap == this._alphaMap && this._mapData) { return true; }\n\n\t\tthis._mapData = null;\n\t\tvar map = this._alphaMap = this.alphaMap;\n\t\tvar canvas = map;\n\t\tvar ctx;\n\t\tif (map instanceof HTMLCanvasElement) {\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t} else {\n\t\t\tcanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n\t\t\tcanvas.width = map.width;\n\t\t\tcanvas.height = map.height;\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\tctx.drawImage(map, 0, 0);\n\t\t}\n\n\t\ttry {\n\t\t\tvar imgData = ctx.getImageData(0, 0, map.width, map.height);\n\t\t} catch (e) {\n\t\t\t//if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tthis._mapData = imgData.data;\n\t\treturn true;\n\t};\n\n\n\tcreatejs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMaskFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n\t * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n\t * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n\t * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n\t *\n\t * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n\t *\n\t *      var box = new createjs.Shape();\n\t *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n\t *      box.graphics.drawRect(0, 0, 100, 100);\n\t *      box.cache(0, 0, 100, 100);\n\t *\n\t *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *      bmp.filters = [\n\t *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n\t *      ];\n\t *      bmp.cache(0, 0, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMaskFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} mask\n\t **/\n\tfunction AlphaMaskFilter(mask) {\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The image (or canvas) to use as the mask.\n\t\t * @property mask\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.mask = mask;\n\t}\n\tvar p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\n// public methods:\n\t/**\n\t * Applies the filter to the specified context.\n\t *\n\t * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n\t * correctly.</strong>\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\tif (!this.mask) { return true; }\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\n\t\ttargetCtx.save();\n\t\tif (ctx != targetCtx) {\n\t\t\t// TODO: support targetCtx and targetX/Y\n\t\t\t// clearRect, then draw the ctx in?\n\t\t\treturn false;\n\t\t}\n\n\t\ttargetCtx.globalCompositeOperation = \"destination-in\";\n\t\ttargetCtx.drawImage(this.mask, targetX, targetY);\n\t\ttargetCtx.restore();\n\t\treturn true;\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\treturn new AlphaMaskFilter(this.mask);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMaskFilter]\";\n\t};\n\n\n\tcreatejs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a color transform to DisplayObjects.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n\t * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      shape.filters = [\n\t *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n\t *      ];\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorFilter\n\t * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n\t * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n\t * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n\t * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n\t * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n\t * between -255 and 255.\n\t * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @constructor\n\t * @extends Filter\n\t **/\n\tfunction ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * Red channel multiplier.\n\t\t * @property redMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\t\n\t\t/**\n\t\t * Green channel multiplier.\n\t\t * @property greenMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\t\n\t\t/**\n\t\t * Blue channel multiplier.\n\t\t * @property blueMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\t\n\t\t/**\n\t\t * Alpha channel multiplier.\n\t\t * @property alphaMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\t\n\t\t/**\n\t\t * Red channel offset (added to value).\n\t\t * @property redOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.redOffset = redOffset || 0;\n\t\n\t\t/**\n\t\t * Green channel offset (added to value).\n\t\t * @property greenOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenOffset = greenOffset || 0;\n\t\n\t\t/**\n\t\t * Blue channel offset (added to value).\n\t\t * @property blueOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueOffset = blueOffset || 0;\n\t\n\t\t/**\n\t\t * Alpha channel offset (added to value).\n\t\t * @property alphaOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaOffset = alphaOffset || 0;\n\t}\n\tvar p = createjs.extend(ColorFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorFilter(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\n\t};\n\t\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) {\n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tdata[i] = data[i]*this.redMultiplier+this.redOffset;\n\t\t\tdata[i+1] = data[i+1]*this.greenMultiplier+this.greenOffset;\n\t\t\tdata[i+2] = data[i+2]*this.blueMultiplier+this.blueOffset;\n\t\t\tdata[i+3] = data[i+3]*this.alphaMultiplier+this.alphaOffset;\n\t\t}\n\t\treturn true;\n\t};\n\n\n\tcreatejs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorMatrix.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n\t * Most methods return the instance to facilitate chained calls.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n\t * for an example of how to use ColorMatrix to change a DisplayObject's color.\n\t * @class ColorMatrix\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @constructor\n\t **/\n\tfunction ColorMatrix(brightness, contrast, saturation, hue) {\n\t\tthis.setColor(brightness, contrast, saturation, hue);\n\t}\n\tvar p = ColorMatrix.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// constants:\n\t/**\n\t * Array of delta values for contrast calculations.\n\t * @property DELTA_INDEX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.DELTA_INDEX = [\n\t\t0,    0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1,  0.11,\n\t\t0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24,\n\t\t0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42,\n\t\t0.44, 0.46, 0.48, 0.5,  0.53, 0.56, 0.59, 0.62, 0.65, 0.68,\n\t\t0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98,\n\t\t1.0,  1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54,\n\t\t1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0,  2.12, 2.25,\n\t\t2.37, 2.50, 2.62, 2.75, 2.87, 3.0,  3.2,  3.4,  3.6,  3.8,\n\t\t4.0,  4.3,  4.7,  4.9,  5.0,  5.5,  6.0,  6.5,  6.8,  7.0,\n\t\t7.3,  7.5,  7.8,  8.0,  8.4,  8.7,  9.0,  9.4,  9.6,  9.8,\n\t\t10.0\n\t];\n\n\t/**\n\t * Identity matrix values.\n\t * @property IDENTITY_MATRIX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.IDENTITY_MATRIX = [\n\t\t1,0,0,0,0,\n\t\t0,1,0,0,0,\n\t\t0,0,1,0,0,\n\t\t0,0,0,1,0,\n\t\t0,0,0,0,1\n\t];\n\n\t/**\n\t * The constant length of a color matrix.\n\t * @property LENGTH\n\t * @type Number\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n\n// public methods:\n\t/**\n\t * Resets the instance with the specified values.\n\t * @method setColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.setColor = function(brightness,contrast,saturation,hue) {\n\t\treturn this.reset().adjustColor(brightness,contrast,saturation,hue);\n\t};\n\n\t/**\n\t * Resets the matrix to identity values.\n\t * @method reset\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.reset = function() {\n\t\treturn this.copy(ColorMatrix.IDENTITY_MATRIX);\n\t};\n\n\t/**\n\t * Shortcut method to adjust brightness, contrast, saturation and hue.\n\t * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n\t * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n\t * @method adjustColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustColor = function(brightness,contrast,saturation,hue) {\n\t\tthis.adjustHue(hue);\n\t\tthis.adjustContrast(contrast);\n\t\tthis.adjustBrightness(brightness);\n\t\treturn this.adjustSaturation(saturation);\n\t};\n\n\t/**\n\t * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n\t * Positive values will make the image brighter, negative values will make it darker.\n\t * @method adjustBrightness\n\t * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustBrightness = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,255);\n\t\tthis._multiplyMatrix([\n\t\t\t1,0,0,0,value,\n\t\t\t0,1,0,0,value,\n\t\t\t0,0,1,0,value,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the contrast of pixel color.\n\t * Positive values will increase contrast, negative values will decrease contrast.\n\t * @method adjustContrast\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustContrast = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x;\n\t\tif (value<0) {\n\t\t\tx = 127+value/100*127;\n\t\t} else {\n\t\t\tx = value%1;\n\t\t\tif (x == 0) {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[value];\n\t\t\t} else {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[(value<<0)]*(1-x)+ColorMatrix.DELTA_INDEX[(value<<0)+1]*x; // use linear interpolation for more granularity.\n\t\t\t}\n\t\t\tx = x*127+127;\n\t\t}\n\t\tthis._multiplyMatrix([\n\t\t\tx/127,0,0,0,0.5*(127-x),\n\t\t\t0,x/127,0,0,0.5*(127-x),\n\t\t\t0,0,x/127,0,0.5*(127-x),\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the color saturation of the pixel.\n\t * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n\t * @method adjustSaturation\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustSaturation = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x = 1+((value > 0) ? 3*value/100 : value/100);\n\t\tvar lumR = 0.3086;\n\t\tvar lumG = 0.6094;\n\t\tvar lumB = 0.0820;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR*(1-x)+x,lumG*(1-x),lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x)+x,lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x),lumB*(1-x)+x,0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\n\t/**\n\t * Adjusts the hue of the pixel color.\n\t * @method adjustHue\n\t * @param {Number} value A value between -180 & 180.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustHue = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,180)/180*Math.PI;\n\t\tvar cosVal = Math.cos(value);\n\t\tvar sinVal = Math.sin(value);\n\t\tvar lumR = 0.213;\n\t\tvar lumG = 0.715;\n\t\tvar lumB = 0.072;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR+cosVal*(1-lumR)+sinVal*(-lumR),lumG+cosVal*(-lumG)+sinVal*(-lumG),lumB+cosVal*(-lumB)+sinVal*(1-lumB),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(0.143),lumG+cosVal*(1-lumG)+sinVal*(0.140),lumB+cosVal*(-lumB)+sinVal*(-0.283),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(-(1-lumR)),lumG+cosVal*(-lumG)+sinVal*(lumG),lumB+cosVal*(1-lumB)+sinVal*(lumB),0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Concatenates (multiplies) the specified matrix with this one.\n\t * @method concat\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.concat = function(matrix) {\n\t\tmatrix = this._fixMatrix(matrix);\n\t\tif (matrix.length != ColorMatrix.LENGTH) { return this; }\n\t\tthis._multiplyMatrix(matrix);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this ColorMatrix.\n\t * @method clone\n\t * @return {ColorMatrix} A clone of this ColorMatrix.\n\t **/\n\tp.clone = function() {\n\t\treturn (new ColorMatrix()).copy(this);\n\t};\n\n\t/**\n\t * Return a length 25 (5x5) array instance containing this matrix's values.\n\t * @method toArray\n\t * @return {Array} An array holding this matrix's values.\n\t **/\n\tp.toArray = function() {\n\t\tvar arr = [];\n\t\tfor (var i= 0, l=ColorMatrix.LENGTH; i<l; i++) {\n\t\t\tarr[i] = this[i];\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Copy the specified matrix's values to this matrix.\n\t * @method copy\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.copy = function(matrix) {\n\t\tvar l = ColorMatrix.LENGTH;\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tthis[i] = matrix[i];\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrix]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _multiplyMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._multiplyMatrix = function(matrix) {\n\t\tvar i, j, k, col = [];\n\n\t\tfor (i=0;i<5;i++) {\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tcol[j] = this[j+i*5];\n\t\t\t}\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tvar val=0;\n\t\t\t\tfor (k=0;k<5;k++) {\n\t\t\t\t\tval += matrix[j+k*5]*col[k];\n\t\t\t\t}\n\t\t\t\tthis[j+i*5] = val;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n\t * @method _cleanValue\n\t * @param {Number} value The raw number\n\t * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n\t * @protected\n\t **/\n\tp._cleanValue = function(value, limit) {\n\t\treturn Math.min(limit,Math.max(-limit,value));\n\t};\n\n\t/**\n\t * Makes sure matrixes are 5x5 (25 long).\n\t * @method _fixMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._fixMatrix = function(matrix) {\n\t\tif (matrix instanceof ColorMatrix) { matrix = matrix.toArray(); }\n\t\tif (matrix.length < ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length,ColorMatrix.LENGTH));\n\t\t} else if (matrix.length > ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,ColorMatrix.LENGTH);\n\t\t}\n\t\treturn matrix;\n\t};\n\n\n\tcreatejs.ColorMatrix = ColorMatrix;\n}());\n\n//##############################################################################\n// ColorMatrixFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n\t * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n\t * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n\t *      shape.filters = [\n\t *          new createjs.ColorMatrixFilter(matrix)\n\t *      ];\n\t *\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorMatrixFilter\n\t * @constructor\n\t * @extends Filter\n\t * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t * class.\n\t **/\n\tfunction ColorMatrixFilter(matrix) {\n\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t\t * @property matrix\n\t\t * @type Array | ColorMatrix\n\t\t **/\n\t\tthis.matrix = matrix;\n\t}\n\tvar p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\n// public methods:\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrixFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorMatrixFilter(this.matrix);\n\t};\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) { \n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tvar r,g,b,a;\n\t\tvar mtx = this.matrix;\n\t\tvar m0 =  mtx[0],  m1 =  mtx[1],  m2 =  mtx[2],  m3 =  mtx[3],  m4 =  mtx[4];\n\t\tvar m5 =  mtx[5],  m6 =  mtx[6],  m7 =  mtx[7],  m8 =  mtx[8],  m9 =  mtx[9];\n\t\tvar m10 = mtx[10], m11 = mtx[11], m12 = mtx[12], m13 = mtx[13], m14 = mtx[14];\n\t\tvar m15 = mtx[15], m16 = mtx[16], m17 = mtx[17], m18 = mtx[18], m19 = mtx[19];\n\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tr = data[i];\n\t\t\tg = data[i+1];\n\t\t\tb = data[i+2];\n\t\t\ta = data[i+3];\n\t\t\tdata[i] = r*m0+g*m1+b*m2+a*m3+m4; // red\n\t\t\tdata[i+1] = r*m5+g*m6+b*m7+a*m8+m9; // green\n\t\t\tdata[i+2] = r*m10+g*m11+b*m12+a*m13+m14; // blue\n\t\t\tdata[i+3] = r*m15+g*m16+b*m17+a*m18+m19; // alpha\n\t\t}\n\t\treturn true;\n\t};\n\n\n\tcreatejs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n}());\n\n//##############################################################################\n// Touch.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n *\n * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n *\n * <h4>Example</h4>\n *\n *      var stage = new createjs.Stage(\"canvasId\");\n *      createjs.Touch.enable(stage);\n *\n * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n *\n *      createjs.Touch.disable(stage);\n *\n * @class Touch\n * @static\n **/\n\tfunction Touch() {\n\t\tthrow \"Touch cannot be instantiated\";\n\t}\n\n\n// public static methods:\n\t/**\n\t * Returns `true` if touch is supported in the current browser.\n\t * @method isSupported\n\t * @return {Boolean} Indicates whether touch is supported in the current browser.\n\t * @static\n\t **/\n\tTouch.isSupported = function() {\n\t\treturn\t!!(('ontouchstart' in window) // iOS & Android\n\t\t\t|| (window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0) // IE10\n\t\t\t|| (window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0)); // IE11+\n\t};\n\n\t/**\n\t * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n\t * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n\t * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n\t * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n\t * for more information.\n\t * @method enable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n\t * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n\t * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n\t * allowed when the user is interacting with the target canvas.\n\t * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n\t * @static\n\t **/\n\tTouch.enable = function(stage, singleTouch, allowDefault) {\n\t\tif (!stage || !stage.canvas || !Touch.isSupported()) { return false; }\n\t\tif (stage.__touch) { return true; }\n\n\t\t// inject required properties on stage:\n\t\tstage.__touch = {pointers:{}, multitouch:!singleTouch, preventDefault:!allowDefault, count:0};\n\n\t\t// note that in the future we may need to disable the standard mouse event model before adding\n\t\t// these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n\t\tif ('ontouchstart' in window) { Touch._IOS_enable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_enable(stage); }\n\t\treturn true;\n\t};\n\n\t/**\n\t * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n\t * @method disable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n\t * @static\n\t **/\n\tTouch.disable = function(stage) {\n\t\tif (!stage) { return; }\n\t\tif ('ontouchstart' in window) { Touch._IOS_disable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_disable(stage); }\n\t\t\n\t\tdelete stage.__touch;\n\t};\n\n\n// Private static methods:\n\t/**\n\t * @method _IOS_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IOS_handleEvent(stage,e); };\n\t\tcanvas.addEventListener(\"touchstart\", f, false);\n\t\tcanvas.addEventListener(\"touchmove\", f, false);\n\t\tcanvas.addEventListener(\"touchend\", f, false);\n\t\tcanvas.addEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_disable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tif (!canvas) { return; }\n\t\tvar f = stage.__touch.f;\n\t\tcanvas.removeEventListener(\"touchstart\", f, false);\n\t\tcanvas.removeEventListener(\"touchmove\", f, false);\n\t\tcanvas.removeEventListener(\"touchend\", f, false);\n\t\tcanvas.removeEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IOS_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault&&e.preventDefault(); }\n\t\tvar touches = e.changedTouches;\n\t\tvar type = e.type;\n\t\tfor (var i= 0,l=touches.length; i<l; i++) {\n\t\t\tvar touch = touches[i];\n\t\t\tvar id = touch.identifier;\n\t\t\tif (touch.target != stage.canvas) { continue; }\n\n\t\t\tif (type == \"touchstart\") {\n\t\t\t\tthis._handleStart(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchmove\") {\n\t\t\t\tthis._handleMove(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchend\" || type == \"touchcancel\") {\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IE_handleEvent(stage,e); };\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\tcanvas.addEventListener(\"MSPointerDown\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.msTouchAction = \"none\"; }\n\t\t} else {\n\t\t\tcanvas.addEventListener(\"pointerdown\", f, false);\n\t\t\twindow.addEventListener(\"pointermove\", f, false);\n\t\t\twindow.addEventListener(\"pointerup\", f, false);\n\t\t\twindow.addEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.touchAction = \"none\"; }\n\n\t\t}\n\t\tstage.__touch.activeIDs = {};\n\t};\n\n\t/**\n\t * @method _IE_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_disable = function(stage) {\n\t\tvar f = stage.__touch.f;\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\twindow.removeEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n\t\t\t}\n\t\t} else {\n\t\t\twindow.removeEventListener(\"pointermove\", f, false);\n\t\t\twindow.removeEventListener(\"pointerup\", f, false);\n\t\t\twindow.removeEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"pointerdown\", f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle.\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IE_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault && e.preventDefault(); }\n\t\tvar type = e.type;\n\t\tvar id = e.pointerId;\n\t\tvar ids = stage.__touch.activeIDs;\n\n\t\tif (type == \"MSPointerDown\" || type == \"pointerdown\") {\n\t\t\tif (e.srcElement != stage.canvas) { return; }\n\t\t\tids[id] = true;\n\t\t\tthis._handleStart(stage, id, e, e.pageX, e.pageY);\n\t\t} else if (ids[id]) { // it's an id we're watching\n\t\t\tif (type == \"MSPointerMove\" || type == \"pointermove\") {\n\t\t\t\tthis._handleMove(stage, id, e, e.pageX, e.pageY);\n\t\t\t} else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\"\n\t\t\t\t\t|| type == \"pointerup\" || type == \"pointercancel\") {\n\t\t\t\tdelete(ids[id]);\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleStart\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleStart = function(stage, id, e, x, y) {\n\t\tvar props = stage.__touch;\n\t\tif (!props.multitouch && props.count) { return; }\n\t\tvar ids = props.pointers;\n\t\tif (ids[id]) { return; }\n\t\tids[id] = true;\n\t\tprops.count++;\n\t\tstage._handlePointerDown(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleMove\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleMove = function(stage, id, e, x, y) {\n\t\tif (!stage.__touch.pointers[id]) { return; }\n\t\tstage._handlePointerMove(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleEnd\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @protected\n\t **/\n\tTouch._handleEnd = function(stage, id, e) {\n\t\t// TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n\t\tvar props = stage.__touch;\n\t\tvar ids = props.pointers;\n\t\tif (!ids[id]) { return; }\n\t\tprops.count--;\n\t\tstage._handlePointerUp(id, e, true);\n\t\tdelete(ids[id]);\n\t};\n\n\n\tcreatejs.Touch = Touch;\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of\n\t * the library.\n\t * @class EaselJS\n\t **/\n\tvar s = createjs.EaselJS = createjs.EaselJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"0.8.2\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:34 GMT\"; // injected by build process\n\n})();\n\n\n// WEBPACK FOOTER //\n// ./bower_components/EaselJS/lib/easeljs-0.8.2.combined.js","module.exports = require(\"./lib/preloadjs-0.6.2.combined.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// PreloadJS (bower component)\n// module id = 4\n// module chunks = 0","/*!\n* PreloadJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of the library.\n\t * @class PreloadJS\n\t **/\n\tvar s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type {String}\n\t * @static\n\t **/\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type {String}\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t * method gets called in the correct scope.\n\t *\n\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t *\n\t *      function myHandler(arg1, arg2) {\n\t *           // This gets called when myObject.myCallback is executed.\n\t *      }\n\t *\n\t * @method proxy\n\t * @param {Function} method The function to call\n\t * @param {Object} scope The scope to call the method name on\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t * @public\n\t * @static\n\t */\n\tcreatejs.proxy = function (method, scope) {\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\treturn function () {\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t};\n\t}\n\n}());\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n\t * @class ErrorEvent\n\t * @param {String} [title] The error title\n\t * @param {String} [message] The error description\n\t * @param {Object} [data] Additional error data\n\t * @constructor\n\t */\n\tfunction ErrorEvent(title, message, data) {\n\t\tthis.Event_constructor(\"error\");\n\n\t\t/**\n\t\t * The short error title, which indicates the type of error that occurred.\n\t\t * @property title\n\t\t * @type String\n\t\t */\n\t\tthis.title = title;\n\n\t\t/**\n\t\t * The verbose error message, containing details about the error.\n\t\t * @property message\n\t\t * @type String\n\t\t */\n\t\tthis.message = message;\n\n\t\t/**\n\t\t * Additional data attached to an error.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\n\n\tp.clone = function() {\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\n\t};\n\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\tonce&&evt.remove();\n\t\t\t}, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | String | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners) {\n\t\t\tvar arr = listeners[eventObj.type];\n\t\t\tif (!arr||!(l=arr.length)) { return; }\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function (scope) {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n\t * @class ProgressEvent\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n\t * a percentage (between 0 and 1), it can be omitted.\n\t * @todo Consider having this event be a \"fileprogress\" event as well\n\t * @constructor\n\t */\n\tfunction ProgressEvent(loaded, total) {\n\t\tthis.Event_constructor(\"progress\");\n\n\t\t/**\n\t\t * The amount that has been loaded (out of a total amount)\n\t\t * @property loaded\n\t\t * @type {Number}\n\t\t */\n\t\tthis.loaded = loaded;\n\n\t\t/**\n\t\t * The total \"size\" of the load.\n\t\t * @property total\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis.total = (total == null) ? 1 : total;\n\n\t\t/**\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\n\t};\n\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\n\n\t/**\n\t * Returns a clone of the ProgressEvent instance.\n\t * @method clone\n\t * @return {ProgressEvent} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\n\t};\n\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n\n}(window));\n\n//##############################################################################\n// json3.js\n//##############################################################################\n\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few utilities for interacting with the dom.\n\t * @class DomUtils\n\t */\n\tvar s = {};\n\n\ts.appendToHead = function (el) {\n\t\ts.getHead().appendChild(el)\n\t}\n\n\ts.getHead = function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}\n\n\ts.getBody = function () {\n\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\n\t}\n\n\tcreatejs.DomUtils = s;\n\n}());\n\n//##############################################################################\n// DataUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few data utilities for formatting different data types.\n\t * @class DataUtils\n\t */\n\tvar s = {};\n\n\t// static methods\n\t/**\n\t * Parse XML using the DOM. This is required when preloading XML or SVG.\n\t * @method parseXML\n\t * @param {String} text The raw text or XML that is loaded by XHR.\n\t * @param {String} type The mime type of the XML. Use \"text/xml\" for XML, and  \"image/svg+xml\" for SVG parsing.\n\t * @return {XML} An XML document\n\t * @static\n\t */\n\ts.parseXML = function (text, type) {\n\t\tvar xml = null;\n\t\t// CocoonJS does not support XML parsing with either method.\n\n\t\t// Most browsers will use DOMParser\n\t\t// IE fails on certain SVG files, so we have a fallback below.\n\t\ttry {\n\t\t\tif (window.DOMParser) {\n\t\t\t\tvar parser = new DOMParser();\n\t\t\t\txml = parser.parseFromString(text, type);\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// Fallback for IE support.\n\t\tif (!xml) {\n\t\t\ttry {\n\t\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\txml.async = false;\n\t\t\t\txml.loadXML(text);\n\t\t\t} catch (e) {\n\t\t\t\txml = null;\n\t\t\t}\n\t\t}\n\n\t\treturn xml;\n\t};\n\n\t/**\n\t * Parse a string into an Object.\n\t * @method parseJSON\n\t * @param {String} value The loaded JSON string\n\t * @returns {Object} A JavaScript object.\n\t */\n\ts.parseJSON = function (value) {\n\t\tif (value == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\treturn JSON.parse(value);\n\t\t} catch (e) {\n\t\t\t// TODO; Handle this with a custom error?\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\tcreatejs.DataUtils = s;\n\n}());\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n\t * @class LoadItem\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\tfunction LoadItem() {\n\t\t/**\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n\t\t * string (recommended), or an HTML tag.\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = null;\n\n\t\t/**\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\n\t\t * @property type\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n\t\t * @property id\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n\t\t * @property maintainOrder\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.maintainOrder = false;\n\n\t\t/**\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n\t\t * @property callback\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.callback = null;\n\n\t\t/**\n\t\t * An arbitrary data object, which is included with the loaded object.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.data = null;\n\n\t\t/**\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t * @property method\n\t\t * @type {String}\n\t\t * @default get\n\t\t */\n\t\tthis.method = createjs.LoadItem.GET;\n\n\t\t/**\n\t\t * An object hash of name/value pairs to send to the server.\n\t\t * @property values\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.values = null;\n\n\t\t/**\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n\t\t * default headers by including them in your headers object.\n\t\t * @property headers\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.headers = null;\n\n\t\t/**\n\t\t * Enable credentials for XHR requests.\n\t\t * @property withCredentials\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.withCredentials = false;\n\n\t\t/**\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n\t\t * based files (json, xml, text, css, js).\n\t\t * @property mimeType\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.mimeType = null;\n\n\t\t/**\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n\t\t * @property crossOrigin\n\t\t * @type {boolean}\n\t\t * @default Anonymous\n\t\t */\n\t\tthis.crossOrigin = null;\n\n\t\t/**\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t * @property loadTimeout\n\t\t * @type {Number}\n\t\t * @default 8000 (8 seconds)\n\t\t */\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t};\n\n\tvar p = LoadItem.prototype = {};\n\tvar s = LoadItem;\n\n\t/**\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t * @property LOAD_TIMEOUT_DEFAULT\n\t * @type {number}\n\t * @static\n\t */\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\n\n\t/**\n\t * Create a LoadItem.\n\t * <ul>\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n\t *     <li>LoadItem instances are returned as-is</li>\n\t *     <li>Objects are returned with any needed properties added</li>\n\t * </ul>\n\t * @method create\n\t * @param {LoadItem|String|Object} value The load item value\n\t * @returns {LoadItem|Object}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (typeof value == \"string\") {\n\t\t\tvar item = new LoadItem();\n\t\t\titem.src = value;\n\t\t\treturn item;\n\t\t} else if (value instanceof s) {\n\t\t\treturn value;\n\t\t} else if (value instanceof Object && value.src) {\n\t\t\tif (value.loadTimeout == null) {\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t\t}\n\t\t\treturn value;\n\t\t} else {\n\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t}\n\t};\n\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\tcreatejs.LoadItem = s;\n\n}());\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class RequestUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * The Regular Expression used to test file URLS for an absolute path.\n\t * @property ABSOLUTE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n\t/**\n\t * The Regular Expression used to test file URLS for a relative path.\n\t * @property RELATIVE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\n\n\t/**\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n\t * removed.\n\t * @property EXTENSION_PATT\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n\t/**\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n\t * <ul>\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n\t *     `//networkPath`)</li>\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n\t *     the file path is expected to follow the format `name.ext`.</li>\n\t * </ul>\n\t * @method parseURI\n\t * @param {String} path\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\n\t * property, which is the lowercase extension.\n\t * @static\n\t */\n\ts.parseURI = function (path) {\n\t\tvar info = {absolute: false, relative: false};\n\t\tif (path == null) { return info; }\n\n\t\t// Drop the query string\n\t\tvar queryIndex = path.indexOf(\"?\");\n\t\tif (queryIndex > -1) {\n\t\t\tpath = path.substr(0, queryIndex);\n\t\t}\n\n\t\t// Absolute\n\t\tvar match;\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\n\t\t\tinfo.absolute = true;\n\n\t\t\t// Relative\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\n\t\t\tinfo.relative = true;\n\t\t}\n\n\t\t// Extension\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\n\t\t\tinfo.extension = match[1].toLowerCase();\n\t\t}\n\t\treturn info;\n\t};\n\n\t/**\n\t * Formats an object into a query string for either a POST or GET request.\n\t * @method formatQueryString\n\t * @param {Object} data The data to convert to a query string.\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\n\t * @static\n\t */\n\ts.formatQueryString = function (data, query) {\n\t\tif (data == null) {\n\t\t\tthrow new Error('You must specify data.');\n\t\t}\n\t\tvar params = [];\n\t\tfor (var n in data) {\n\t\t\tparams.push(n + '=' + escape(data[n]));\n\t\t}\n\t\tif (query) {\n\t\t\tparams = params.concat(query);\n\t\t}\n\t\treturn params.join('&');\n\t};\n\n\t/**\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n\t * @method buildPath\n\t * @param {String} src The source path to add values to.\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n\t * path will be preserved.\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\n\t * @static\n\t */\n\ts.buildPath = function (src, data) {\n\t\tif (data == null) {\n\t\t\treturn src;\n\t\t}\n\n\t\tvar query = [];\n\t\tvar idx = src.indexOf('?');\n\n\t\tif (idx != -1) {\n\t\t\tvar q = src.slice(idx + 1);\n\t\t\tquery = query.concat(q.split('&'));\n\t\t}\n\n\t\tif (idx != -1) {\n\t\t\treturn src.slice(0, idx) + '?' + this.formatQueryString(data, query);\n\t\t} else {\n\t\t\treturn src + '?' + this.formatQueryString(data, query);\n\t\t}\n\t};\n\n\t/**\n\t * @method isCrossDomain\n\t * @param {LoadItem|Object} item A load item with a `src` property.\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\n\t * @static\n\t */\n\ts.isCrossDomain = function (item) {\n\t\tvar target = document.createElement(\"a\");\n\t\ttarget.href = item.src;\n\n\t\tvar host = document.createElement(\"a\");\n\t\thost.href = location.href;\n\n\t\tvar crossdomain = (target.hostname != \"\") &&\n\t\t\t\t\t\t  (target.port != host.port ||\n\t\t\t\t\t\t   target.protocol != host.protocol ||\n\t\t\t\t\t\t   target.hostname != host.hostname);\n\t\treturn crossdomain;\n\t};\n\n\t/**\n\t * @method isLocal\n\t * @param {LoadItem|Object} item A load item with a `src` property\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n\t * well.\n\t * @static\n\t */\n\ts.isLocal = function (item) {\n\t\tvar target = document.createElement(\"a\");\n\t\ttarget.href = item.src;\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\n\t};\n\n\t/**\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t * @method isBinary\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is binary.\n\t * @static\n\t */\n\ts.isBinary = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.AbstractLoader.IMAGE:\n\t\t\tcase createjs.AbstractLoader.BINARY:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLImageElement\n\t * @method isImageTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isImageTag = function(item) {\n\t\treturn item instanceof HTMLImageElement;\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLAudioElement\n\t * @method isAudioTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isAudioTag = function(item) {\n\t\tif (window.HTMLAudioElement) {\n\t\t\treturn item instanceof HTMLAudioElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLVideoElement\n\t * @method isVideoTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isVideoTag = function(item) {\n\t\tif (window.HTMLVideoElement) {\n\t\t\treturn item instanceof HTMLVideoElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n\t * @method isText\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is text.\n\t * @static\n\t */\n\ts.isText = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.AbstractLoader.TEXT:\n\t\t\tcase createjs.AbstractLoader.JSON:\n\t\t\tcase createjs.AbstractLoader.MANIFEST:\n\t\t\tcase createjs.AbstractLoader.XML:\n\t\t\tcase createjs.AbstractLoader.CSS:\n\t\t\tcase createjs.AbstractLoader.SVG:\n\t\t\tcase createjs.AbstractLoader.JAVASCRIPT:\n\t\t\tcase createjs.AbstractLoader.SPRITESHEET:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n\t * if it is an unusual extension.\n\t * @method getTypeByExtension\n\t * @param {String} extension The file extension to use to determine the load type.\n\t * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\n\t * the type can not be determined by the extension.\n\t * @static\n\t */\n\ts.getTypeByExtension = function (extension) {\n\t\tif (extension == null) {\n\t\t\treturn createjs.AbstractLoader.TEXT;\n\t\t}\n\n\t\tswitch (extension.toLowerCase()) {\n\t\t\tcase \"jpeg\":\n\t\t\tcase \"jpg\":\n\t\t\tcase \"gif\":\n\t\t\tcase \"png\":\n\t\t\tcase \"webp\":\n\t\t\tcase \"bmp\":\n\t\t\t\treturn createjs.AbstractLoader.IMAGE;\n\t\t\tcase \"ogg\":\n\t\t\tcase \"mp3\":\n\t\t\tcase \"webm\":\n\t\t\t\treturn createjs.AbstractLoader.SOUND;\n\t\t\tcase \"mp4\":\n\t\t\tcase \"webm\":\n\t\t\tcase \"ts\":\n\t\t\t\treturn createjs.AbstractLoader.VIDEO;\n\t\t\tcase \"json\":\n\t\t\t\treturn createjs.AbstractLoader.JSON;\n\t\t\tcase \"xml\":\n\t\t\t\treturn createjs.AbstractLoader.XML;\n\t\t\tcase \"css\":\n\t\t\t\treturn createjs.AbstractLoader.CSS;\n\t\t\tcase \"js\":\n\t\t\t\treturn createjs.AbstractLoader.JAVASCRIPT;\n\t\t\tcase 'svg':\n\t\t\t\treturn createjs.AbstractLoader.SVG;\n\t\t\tdefault:\n\t\t\t\treturn createjs.AbstractLoader.TEXT;\n\t\t}\n\t};\n\n\tcreatejs.RequestUtils = s;\n\n}());\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n\t * @class AbstractLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n\t * other, so this is a suggested directive.\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n\t * @extends EventDispatcher\n\t */\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\n\t\tthis.EventDispatcher_constructor();\n\n\t\t// public properties\n\t\t/**\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @property loaded\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.loaded = false;\n\n\t\t/**\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n\t\t * instead.\n\t\t * @property canceled\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.canceled = false;\n\n\t\t/**\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     var queue = new createjs.LoadQueue();\n\t\t *     queue.loadFile(\"largeImage.png\");\n\t\t *     queue.on(\"progress\", function() {\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\n\t\t *     });\n\t\t *\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = 0;\n\n\t\t/**\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n\t\t * supported types.\n\t\t * @property type\n\t\t * @type {String}\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n\t\t * can be overridden to provide custom formatting.\n\t\t *\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n\t\t * called in the current scope, as well as the success and error callbacks.\n\t\t *\n\t\t * <h4>Example asynchronous resultFormatter</h4>\n\t\t *\n\t\t * \tfunction _formatResult(loader) {\n\t\t * \t\treturn function(success, error) {\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n\t\t * \t\t\tsuccess(result);\n\t\t * \t\t}\n\t\t * \t}\n\t\t * @property resultFormatter\n\t\t * @type {Function}\n\t\t * @default null\n\t\t */\n\t\tthis.resultFormatter = null;\n\n\t\t// protected properties\n\t\t/**\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n\t\t * @property _item\n\t\t * @type {LoadItem|Object}\n\t\t * @private\n\t\t */\n\t\tif (loadItem) {\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\n\t\t} else {\n\t\t\tthis._item = null;\n\t\t}\n\n\t\t/**\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n\t\t * @property _preferXHR\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._preferXHR = preferXHR;\n\n\t\t/**\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n\t\t * @property _result\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._result = null;\n\n\t\t/**\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t * method, and passing `true`.\n\t\t * @property _rawResult\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._rawResult = null;\n\n\t\t/**\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _loadItems\n\t\t * @type {null}\n\t\t * @protected\n\t\t */\n\t\tthis._loadedItems = null;\n\n\t\t/**\n\t\t * The attribute the items loaded using tags use for the source.\n\t\t * @type {string}\n\t\t * @default null\n\t\t * @private\n\t\t */\n\t\tthis._tagSrcAttribute = null;\n\n\t\t/**\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n\t\t * @property _tag\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._tag = null;\n\t};\n\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n\tvar s = AbstractLoader;\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t/**\n\t * Defines a POST request, use for a method value when loading data.\n\t * @property POST\n\t * @type {string}\n\t * @default post\n\t * @static\n\t */\n\ts.POST = \"POST\";\n\n\t/**\n\t * Defines a GET request, use for a method value when loading data.\n\t * @property GET\n\t * @type {string}\n\t * @default get\n\t * @static\n\t */\n\ts.GET = \"GET\";\n\n\t/**\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.BINARY = \"binary\";\n\n\t/**\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n\t * &lt;style&gt; tag when loaded with tags.\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.CSS = \"css\";\n\n\t/**\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.IMAGE = \"image\";\n\n\t/**\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n\t * &lt;script&gt; tag.\n\t *\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n\t * only tag-loaded scripts are injected.\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JAVASCRIPT = \"javascript\";\n\n\t/**\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n\t * must contain a matching wrapper function.\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSON = \"json\";\n\n\t/**\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n\t * property is set to.\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSONP = \"jsonp\";\n\n\t/**\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.MANIFEST = \"manifest\";\n\n\t/**\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n\t * &lt;audio&gt; tag.\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SOUND = \"sound\";\n\n\t/**\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n\t * &lt;video&gt; tag.\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.VIDEO = \"video\";\n\n\t/**\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n\t * @property SPRITESHEET\n\t * @type {String}\n\t * @default spritesheet\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SPRITESHEET = \"spritesheet\";\n\n\t/**\n\t * The preload type for SVG files.\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SVG = \"svg\";\n\n\t/**\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n\t * loaded as raw text.\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.TEXT = \"text\";\n\n\t/**\n\t * The preload type for xml files. XML is loaded into an XML document.\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.XML = \"xml\";\n\n// Events\n\t/**\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event progress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n\t * @event loadstart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.1\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event error\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n\t * This enables loaders to maintain internal queues, and surface file load errors.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The even type (\"fileerror\")\n\t * @param {LoadItem|object} The item that encountered the error\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileload\")\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n\t * @event initialize\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"initialize\")\n\t * @param {AbstractLoader} loader The loader that has been initialized.\n\t */\n\n\n\t/**\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t * @method getItem\n\t * @return {Object} The manifest item that this loader is responsible for loading.\n\t * @since 0.6.0\n\t */\n\tp.getItem = function () {\n\t\treturn this._item;\n\t};\n\n\t/**\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n\t * event is dispatched.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n\t * data (if it exists).\n\t * @return {Object}\n\t * @since 0.6.0\n\t */\n\tp.getResult = function (raw) {\n\t\treturn raw ? this._rawResult : this._result;\n\t};\n\n\t/**\n\t * Return the `tag` this object creates or uses for loading.\n\t * @method getTag\n\t * @return {Object} The tag instance\n\t * @since 0.6.0\n\t */\n\tp.getTag = function () {\n\t\treturn this._tag;\n\t};\n\n\t/**\n\t * Set the `tag` this item uses for loading.\n\t * @method setTag\n\t * @param {Object} tag The tag instance\n\t * @since 0.6.0\n\t */\n\tp.setTag = function(tag) {\n\t  this._tag = tag;\n\t};\n\n\t/**\n\t * Begin loading the item. This method is required when using a loader by itself.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.on(\"complete\", handleComplete);\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n\t *      queue.load();\n\t *\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis._createRequest();\n\n\t\tthis._request.on(\"complete\", this, this);\n\t\tthis._request.on(\"progress\", this, this);\n\t\tthis._request.on(\"loadStart\", this, this);\n\t\tthis._request.on(\"abort\", this, this);\n\t\tthis._request.on(\"timeout\", this, this);\n\t\tthis._request.on(\"error\", this, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._request;\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._request.load();\n\t};\n\n\t/**\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n\t * the background), but events will not longer be dispatched.\n\t * @method cancel\n\t */\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis.destroy();\n\t};\n\n\t/**\n\t * Clean up the loader.\n\t * @method destroy\n\t */\n\tp.destroy = function() {\n\t\tif (this._request) {\n\t\t\tthis._request.removeAllEventListeners();\n\t\t\tthis._request.destroy();\n\t\t}\n\n\t\tthis._request = null;\n\n\t\tthis._item = null;\n\t\tthis._rawResult = null;\n\t\tthis._result = null;\n\n\t\tthis._loadItems = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to expose items it loads internally.\n\t * @method getLoadedItems\n\t * @return {Array} A list of the items loaded by the loader.\n\t * @since 0.6.0\n\t */\n\tp.getLoadedItems = function () {\n\t\treturn this._loadedItems;\n\t};\n\n\n\t// Private methods\n\t/**\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n\t * @method _createRequest\n\t * @protected\n\t */\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n\t/**\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n\t * by loaders that require tag loading.\n\t * @method _createTag\n\t * @param {String} src The tag source\n\t * @return {HTMLElement} The tag that was created\n\t * @protected\n\t */\n\tp._createTag = function(src) { return null; };\n\n\t/**\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendLoadStart\n\t * @protected\n\t */\n\tp._sendLoadStart = function () {\n\t\tif (this._isCanceled()) { return; }\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n\t * @method _sendProgress\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n\t * and <code>total</code> properties.\n\t * @protected\n\t */\n\tp._sendProgress = function (value) {\n\t\tif (this._isCanceled()) { return; }\n\t\tvar event = null;\n\t\tif (typeof(value) == \"number\") {\n\t\t\tthis.progress = value;\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\n\t\t} else {\n\t\t\tevent = value;\n\t\t\tthis.progress = value.loaded / value.total;\n\t\t\tevent.progress = this.progress;\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t}\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n\t * @method _sendComplete\n\t * @protected\n\t */\n\tp._sendComplete = function () {\n\t\tif (this._isCanceled()) { return; }\n\n\t\tthis.loaded = true;\n\n\t\tvar event = new createjs.Event(\"complete\");\n\t\tevent.rawResult = this._rawResult;\n\n\t\tif (this._result != null) {\n\t\t\tevent.result = this._result;\n\t\t}\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendError\n\t * @param {ErrorEvent} event The event object containing specific error properties.\n\t * @protected\n\t */\n\tp._sendError = function (event) {\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\n\t\tif (event == null) {\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n\t\t}\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n\t * do not cause issues after the queue has been cleaned up.\n\t * @method _isCanceled\n\t * @return {Boolean} If the loader has been canceled.\n\t * @protected\n\t */\n\tp._isCanceled = function () {\n\t\tif (window.createjs == null || this.canceled) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n\t * @property resultFormatter\n\t * @type Function\n\t * @return {Object} The formatted result\n\t * @since 0.6.0\n\t */\n\tp.resultFormatter = null;\n\n\t/**\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n\t * this method can be overridden for custom behaviours.\n\t * @method handleEvent\n\t * @param {Event} event The event that the internal request dispatches.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\n\t\t\t\tif (result instanceof Function) {\n\t\t\t\t\tresult.call(this,\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis._result =  result || this._rawResult;\n\t\t\t\t\tthis._sendComplete();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"progress\":\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\tbreak;\n\t\t\tcase \"error\":\n\t\t\t\tthis._sendError(event);\n\t\t\t\tbreak;\n\t\t\tcase \"loadstart\":\n\t\t\t\tthis._sendLoadStart();\n\t\t\t\tbreak;\n\t\t\tcase \"abort\":\n\t\t\tcase \"timeout\":\n\t\t\t\tif (!this._isCanceled()) {\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} result The formatted result\n\t * @private\n\t */\n\tp._resultFormatSuccess = function (result) {\n\t\tthis._result = result;\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} error The error event\n\t * @private\n\t */\n\tp._resultFormatFailed = function (event) {\n\t\tthis._sendError(event);\n\t};\n\n\t/**\n\t * @method buildPath\n\t * @protected\n\t * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\n\t * instead.\n\t */\n\tp.buildPath = function (src, data) {\n\t\treturn createjs.RequestUtils.buildPath(src, data);\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function () {\n\t\treturn \"[PreloadJS AbstractLoader]\";\n\t};\n\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n\t * handle HTML media elements, such as Video and Audio.\n\t * @class AbstractMediaLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n        this.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n\t// static properties\n\t// public methods\n\tp.load = function () {\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n\t\tif (!this._tag) {\n\t\t\tthis._tag = this._createTag(this._item.src);\n\t\t}\n\n\t\tthis._tag.preload = \"auto\";\n\t\tthis._tag.load();\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Creates a new tag for loading if it doesn't exist yet.\n\t * @method _createTag\n\t * @private\n\t */\n\tp._createTag = function () {};\n\n\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n        // Only exists for XHR\n        if (event.loader.setResponseType) {\n            event.loader.setResponseType(\"blob\");\n        }\n    };\n\n\t/**\n\t * The result formatter for media files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.onstalled = null;\n\t\tif (this._preferXHR) {\n            var URL = window.URL || window.webkitURL;\n            var result = loader.getResult(true);\n\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\n\t\t}\n\t\treturn loader.getTag();\n\t};\n\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n\t * hood to get data.\n\t * @class AbstractRequest\n\t * @param {LoadItem} item\n\t * @constructor\n\t */\n\tvar AbstractRequest = function (item) {\n\t\tthis._item = item;\n\t};\n\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n\t// public methods\n\t/**\n\t * Begin a load.\n\t * @method load\n\t */\n\tp.load =  function() {};\n\n\t/**\n\t * Clean up a request.\n\t * @method destroy\n\t */\n\tp.destroy = function() {};\n\n\t/**\n\t * Cancel an in-progress request.\n\t * @method cancel\n\t */\n\tp.cancel = function() {};\n\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n\t * @class TagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t */\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\t/**\n\t\t * The HTML tag instance that is used to load.\n\t\t * @property _tag\n\t\t * @type {HTMLElement}\n\t\t * @protected\n\t\t */\n\t\tthis._tag = tag;\n\n\t\t/**\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t * @property _tagSrcAttribute\n\t\t * @type {String}\n\t\t * @protected\n\t\t */\n\t\tthis._tagSrcAttribute = srcAttribute;\n\n\t\t/**\n\t\t * A method closure used for handling the tag load event.\n\t\t * @property _loadedHandler\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n\t\t/**\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n\t\t * @property _addedToDOM\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._addedToDOM = false;\n\n\t\t/**\n\t\t * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\n\t\t *\n\t\t * @type {null}\n\t\t * @private\n\t\t */\n\t\tthis._startTagVisibility = null;\n\t};\n\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n\t// public methods\n\tp.load = function () {\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._tag;\n\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._hideTag();\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\n\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n\t\tif (this._tag.parentNode == null) {\n\t\t\twindow.document.body.appendChild(this._tag);\n\t\t\tthis._addedToDOM = true;\n\t\t}\n\t};\n\n\tp.destroy = function() {\n\t\tthis._clean();\n\t\tthis._tag = null;\n\n\t\tthis.AbstractRequest_destroy();\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n\t * and LINK tags), but other cases may exist.\n\t * @method _handleReadyStateChange\n\t * @private\n\t */\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Handle any error events from the tag.\n\t * @method _handleError\n\t * @protected\n\t */\n\tp._handleError = function() {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(\"error\");\n\t};\n\n\t/**\n\t * Handle the tag's onload callback.\n\t * @method _handleTagComplete\n\t * @private\n\t */\n\tp._handleTagComplete = function () {\n\t\tthis._rawResult = this._tag;\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n\n\t\tthis._clean();\n\t\tthis._showTag();\n\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specified in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\n\t};\n\n\t/**\n\t * Remove event listeners, but don't destroy the request object\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function() {\n\t\tthis._tag.onload = null;\n\t\tthis._tag.onreadystatechange = null;\n\t\tthis._tag.onerror = null;\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\n\t\t}\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\tp._hideTag = function() {\n\t\tthis._startTagVisibility = this._tag.style.visibility;\n\t\tthis._tag.style.visibility = \"hidden\";\n\t};\n\n\tp._showTag = function() {\n\t\tthis._tag.style.visibility = this._startTagVisibility;\n\t};\n\n\t/**\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n\t * that is already in a load, but not complete.\n\t * @method _handleStalled\n\t * @private\n\t */\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n\t * @class MediaTagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t * @constructor\n\t */\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\tthis._tag = tag;\n\t\tthis._tagSrcAttribute = srcAttribute;\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\t};\n\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\tvar s = MediaTagRequest;\n\n\t// public methods\n\tp.load = function () {\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\n\t\tthis._stalledCallback = sc;\n\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleProgress = pc;\n\n\t\tthis._tag.addEventListener(\"stalled\", sc);\n\t\tthis._tag.addEventListener(\"progress\", pc);\n\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n\t\tthis.TagRequest_load();\n\t};\n\n\t// private methods\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\t/**\n\t * An XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t// protected methods\n\tp._clean = function () {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\n\n\t\tthis.TagRequest__clean();\n\t};\n\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n\n}());\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n\t * cross-domain loading.\n\t * @class XHRRequest\n\t * @constructor\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * for an overview of supported file properties.\n\t * @extends AbstractLoader\n\t */\n\tfunction XHRRequest (item) {\n\t\tthis.AbstractRequest_constructor(item);\n\n\t\t// protected properties\n\t\t/**\n\t\t * A reference to the XHR request used to load the content.\n\t\t * @property _request\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n\t\t * @private\n\t\t */\n\t\tthis._request = null;\n\n\t\t/**\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n\t\t * typically IE9).\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\t\tthis._loadTimeout = null;\n\n\t\t/**\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n\t\t * the version, so we use capabilities to make a best guess.\n\t\t * @property _xhrLevel\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._xhrLevel = 1;\n\n\t\t/**\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n\t\t * null until the file is loaded.\n\t\t * @property _response\n\t\t * @type {mixed}\n\t\t * @private\n\t\t */\n\t\tthis._response = null;\n\n\t\t/**\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n\t\t * want to access the raw content as it was loaded.\n\t\t * @property _rawResponse\n\t\t * @type {String|Object}\n\t\t * @private\n\t\t */\n\t\tthis._rawResponse = null;\n\n\t\tthis._canceled = false;\n\n\t\t// Setup our event handlers now.\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n\n\t\tif (!this._createXHR(item)) {\n\t\t\t//TODO: Throw error?\n\t\t}\n\t};\n\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n// static properties\n\t/**\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n\t * @property ACTIVEX_VERSIONS\n\t * @type {Array}\n\t * @since 0.4.2\n\t * @private\n\t */\n\tXHRRequest.ACTIVEX_VERSIONS = [\n\t\t\"Msxml2.XMLHTTP.6.0\",\n\t\t\"Msxml2.XMLHTTP.5.0\",\n\t\t\"Msxml2.XMLHTTP.4.0\",\n\t\t\"MSXML2.XMLHTTP.3.0\",\n\t\t\"MSXML2.XMLHTTP\",\n\t\t\"Microsoft.XMLHTTP\"\n\t];\n\n// Public methods\n\t/**\n\t * Look up the loaded result.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n\t *      HTML head.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>An binary arraybuffer loaded by XHR</li>\n\t * </ul>\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (raw) {\n\t\tif (raw && this._rawResponse) {\n\t\t\treturn this._rawResponse;\n\t\t}\n\t\treturn this._response;\n\t};\n\n\t// Overrides abstract method in AbstractRequest\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis._clean();\n\t\tthis._request.abort();\n\t};\n\n\t// Overrides abstract method in AbstractLoader\n\tp.load = function () {\n\t\tif (this._request == null) {\n\t\t\tthis._handleError();\n\t\t\treturn;\n\t\t}\n\n\t\t//Events\n\t\tif (this._request.addEventListener != null) {\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n\t\t} else {\n\t\t\t// IE9 support\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\n\t\t\tthis._request.onabort = this._handleAbortProxy;\n\t\t\tthis._request.onerror = this._handleErrorProxy;\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.onload = this._handleLoadProxy;\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\n\t\t}\n\n\t\t// Set up a timeout if we don't have XHR2\n\t\tif (this._xhrLevel == 1) {\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\t\t}\n\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n\t\ttry {\n\t\t\tif (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\n\t\t\t\tthis._request.send();\n\t\t\t} else if (this._item.method == createjs.AbstractLoader.POST) {\n\t\t\t\tthis._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n\t\t}\n\t};\n\n\tp.setResponseType = function (type) {\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n\t\tif (type === 'blob') {\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\n\t\t\tthis._responseType = type;\n\t\t}\n\t\tthis._request.responseType = type;\n\t};\n\n\t/**\n\t * Get all the response headers from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n\t * pair.\n\t * @method getAllResponseHeaders\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getAllResponseHeaders = function () {\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\n\t\t\treturn this._request.getAllResponseHeaders();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Get a specific response header from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\n\t * @method getResponseHeader\n\t * @param {String} header The header name to retrieve.\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getResponseHeader = function (header) {\n\t\tif (this._request.getResponseHeader instanceof Function) {\n\t\t\treturn this._request.getResponseHeader(header);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n// protected methods\n\t/**\n\t * The XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t/**\n\t * The XHR request has reported a load start.\n\t * @method _handleLoadStart\n\t * @param {Object} event The XHR loadStart event.\n\t * @private\n\t */\n\tp._handleLoadStart = function (event) {\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The XHR request has reported an abort event.\n\t * @method handleAbort\n\t * @param {Object} event The XHR abort event.\n\t * @private\n\t */\n\tp._handleAbort = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n\t};\n\n\t/**\n\t * The XHR request has reported an error event.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\n\t};\n\n\t/**\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\n\t * @method _handleReadyStateChange\n\t * @param {Object} event The XHR readyStateChange event.\n\t * @private\n\t */\n\tp._handleReadyStateChange = function (event) {\n\t\tif (this._request.readyState == 4) {\n\t\t\tthis._handleLoad();\n\t\t}\n\t};\n\n\t/**\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n\t * @method _handleLoad\n\t * @param {Object} event The XHR load event.\n\t * @private\n\t */\n\tp._handleLoad = function (event) {\n\t\tif (this.loaded) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loaded = true;\n\n\t\tvar error = this._checkError();\n\t\tif (error) {\n\t\t\tthis._handleError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._response = this._getResponse();\n\t\t// Convert arraybuffer back to blob\n\t\tif (this._responseType === 'arraybuffer') {\n\t\t\ttry {\n\t\t\t\tthis._response = new Blob([this._response]);\n\t\t\t} catch (e) {\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\n\t\t\t\t\tvar builder = new BlobBuilder();\n\t\t\t\t\tbuilder.append(this._response);\n\t\t\t\t\tthis._response = builder.getBlob();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\n\t};\n\n\t/**\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n\t * callback.\n\t * @method _handleTimeout\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n\t * @private\n\t */\n\tp._handleTimeout = function (event) {\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n\t};\n\n// Protected\n\t/**\n\t * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\n\t * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\n\t * @method _checkError\n\t * @return {int} If the request status returns an error code.\n\t * @private\n\t */\n\tp._checkError = function () {\n\t\t//LM: Probably need additional handlers here, maybe 501\n\t\tvar status = parseInt(this._request.status);\n\n\t\tswitch (status) {\n\t\t\tcase 404:   // Not Found\n\t\t\tcase 0:     // Not Loaded\n\t\t\t\treturn new Error(status);\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n\t * @method _getResponse\n\t * @private\n\t */\n\tp._getResponse = function () {\n\t\tif (this._response != null) {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tif (this._request.response != null) {\n\t\t\treturn this._request.response;\n\t\t}\n\n\t\t// Android 2.2 uses .responseText\n\t\ttry {\n\t\t\tif (this._request.responseText != null) {\n\t\t\t\treturn this._request.responseText;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n\t\ttry {\n\t\t\tif (this._request.responseXML != null) {\n\t\t\t\treturn this._request.responseXML;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n\t *      <li>XMLHttpRequest are created when available.</li>\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n\t *      <li>Text requests override the mime type if possible</li>\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n\t * @method _createXHR\n\t * @param {Object} item The requested item that is being loaded.\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\n\t * @private\n\t */\n\tp._createXHR = function (item) {\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\n\t\tvar crossdomain = createjs.RequestUtils.isCrossDomain(item);\n\t\tvar headers = {};\n\n\t\t// Create the request. Fallback to whatever support we have.\n\t\tvar req = null;\n\t\tif (window.XMLHttpRequest) {\n\t\t\treq = new XMLHttpRequest();\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n\t\t\t\treq = new XDomainRequest();\n\t\t\t}\n\t\t} else { // Old IE versions use a different approach\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\n\t\t\t\ttry {\n\t\t\t\t\treq = new ActiveXObject(axVersion);\n\t\t\t\t\tbreak;\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (req == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Default to utf-8 for Text requests.\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\n\t\t}\n\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\n\t\tif (item.mimeType && req.overrideMimeType) {\n\t\t\treq.overrideMimeType(item.mimeType);\n\t\t}\n\n\t\t// Determine the XHR level\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\n\n\t\tvar src = null;\n\t\tif (item.method == createjs.AbstractLoader.GET) {\n\t\t\tsrc = createjs.RequestUtils.buildPath(item.src, item.values);\n\t\t} else {\n\t\t\tsrc = item.src;\n\t\t}\n\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n\t\treq.open(item.method || createjs.AbstractLoader.GET, src, true);\n\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n\t\t\theaders[\"Origin\"] = location.origin;\n\t\t}\n\n\t\t// To send data we need to set the Content-type header)\n\t\tif (item.values && item.method == createjs.AbstractLoader.POST) {\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t}\n\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t}\n\n\t\tif (item.headers) {\n\t\t\tfor (var n in item.headers) {\n\t\t\t\theaders[n] = item.headers[n];\n\t\t\t}\n\t\t}\n\n\t\tfor (n in headers) {\n\t\t\treq.setRequestHeader(n, headers[n])\n\t\t}\n\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n\t\t\treq.withCredentials = item.withCredentials;\n\t\t}\n\n\t\tthis._request = req;\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * A request has completed (or failed or canceled), and needs to be disposed.\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function () {\n\t\tclearTimeout(this._loadTimeout);\n\n\t\tif (this._request.removeEventListener != null) {\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n\t\t} else {\n\t\t\tthis._request.onloadstart = null;\n\t\t\tthis._request.onprogress = null;\n\t\t\tthis._request.onabort = null;\n\t\t\tthis._request.onerror = null;\n\t\t\tthis._request.ontimeout = null;\n\t\t\tthis._request.onload = null;\n\t\t\tthis._request.onreadystatechange = null;\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS XHRRequest]\";\n\t};\n\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// LoadQueue.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n/*\n TODO: WINDOWS ISSUES\n * No error for HTML audio in IE 678\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n * No script complete handler in IE 67 TAGS (XHR is fine)\n * No XML/JSON in IE6 TAGS\n * Need to hide loading SVG in Opera TAGS\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n * SVG no load or failure in Opera XHR\n * Reported issues with IE7/8\n */\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n\t * a single file, or queue of files.\n\t *\n\t * <b>Creating a Queue</b><br />\n\t * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n\t * argument to false.\n\t *\n\t *      var queue = new createjs.LoadQueue(true);\n\t *\n\t * <b>Listening for Events</b><br />\n\t * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n\t * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n\t *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n\t *     files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n\t *     any file.</li>\n\t *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n\t *     changed.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n\t *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n\t * </ul>\n\t *\n\t *      queue.on(\"fileload\", handleFileLoad, this);\n\t *      queue.on(\"complete\", handleComplete, this);\n\t *\n\t * <b>Adding files and manifests</b><br />\n\t * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n\t * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n\t * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n\t * like.\n\t *\n\t *      queue.loadFile(\"filePath/file.jpg\");\n\t *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n\t *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n\t *\n\t *      // Use an external manifest\n\t *      queue.loadManifest(\"path/to/manifest.json\");\n\t *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n\t *\n\t * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n\t * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n\t * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n\t * `loadNow` argument of `true`.\n\t *\n\t *      queue.load();\n\t *\n\t * <b>File Types</b><br />\n\t * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n\t * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n\t * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n\t * <code>type</code> property with any manifest item.\n\t *\n\t *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.AbstractLoader.SOUND});\n\t *\n\t *      // Note that PreloadJS will not read a file extension from the query string\n\t *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.AbstractLoader.IMAGE});\n\t *\n\t * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n\t * <ul>\n\t *     <li>{{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n\t *     <li>{{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}: CSS files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n\t *     <li>{{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}: JSON data</li>\n\t *     <li>{{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n\t *     <li>{{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n\t *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n\t *     <li>{{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n\t *     <li>{{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n\t *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n\t *     <li>{{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}: SVG files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n     *     <li>{{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n\t *     <li>{{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}: XML data</li>\n\t * </ul>\n\t *\n\t * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to AbstractLoader for better\n\t * portability of loader classes, which can be used individually now. The properties on LoadQueue still exist, but\n\t * are deprecated.</em>\n\t *\n\t * <b>Handling Results</b><br />\n\t * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n\t * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n\t * formatted object that can be used immediately, including:\n\t * <ul>\n\t *     <li>Binary: The binary loaded result</li>\n\t *     <li>CSS: A &lt;link /&gt; tag</li>\n\t *     <li>Image: An &lt;img /&gt; tag</li>\n\t *     <li>JavaScript: A &lt;script /&gt; tag</li>\n\t *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n\t *     <li>Manifest: A JavaScript object.\n\t *     <li>Sound: An &lt;audio /&gt; tag</a>\n\t *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n\t *     <li>SVG: An &lt;object /&gt; tag</li>\n\t *     <li>Text: Raw text</li>\n     *     <li>Video: A Video DOM node</li>\n\t *     <li>XML: An XML DOM node</li>\n\t * </ul>\n\t *\n\t *      function handleFileLoad(event) {\n\t *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n\t *          var type = item.type;\n\t *\n\t *          // Add any images to the page body.\n\t *          if (type == createjs.LoadQueue.IMAGE) {\n\t *              document.body.appendChild(event.result);\n\t *          }\n\t *      }\n\t *\n\t * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n\t * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n\t * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n\t * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n\t *\n\t *      var image = queue.getResult(\"image\");\n\t *      document.body.appendChild(image);\n\t *\n\t * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n\t * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n\t * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n\t *\n\t *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n\t *\n\t * <b>Plugins</b><br />\n\t * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n\t * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n\t * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n\t *\n\t *      queue.installPlugin(createjs.Sound);\n\t *\n\t * <h4>Known Browser Issues</h4>\n\t * <ul>\n\t *     <li>Browsers without audio support can not load audio files.</li>\n\t *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n\t *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n\t *     than Chrome will continue to download in the background.</li>\n\t *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n\t *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n\t *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n\t *     XHR to work.</li>\n\t *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n\t *     canceled, although no events will be dispatched.</li>\n\t * </ul>\n\t *\n\t * @class LoadQueue\n\t * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n\t * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n\t * when necessary.\n\t * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n\t * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n\t * will not receive a base path.\n\t * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n\t * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n\t * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n\t * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n\t *\n\t * @constructor\n\t * @extends AbstractLoader\n\t */\n\tfunction LoadQueue (preferXHR, basePath, crossOrigin) {\n\t\tthis.AbstractLoader_constructor();\n\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis._plugins = [];\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _typeCallbacks\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._typeCallbacks = {};\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _extensionCallbacks\n\t\t * @type {null}\n\t\t * @private\n\t\t */\n\t\tthis._extensionCallbacks = {};\n\n\t\t/**\n\t\t * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n\t\t * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n\t\t * @property next\n\t\t * @type {LoadQueue}\n\t\t * @default null\n\t\t */\n\t\tthis.next = null;\n\n\t\t/**\n\t\t * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n\t\t * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n\t\t * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n\t\t * specified.\n\t\t *\n\t\t * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n\t\t * property on the load item, or by ensuring that only one connection can be open at a time using\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n\t\t * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n\t\t * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n\t\t *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n\t\t *      queue.loadManifest([\n\t\t *          \"script1.js\",\n\t\t *          \"script2.js\",\n\t\t *          \"image.png\", // Load any time\n\t\t *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n\t\t *          \"image3.png\",\n\t\t *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n\t\t *      ]);\n\t\t *\n\t\t * @property maintainScriptOrder\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.maintainScriptOrder = true;\n\n\t\t/**\n\t\t * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n\t\t * @property stopOnError\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.stopOnError = false;\n\n\t\t/**\n\t\t * The number of maximum open connections that a loadQueue tries to maintain. Please see\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n\t\t * @property _maxConnections\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._maxConnections = 1;\n\n\t\t/**\n\t\t * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n\t\t * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n\t\t * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n\t\t * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n\t\t * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n\t\t * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * Loaders can be removed from PreloadJS by simply not including them.\n\t\t *\n\t\t * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n\t\t * so that they are checked first.\n\t\t * @property _availableLoaders\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._availableLoaders = [\n\t\t\tcreatejs.ImageLoader,\n\t\t\tcreatejs.JavaScriptLoader,\n\t\t\tcreatejs.CSSLoader,\n\t\t\tcreatejs.JSONLoader,\n\t\t\tcreatejs.JSONPLoader,\n\t\t\tcreatejs.SoundLoader,\n\t\t\tcreatejs.ManifestLoader,\n\t\t\tcreatejs.SpriteSheetLoader,\n\t\t\tcreatejs.XMLLoader,\n\t\t\tcreatejs.SVGLoader,\n\t\t\tcreatejs.BinaryLoader,\n\t\t\tcreatejs.VideoLoader,\n\t\t\tcreatejs.TextLoader\n\t\t];\n\n\t\t/**\n\t\t * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n\t\t\t\t * @property _defaultLoaderLength\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._defaultLoaderLength = this._availableLoaders.length;\n\n\t\tthis.init(preferXHR, basePath, crossOrigin);\n\t}\n\n\tvar p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n\tvar s = LoadQueue;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t/**\n\t * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n\t * @method init\n\t * @param preferXHR\n\t * @param basePath\n\t * @param crossOrigin\n\t * @private\n\t */\n\tp.init = function (preferXHR, basePath, crossOrigin) {\n\n\t\t// public properties\n\t\t/**\n\t\t * @property useXHR\n\t\t * @type {Boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t * @deprecated Use preferXHR instead.\n\t\t */\n\t\tthis.useXHR = true;\n\n\t\t/**\n\t\t * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n\t\t * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n\t\t * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n\t\t * user-defined type.\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis.preferXHR = true; //TODO: Get/Set\n\t\tthis._preferXHR = true;\n\t\tthis.setPreferXHR(preferXHR);\n\n\t\t// protected properties\n\t\t/**\n\t\t * Whether the queue is currently paused or not.\n\t\t * @property _paused\n\t\t * @type {boolean}\n\t\t * @private\n\t\t */\n\t\tthis._paused = false;\n\n\t\t/**\n\t\t * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n\t\t * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n\t\t * as `http://`, or a relative path such as `../`.\n\t\t * @property _basePath\n\t\t * @type {String}\n\t\t * @private\n\t\t * @since 0.3.1\n\t\t */\n\t\tthis._basePath = basePath;\n\n\t\t/**\n\t\t * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n\t\t * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n\t\t * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n\t\t * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n\t\t * and \"Anonymous\".\n\t\t * @property _crossOrigin\n\t\t * @type {String}\n\t\t * @default \"\"\n\t\t * @private\n\t\t * @since 0.4.1\n\t\t */\n\t\tthis._crossOrigin = crossOrigin;\n\n\t\t/**\n\t\t * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n\t\t * file is requested.\n\t\t * @property _loadStartWasDispatched\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @private\n\t\t */\n\t\tthis._loadStartWasDispatched = false;\n\n\t\t/**\n\t\t * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n\t\t * using a script tag to do preloading.\n\t\t * @property _currentlyLoadingScript\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._currentlyLoadingScript = null;\n\n\t\t/**\n\t\t * An array containing the currently downloading files.\n\t\t * @property _currentLoads\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._currentLoads = [];\n\n\t\t/**\n\t\t * An array containing the queued items that have not yet started downloading.\n\t\t * @property _loadQueue\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueue = [];\n\n\t\t/**\n\t\t * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n\t\t * @property _loadQueueBackup\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueueBackup = [];\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * id.\n\t\t * @property _loadItemsById\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsById = {};\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * source.\n\t\t * @property _loadItemsBySrc\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsBySrc = {};\n\n\t\t/**\n\t\t * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedResults = {};\n\n\t\t/**\n\t\t * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedRawResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedRawResults = {};\n\n\t\t/**\n\t\t * The number of items that have been requested. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded. This does not include items inside of loaders such as the\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _numItems\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItems = 0;\n\n\t\t/**\n\t\t * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded.\n\t\t * @property _numItemsLoaded\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItemsLoaded = 0;\n\n\t\t/**\n\t\t * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n\t\t * order.\n\t\t * @property _scriptOrder\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._scriptOrder = [];\n\n\t\t/**\n\t\t * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n\t\t * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n\t\t * once they are complete and have been dispatched.\n\t\t * @property _loadedScripts\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadedScripts = [];\n\n\t\t/**\n\t\t * The last progress amount. This is used to suppress duplicate progress events.\n\t\t * @property _lastProgress\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._lastProgress = NaN;\n\n\t};\n\n// static properties\n\t/**\n\t * The time in milliseconds to assume a load has failed. An {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event is dispatched if the timeout is reached before any data is received.\n\t * @property loadTimeout\n\t * @type {Number}\n\t * @default 8000\n\t * @static\n\t * @since 0.4.1\n\t * @deprecated In favour of {{#crossLink \"LoadItem/LOAD_TIMEOUT_DEFAULT:property}}{{/crossLink}} property.\n\t */\n\ts.loadTimeout = 8000;\n\n\t/**\n\t * The time in milliseconds to assume a load has failed.\n\t * @property LOAD_TIMEOUT\n\t * @type {Number}\n\t * @default 0\n\t * @deprecated in favor of the {{#crossLink \"LoadQueue/loadTimeout:property\"}}{{/crossLink}} property.\n\t */\n\ts.LOAD_TIMEOUT = 0;\n\n// Preload Types\n\t/**\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}} instead.\n\t */\n\ts.BINARY = createjs.AbstractLoader.BINARY;\n\n\t/**\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n\t */\n\ts.CSS = createjs.AbstractLoader.CSS;\n\n\t/**\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n\t */\n\ts.IMAGE = createjs.AbstractLoader.IMAGE;\n\n\t/**\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT;\n\n\t/**\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}} instead.\n\t */\n\ts.JSON = createjs.AbstractLoader.JSON;\n\n\t/**\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}} instead.\n\t */\n\ts.JSONP = createjs.AbstractLoader.JSONP;\n\n\t/**\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.4.1\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}} instead.\n\t */\n\ts.MANIFEST = createjs.AbstractLoader.MANIFEST;\n\n\t/**\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.SOUND = createjs.AbstractLoader.SOUND;\n\n\t/**\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.VIDEO = createjs.AbstractLoader.VIDEO;\n\n\t/**\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}} instead.\n\t */\n\ts.SVG = createjs.AbstractLoader.SVG;\n\n\t/**\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.TEXT = createjs.AbstractLoader.TEXT;\n\n\t/**\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}} instead.\n\t */\n\ts.XML = createjs.AbstractLoader.XML;\n\n\t/**\n\t * @property POST\n\t * @type {string}\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} instead.\n\t */\n\ts.POST = createjs.AbstractLoader.POST;\n\n\t/**\n\t * @property GET\n\t * @type {string}\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} instead.\n\t */\n\ts.GET = createjs.AbstractLoader.GET;\n\n// events\n\t/**\n\t * This event is fired when an individual file has loaded, and been processed.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n\t * @event fileprogress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This event is fired when an individual file starts to load.\n\t * @event filestart\n\t * @param {Object} The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a property.\n\t */\n\n\t/**\n\t * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n\t * a LoadQueue instance.\n\t * @event initialize\n\t * @private\n\t */\n\n// public methods\n\t/**\n\t * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n\t * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n\t * once, and will be prepended to the list of available loaders.\n\t * @method registerLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n\t * @since 0.6.0\n\t */\n\tp.registerLoader = function (loader) {\n\t\tif (!loader || !loader.canLoadItem) {\n\t\t\tthrow new Error(\"loader is of an incorrect type.\");\n\t\t} else if (this._availableLoaders.indexOf(loader) != -1) {\n\t\t\tthrow new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n\t\t}\n\n\t\tthis._availableLoaders.unshift(loader);\n\t};\n\n\t/**\n\t * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n\t * unregistered, the default loaders will always be available.\n\t * @method unregisterLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n\t */\n\tp.unregisterLoader = function (loader) {\n\t\tvar idx = this._availableLoaders.indexOf(loader);\n\t\tif (idx != -1 && idx < this._defaultLoaderLength - 1) {\n\t\t\tthis._availableLoaders.splice(idx, 1);\n\t\t}\n\t};\n\n\t/**\n\t * @method setUseXHR\n\t * @param {Boolean} value The new useXHR value to set.\n\t * @return {Boolean} The new useXHR value. If XHR is not supported by the browser, this will return false, even if\n\t * the provided value argument was true.\n\t * @since 0.3.0\n\t * @deprecated use the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property, or the\n\t * {{#crossLink \"LoadQueue/setUseXHR\"}}{{/crossLink}} method instead.\n\t */\n\tp.setUseXHR = function (value) {\n\t\treturn this.setPreferXHR(value);\n\t};\n\n\t/**\n\t * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n\t * fail, or be ignored depending on the browser's capabilities and the load type.\n\t * @method setPreferXHR\n\t * @param {Boolean} value\n\t * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n\t * @since 0.6.0\n\t */\n\tp.setPreferXHR = function (value) {\n\t\t// Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n\t\t//TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n\t\tthis.preferXHR = (value != false && window.XMLHttpRequest != null);\n\t\treturn this.preferXHR;\n\t};\n\n\t/**\n\t * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n\t * content, and allows the queue to be used again.\n\t * @method removeAll\n\t * @since 0.3.0\n\t */\n\tp.removeAll = function () {\n\t\tthis.remove();\n\t};\n\n\t/**\n\t * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n\t * This also removes internal references to loaded item(s).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      queue.loadManifest([\n\t *          {src:\"test.png\", id:\"png\"},\n\t *          {src:\"test.jpg\", id:\"jpg\"},\n\t *          {src:\"test.mp3\", id:\"mp3\"}\n\t *      ]);\n\t *      queue.remove(\"png\"); // Single item by ID\n\t *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n\t *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n\t *\n\t * @method remove\n\t * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n\t * items, or multiple items as arguments.\n\t * @since 0.3.0\n\t */\n\tp.remove = function (idsOrUrls) {\n\t\tvar args = null;\n\n\t\tif (idsOrUrls && !Array.isArray(idsOrUrls)) {\n\t\t\targs = [idsOrUrls];\n\t\t} else if (idsOrUrls) {\n\t\t\targs = idsOrUrls;\n\t\t} else if (arguments.length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar itemsWereRemoved = false;\n\n\t\t// Destroy everything\n\t\tif (!args) {\n\t\t\tthis.close();\n\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t\t}\n\t\t\tthis.init(this.preferXHR, this._basePath);\n\n\t\t\t// Remove specific items\n\t\t} else {\n\t\t\twhile (args.length) {\n\t\t\t\tvar item = args.pop();\n\t\t\t\tvar r = this.getResult(item);\n\n\t\t\t\t//Remove from the main load Queue\n\t\t\t\tfor (i = this._loadQueue.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueue[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueue.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//Remove from the backup queue\n\t\t\t\tfor (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueueBackup[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueueBackup.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (r) {\n\t\t\t\t\tthis._disposeItem(this.getItem(item));\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = this._currentLoads.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar loadItem = this._currentLoads[i].getItem();\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\tthis._currentLoads.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\titemsWereRemoved = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If this was called during a load, try to load the next item.\n\t\t\tif (itemsWereRemoved) {\n\t\t\t\tthis._loadNext();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n\t * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n\t * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n\t * @method reset\n\t * @since 0.3.0\n\t */\n\tp.reset = function () {\n\t\tthis.close();\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t}\n\n\t\t//Reset the queue to its start state\n\t\tvar a = [];\n\t\tfor (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n\t\t\ta.push(this._loadQueueBackup[i].getItem());\n\t\t}\n\n\t\tthis.loadManifest(a, false);\n\t};\n\n\t/**\n\t * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n\t * Currently, only one plugin can exist per type/extension.\n\t *\n\t * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n\t * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n\t * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n\t *\n\t * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n\t * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n\t * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n\t * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n\t * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n\t * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n\t *\n\t * @method installPlugin\n\t * @param {Function} plugin The plugin class to install.\n\t */\n\tp.installPlugin = function (plugin) {\n\t\tif (plugin == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (plugin.getPreloadHandlers != null) {\n\t\t\tthis._plugins.push(plugin);\n\t\t\tvar map = plugin.getPreloadHandlers();\n\t\t\tmap.scope = plugin;\n\n\t\t\tif (map.types != null) {\n\t\t\t\tfor (var i = 0, l = map.types.length; i < l; i++) {\n\t\t\t\t\tthis._typeCallbacks[map.types[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (map.extensions != null) {\n\t\t\t\tfor (i = 0, l = map.extensions.length; i < l; i++) {\n\t\t\t\t\tthis._extensionCallbacks[map.extensions[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n\t * number of open connections, so any additional connections may remain in a pending state until the browser\n\t * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n\t * is `true`, only one script is loaded at a time due to browser limitations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n\t *\n\t * @method setMaxConnections\n\t * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n\t * is open at any time.\n\t */\n\tp.setMaxConnections = function (value) {\n\t\tthis._maxConnections = value;\n\t\tif (!this._paused && this._loadQueue.length > 0) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method.\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadFile\n\t * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadFile = function (file, loadNow, basePath) {\n\t\tif (file == null) {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\t\tthis._addItem(file, null, basePath);\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n\t * The files in the manifest are requested in the same order, but may complete in a different order if the max\n\t * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n\t * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n\t * default).\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadManifest\n\t * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n\t * manifests:\n\t * <ol>\n\t *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n\t *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n\t *     prepended to each file in the list.</li>\n\t *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n\t *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n\t *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n\t *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An Array of files to load.</li>\n\t * </ol>\n\t *\n\t * Each \"file\" in a manifest can be either:\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t *\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadManifest = function (manifest, loadNow, basePath) {\n\t\tvar fileList = null;\n\t\tvar path = null;\n\n\t\t// Array-based list of items\n\t\tif (Array.isArray(manifest)) {\n\t\t\tif (manifest.length == 0) {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfileList = manifest;\n\n\t\t\t// String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n\t\t} else if (typeof(manifest) === \"string\") {\n\t\t\tfileList = [\n\t\t\t\t{\n\t\t\t\t\tsrc: manifest,\n\t\t\t\t\ttype: s.MANIFEST\n\t\t\t\t}\n\t\t\t];\n\n\t\t} else if (typeof(manifest) == \"object\") {\n\n\t\t\t// An object that defines a manifest path\n\t\t\tif (manifest.src !== undefined) {\n\t\t\t\tif (manifest.type == null) {\n\t\t\t\t\tmanifest.type = s.MANIFEST;\n\t\t\t\t} else if (manifest.type != s.MANIFEST) {\n\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n\t\t\t\t\tthis._sendError(event);\n\t\t\t\t}\n\t\t\t\tfileList = [manifest];\n\n\t\t\t\t// An object that defines a manifest\n\t\t\t} else if (manifest.manifest !== undefined) {\n\t\t\t\tfileList = manifest.manifest;\n\t\t\t\tpath = manifest.path;\n\t\t\t}\n\n\t\t\t// Unsupported. This will throw an error.\n\t\t} else {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, l = fileList.length; i < l; i++) {\n\t\t\tthis._addItem(fileList[i], path, basePath);\n\t\t}\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\n\t};\n\n\t/**\n\t * Start a LoadQueue that was created, but not automatically started.\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis.setPaused(false);\n\t};\n\n\t/**\n\t * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n\t * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getItem\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event as the `item` parameter.\n\t */\n\tp.getItem = function (value) {\n\t\treturn this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t};\n\n\t/**\n\t * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n\t * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getResult\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n\t *      DOM.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>A binary arraybuffer loaded by XHR</li>\n\t *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n\t *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n\t *      which can not be used to play audio back.</li>\n\t * </ul>\n\t * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n\t * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (value, rawResult) {\n\t\tvar item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\t\tvar id = item.id;\n\t\tif (rawResult && this._loadedRawResults[id]) {\n\t\t\treturn this._loadedRawResults[id];\n\t\t}\n\t\treturn this._loadedResults[id];\n\t};\n\n\t/**\n\t * Generate an list of items loaded by this queue.\n\t * @method getItems\n\t * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n\t * and failed load items will also be included.\n\t * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n\t * result, and rawResult.\n\t * @since 0.6.0\n\t */\n\tp.getItems = function (loaded) {\n\t\tvar arr = [];\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tvar item = this._loadItemsById[n];\n\t\t\tvar result = this.getResult(n);\n\t\t\tif (loaded === true && result == null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tarr.push({\n\t\t\t\titem: item,\n\t\t\t\tresult: result,\n\t\t\t\trawResult: this.getResult(n, true)\n\t\t\t});\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n\t * be processed when active loads complete. LoadQueues are not paused by default.\n\t *\n\t * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n\t * argument is `false`.\n\t * @method setPaused\n\t * @param {Boolean} value Whether the queue should be paused or not.\n\t */\n\tp.setPaused = function (value) {\n\t\tthis._paused = value;\n\t\tif (!this._paused) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n\t * starting to download. Note that currently any active loads will remain open, and events may be processed.\n\t *\n\t * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n\t * @method close\n\t */\n\tp.close = function () {\n\t\twhile (this._currentLoads.length) {\n\t\t\tthis._currentLoads.pop().cancel();\n\t\t}\n\t\tthis._scriptOrder.length = 0;\n\t\tthis._loadedScripts.length = 0;\n\t\tthis.loadStartWasDispatched = false;\n\t\tthis._itemCount = 0;\n\t\tthis._lastProgress = NaN;\n\t};\n\n// protected methods\n\t/**\n\t * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n\t * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n\t * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n\t * method.\n\t * @method _addItem\n\t * @param {String|Object} value The item to add to the queue.\n\t * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n\t * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n\t * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n\t * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n\t * version.\n\t * @private\n\t */\n\tp._addItem = function (value, path, basePath) {\n\t\tvar item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n\t\tif (item == null) {\n\t\t\treturn;\n\t\t} // Sometimes plugins or types should be skipped.\n\t\tvar loader = this._createLoader(item);\n\t\tif (loader != null) {\n\t\t\tif (\"plugins\" in loader) {\n\t\t\t\tloader.plugins = this._plugins;\n\t\t\t}\n\t\t\titem._loader = loader;\n\t\t\tthis._loadQueue.push(loader);\n\t\t\tthis._loadQueueBackup.push(loader);\n\n\t\t\tthis._numItems++;\n\t\t\tthis._updateProgress();\n\n\t\t\t// Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n\t\t\tif ((this.maintainScriptOrder\n\t\t\t\t\t&& item.type == createjs.LoadQueue.JAVASCRIPT\n\t\t\t\t\t\t//&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n\t\t\t\t\t)\n\t\t\t\t\t|| item.maintainOrder === true) {\n\t\t\t\tthis._scriptOrder.push(item);\n\t\t\t\tthis._loadedScripts.push(null);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n\t * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n\t * XHR is only used for file types that support it in new browsers.\n\t *\n\t * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n\t * alter the load item.\n\t * @method _createLoadItem\n\t * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n\t * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n\t * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n\t * when it is added.\n\t * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n\t * the path argument.\n\t * @return {Object} The loader instance that will be used.\n\t * @private\n\t */\n\tp._createLoadItem = function (value, path, basePath) {\n\t\tvar item = createjs.LoadItem.create(value);\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar bp = \"\"; // Store the generated basePath\n\t\tvar useBasePath = basePath || this._basePath;\n\n\t\tif (item.src instanceof Object) {\n\t\t\tif (!item.type) {\n\t\t\t\treturn null;\n\t\t\t} // the the src is an object, type is required to pass off to plugin\n\t\t\tif (path) {\n\t\t\t\tbp = path;\n\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\n\t\t\t\t// Also append basePath\n\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t}\n\t\t\t} else if (useBasePath != null) {\n\t\t\t\tbp = useBasePath;\n\t\t\t}\n\t\t} else {\n\t\t\t// Determine Extension, etc.\n\t\t\tvar match = createjs.RequestUtils.parseURI(item.src);\n\t\t\tif (match.extension) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t\tif (item.type == null) {\n\t\t\t\titem.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n\t\t\t}\n\n\t\t\t// Inject path & basePath\n\t\t\tvar autoId = item.src;\n\t\t\tif (!match.absolute && !match.relative) {\n\t\t\t\tif (path) {\n\t\t\t\t\tbp = path;\n\t\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\n\t\t\t\t\tautoId = path + autoId;\n\t\t\t\t\t// Also append basePath\n\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t\t}\n\t\t\t\t} else if (useBasePath != null) {\n\t\t\t\t\tbp = useBasePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.src = bp + item.src;\n\t\t}\n\t\titem.path = bp;\n\n\t\t// If there's no id, set one now.\n\t\tif (item.id === undefined || item.id === null || item.id === \"\") {\n\t\t\titem.id = autoId;\n\t\t}\n\n\t\t// Give plugins a chance to modify the loadItem:\n\t\tvar customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n\t\tif (customHandler) {\n\t\t\t// Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n\t\t\tvar result = customHandler.callback.call(customHandler.scope, item, this);\n\n\t\t\t// The plugin will handle the load, or has canceled it. Ignore it.\n\t\t\tif (result === false) {\n\t\t\t\treturn null;\n\n\t\t\t\t// Load as normal:\n\t\t\t} else if (result === true) {\n\t\t\t\t// Do Nothing\n\n\t\t\t\t// Result is a loader class:\n\t\t\t} else if (result != null) {\n\t\t\t\titem._loader = result;\n\t\t\t}\n\n\t\t\t// Update the extension in case the type changed:\n\t\t\tmatch = createjs.RequestUtils.parseURI(item.src);\n\t\t\tif (match.extension != null) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t}\n\n\t\t// Store the item for lookup. This also helps clean-up later.\n\t\tthis._loadItemsById[item.id] = item;\n\t\tthis._loadItemsBySrc[item.src] = item;\n\n\t\tif (item.crossOrigin == null) {\n\t\t\titem.crossOrigin = this._crossOrigin;\n\t\t}\n\n\t\treturn item;\n\t};\n\n\t/**\n\t * Create a loader for a load item.\n\t * @method _createLoader\n\t * @param {Object} item A formatted load item that can be used to generate a loader.\n\t * @return {AbstractLoader} A loader that can be used to load content.\n\t * @private\n\t */\n\tp._createLoader = function (item) {\n\t\tif (item._loader != null) { // A plugin already specified a loader\n\t\t\treturn item._loader;\n\t\t}\n\n\t\t// Initially, try and use the provided/supported XHR mode:\n\t\tvar preferXHR = this.preferXHR;\n\n\t\tfor (var i = 0; i < this._availableLoaders.length; i++) {\n\t\t\tvar loader = this._availableLoaders[i];\n\t\t\tif (loader && loader.canLoadItem(item)) {\n\t\t\t\treturn new loader(item, preferXHR);\n\t\t\t}\n\t\t}\n\n\t\t// TODO: Log error (requires createjs.log)\n\t\treturn null;\n\t};\n\n\t/**\n\t * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n\t * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n\t * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n\t * using tags, which have to be loaded one at a time to maintain load order.\n\t * @method _loadNext\n\t * @private\n\t */\n\tp._loadNext = function () {\n\t\tif (this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only dispatch loadstart event when the first file is loaded.\n\t\tif (!this._loadStartWasDispatched) {\n\t\t\tthis._sendLoadStart();\n\t\t\tthis._loadStartWasDispatched = true;\n\t\t}\n\n\t\t// The queue has completed.\n\t\tif (this._numItems == this._numItemsLoaded) {\n\t\t\tthis.loaded = true;\n\t\t\tthis._sendComplete();\n\n\t\t\t// Load the next queue, if it has been defined.\n\t\t\tif (this.next && this.next.load) {\n\t\t\t\tthis.next.load();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.loaded = false;\n\t\t}\n\n\t\t// Must iterate forwards to load in the right order.\n\t\tfor (var i = 0; i < this._loadQueue.length; i++) {\n\t\t\tif (this._currentLoads.length >= this._maxConnections) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar loader = this._loadQueue[i];\n\n\t\t\t// Determine if we should be only loading one tag-script at a time:\n\t\t\t// Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n\t\t\tif (!this._canStartLoad(loader)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._loadQueue.splice(i, 1);\n\t\t\ti--;\n\t\t\tthis._loadItem(loader);\n\t\t}\n\t};\n\n\t/**\n\t * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n\t * @method _loadItem\n\t * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n\t * @private\n\t */\n\tp._loadItem = function (loader) {\n\t\tloader.on(\"fileload\", this._handleFileLoad, this);\n\t\tloader.on(\"progress\", this._handleProgress, this);\n\t\tloader.on(\"complete\", this._handleFileComplete, this);\n\t\tloader.on(\"error\", this._handleError, this);\n\t\tloader.on(\"fileerror\", this._handleFileError, this);\n\t\tthis._currentLoads.push(loader);\n\t\tthis._sendFileStart(loader.getItem());\n\t\tloader.load();\n\t};\n\n\t/**\n\t * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n\t * events.\n\t * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n\t * @private\n\t * @since 0.6.0\n\t */\n\tp._handleFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n\t * loaders like M\n\t * @param event\n\t * @private\n\t */\n\tp._handleFileError = function (event) {\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n\t\tthis._sendError(newEvent);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n\t * is set to `true`.\n\t * @method _handleError\n\t * @param {ErrorEvent} event The error event, containing relevant error information.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._numItemsLoaded++;\n\n\t\tthis._finishOrderedItem(loader, true);\n\t\tthis._updateProgress();\n\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n\t\t// TODO: Propagate actual error message.\n\n\t\tthis._sendError(newEvent);\n\n\t\tif (!this.stopOnError) {\n\t\t\tthis._removeLoadItem(loader);\n\t\t\tthis._cleanLoadItem(loader);\n\t\t\tthis._loadNext();\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n\t * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n\t * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n\t * @method _handleFileComplete\n\t * @param {Event} event The event object from the loader.\n\t * @private\n\t */\n\tp._handleFileComplete = function (event) {\n\t\tvar loader = event.target;\n\t\tvar item = loader.getItem();\n\n\t\tvar result = loader.getResult();\n\t\tthis._loadedResults[item.id] = result;\n\t\tvar rawResult = loader.getResult(true);\n\t\tif (rawResult != null && rawResult !== result) {\n\t\t\tthis._loadedRawResults[item.id] = rawResult;\n\t\t}\n\n\t\tthis._saveLoadedItems(loader);\n\n\t\t// Remove the load item\n\t\tthis._removeLoadItem(loader);\n\n\t\tif (!this._finishOrderedItem(loader)) {\n\t\t\t// The item was NOT managed, so process it now\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t}\n\n\t\t// Clean up the load item\n\t\tthis._cleanLoadItem(loader);\n\t};\n\n\t/**\n\t * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n\t * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n\t * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n\t * methods.\n\t * @method _saveLoadedItems\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._saveLoadedItems = function (loader) {\n\t\t// TODO: Not sure how to handle this. Would be nice to expose the items.\n\t\t// Loaders may load sub-items. This adds them to this queue\n\t\tvar list = loader.getLoadedItems();\n\t\tif (list === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i].item;\n\n\t\t\t// Store item lookups\n\t\t\tthis._loadItemsBySrc[item.src] = item;\n\t\t\tthis._loadItemsById[item.id] = item;\n\n\t\t\t// Store loaded content\n\t\t\tthis._loadedResults[item.id] = list[i].result;\n\t\t\tthis._loadedRawResults[item.id] = list[i].rawResult;\n\t\t}\n\t};\n\n\t/**\n\t * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n\t * so, trigger prior items to trigger as well.\n\t * @method _finishOrderedItem\n\t * @param {AbstractLoader} loader\n\t * @param {Boolean} loadFailed\n\t * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n\t * behaviour if it is.\n\t * @private\n\t */\n\tp._finishOrderedItem = function (loader, loadFailed) {\n\t\tvar item = loader.getItem();\n\n\t\tif ((this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT)\n\t\t\t\t|| item.maintainOrder) {\n\n\t\t\t//TODO: Evaluate removal of the _currentlyLoadingScript\n\t\t\tif (loader instanceof createjs.JavaScriptLoader) {\n\t\t\t\tthis._currentlyLoadingScript = false;\n\t\t\t}\n\n\t\t\tvar index = createjs.indexOf(this._scriptOrder, item);\n\t\t\tif (index == -1) {\n\t\t\t\treturn false;\n\t\t\t} // This loader no longer exists\n\t\t\tthis._loadedScripts[index] = (loadFailed === true) ? true : item;\n\n\t\t\tthis._checkScriptLoadOrder();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n\t * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n\t * and then when they are processed and dispatched, the value is set to `true`. This method simply\n\t * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n\t * dispatched.\n\t * @method _checkScriptLoadOrder\n\t * @private\n\t */\n\tp._checkScriptLoadOrder = function () {\n\t\tvar l = this._loadedScripts.length;\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tvar item = this._loadedScripts[i];\n\t\t\tif (item === null) {\n\t\t\t\tbreak;\n\t\t\t} // This is still loading. Do not process further.\n\t\t\tif (item === true) {\n\t\t\t\tcontinue;\n\t\t\t} // This has completed, and been processed. Move on.\n\n\t\t\tvar loadItem = this._loadedResults[item.id];\n\t\t\tif (item.type == createjs.LoadQueue.JAVASCRIPT) {\n\t\t\t\t// Append script tags to the head automatically.\n\t\t\t\tcreatejs.DomUtils.appendToHead(loadItem);\n\t\t\t}\n\n\t\t\tvar loader = item._loader;\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t\tthis._loadedScripts[i] = true;\n\t\t}\n\t};\n\n\t/**\n\t * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n\t * the next item.\n\t * @method _processFinishedLoad\n\t * @param {LoadItem|Object} item\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._processFinishedLoad = function (item, loader) {\n\t\tthis._numItemsLoaded++;\n\n\t\t// Since LoadQueue needs maintain order, we can't append scripts in the loader.\n\t\t// So we do it here instead. Or in _checkScriptLoadOrder();\n\t\tif (!this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT) {\n\t\t\tvar tag = loader.getTag();\n\t\t\tcreatejs.DomUtils.appendToHead(tag);\n\t\t}\n\n\t\tthis._updateProgress();\n\t\tthis._sendFileComplete(item, loader);\n\t\tthis._loadNext();\n\t};\n\n\t/**\n\t * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n\t * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n\t * the script can even be started, since it exist in the DOM while loading.\n\t * @method _canStartLoad\n\t * @param {AbstractLoader} loader The loader for the item\n\t * @return {Boolean} Whether the item can start a load or not.\n\t * @private\n\t */\n\tp._canStartLoad = function (loader) {\n\t\tif (!this.maintainScriptOrder || loader.preferXHR) {\n\t\t\treturn true;\n\t\t}\n\t\tvar item = loader.getItem();\n\t\tif (item.type != createjs.LoadQueue.JAVASCRIPT) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this._currentlyLoadingScript) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar index = this._scriptOrder.indexOf(item);\n\t\tvar i = 0;\n\t\twhile (i < index) {\n\t\t\tvar checkItem = this._loadedScripts[i];\n\t\t\tif (checkItem == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tthis._currentlyLoadingScript = true;\n\t\treturn true;\n\t};\n\n\t/**\n\t * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n\t * @method _removeLoadItem\n\t * @param {AbstractLoader} loader A loader instance to remove.\n\t * @private\n\t */\n\tp._removeLoadItem = function (loader) {\n\t\tvar l = this._currentLoads.length;\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (this._currentLoads[i] == loader) {\n\t\t\t\tthis._currentLoads.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Remove unneeded references from a loader.\n\t *\n\t * @param loader\n\t * @private\n\t */\n\tp._cleanLoadItem = function(loader) {\n\t\tvar item = loader.getItem();\n\t\tif (item) {\n\t\t\tdelete item._loader;\n\t\t}\n\t}\n\n\t/**\n\t * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n\t * @method _handleProgress\n\t * @param {ProgressEvent} event The progress event from the item.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._sendFileProgress(loader.getItem(), loader.progress);\n\t\tthis._updateProgress();\n\t};\n\n\t/**\n\t * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n\t * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n\t * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n\t * loaded progress on top of the already-loaded items.\n\t *\n\t * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n\t * <ul>\n\t *      <li>5/10 of the items in the queue (50%)</li>\n\t *      <li>plus 20% of item 6's slot (2%)</li>\n\t *      <li>equals 52%</li>\n\t * </ul>\n\t * @method _updateProgress\n\t * @private\n\t */\n\tp._updateProgress = function () {\n\t\tvar loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n\t\tvar remaining = this._numItems - this._numItemsLoaded;\n\t\tif (remaining > 0) {\n\t\t\tvar chunk = 0;\n\t\t\tfor (var i = 0, l = this._currentLoads.length; i < l; i++) {\n\t\t\t\tchunk += this._currentLoads[i].progress;\n\t\t\t}\n\t\t\tloaded += (chunk / remaining) * (remaining / this._numItems);\n\t\t}\n\n\t\tif (this._lastProgress != loaded) {\n\t\t\tthis._sendProgress(loaded);\n\t\t\tthis._lastProgress = loaded;\n\t\t}\n\t};\n\n\t/**\n\t * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n\t * hashes.\n\t * @method _disposeItem\n\t * @param {LoadItem|Object} item The item that was passed in for preloading.\n\t * @private\n\t */\n\tp._disposeItem = function (item) {\n\t\tdelete this._loadedResults[item.id];\n\t\tdelete this._loadedRawResults[item.id];\n\t\tdelete this._loadItemsById[item.id];\n\t\tdelete this._loadItemsBySrc[item.src];\n\t};\n\n\t/**\n\t * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendFileProgress\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n\t * @protected\n\t */\n\tp._sendFileProgress = function (item, progress) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.hasEventListener(\"fileprogress\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t//LM: Rework ProgressEvent to support this?\n\t\tvar event = new createjs.Event(\"fileprogress\");\n\t\tevent.progress = progress;\n\t\tevent.loaded = progress;\n\t\tevent.total = 1;\n\t\tevent.item = item;\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n\t * details on the event payload.\n\t * @method _sendFileComplete\n\t * @param {LoadItemObject} item The item that is being loaded.\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._sendFileComplete = function (item, loader) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar event = new createjs.Event(\"fileload\");\n\t\tevent.loader = loader;\n\t\tevent.item = item;\n\t\tevent.result = this._loadedResults[item.id];\n\t\tevent.rawResult = this._loadedRawResults[item.id];\n\n\t\t// This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n\t\tif (item.completeHandler) {\n\t\t\titem.completeHandler(event);\n\t\t}\n\n\t\tthis.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n\t * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n\t * @method _sendFileStart\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @protected\n\t */\n\tp._sendFileStart = function (item) {\n\t\tvar event = new createjs.Event(\"filestart\");\n\t\tevent.item = item;\n\t\tthis.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS LoadQueue]\";\n\t};\n\n\tcreatejs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n}());\n\n//##############################################################################\n// TextLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for Text files.\n\t * @class TextLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction TextLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.TEXT);\n\t};\n\n\tvar p = createjs.extend(TextLoader, createjs.AbstractLoader);\n\tvar s = TextLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}},\n\t * but is also the default loader if a file type can not be determined.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.TEXT;\n\t};\n\n\tcreatejs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// BinaryLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n\t * @class BinaryLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction BinaryLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.BINARY);\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n\tvar s = BinaryLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.BINARY;\n\t};\n\n\t// private methods\n\t/**\n\t * Before the item loads, set the response type to \"arraybuffer\"\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.setResponseType(\"arraybuffer\");\n\t};\n\n\tcreatejs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// CSSLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class CSSLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction CSSLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.CSS);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"href\";\n\n\t\tif (preferXHR) {\n\t\t\tthis._tag = document.createElement(\"style\");\n\t\t} else {\n\t\t\tthis._tag = document.createElement(\"link\");\n\t\t}\n\n\t\tthis._tag.rel = \"stylesheet\";\n\t\tthis._tag.type = \"text/css\";\n\t};\n\n\tvar p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n\tvar s = CSSLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.CSS;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for CSS files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tif (this._preferXHR) {\n\t\t\tvar tag = loader.getTag();\n\n\t\t\tif (tag.styleSheet) { // IE\n\t\t\t\ttag.styleSheet.cssText = loader.getResult(true);\n\t\t\t} else {\n\t\t\t\tvar textNode = document.createTextNode(loader.getResult(true));\n\t\t\t\ttag.appendChild(textNode);\n\t\t\t}\n\t\t} else {\n\t\t\ttag = this._tag;\n\t\t}\n\n\t\tcreatejs.DomUtils.appendToHead(tag);\n\n\t\treturn tag;\n\t};\n\n\tcreatejs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// ImageLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for image files.\n\t * @class ImageLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ImageLoader (loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.IMAGE);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n\t\t// Check if the preload item is already a tag.\n\t\tif (createjs.RequestUtils.isImageTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem.src;\n\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.tag)) {\n\t\t\tthis._tag = loadItem.tag;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis._tag = document.createElement(\"img\");\n\t\t}\n\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n\tvar s = ImageLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.IMAGE;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tif (this._tag.src != \"\" && this._tag.complete) {\n\t\t\tthis._sendComplete();\n\t\t\treturn;\n\t\t}\n\n\t\tvar crossOrigin = this._item.crossOrigin;\n\t\tif (crossOrigin == true) { crossOrigin = \"Anonymous\"; }\n\t\tif (crossOrigin != null && !createjs.RequestUtils.isLocal(this._item.src)) {\n\t\t\tthis._tag.crossOrigin = crossOrigin;\n\t\t}\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Before the item loads, set its mimeType and responseType.\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n\t\t// Only exists for XHR\n\t\tif (event.loader.setResponseType) {\n\t\t\tevent.loader.setResponseType(\"blob\");\n\t\t}\n\t};\n\n\t/**\n\t * The result formatter for Image files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLImageElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn this._formatImage;\n\t};\n\n\t/**\n\t * The asynchronous image formatter function. This is required because images have\n\t * a short delay before they are ready.\n\t * @method _formatImage\n\t * @param {Function} successCallback The method to call when the result has finished formatting\n\t * @param {Function} errorCallback The method to call if an error occurs during formatting\n\t * @private\n\t */\n\tp._formatImage = function (successCallback, errorCallback) {\n\t\tvar tag = this._tag;\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tif (!this._preferXHR) {\n\t\t\t//document.body.removeChild(tag);\n\t\t} else if (URL) {\n\t\t\tvar objURL = URL.createObjectURL(this.getResult(true));\n\t\t\ttag.src = objURL;\n\n\t\t\ttag.addEventListener(\"load\", this._cleanUpURL, false);\n\t\t\ttag.addEventListener(\"error\", this._cleanUpURL, false);\n\t\t} else {\n\t\t\ttag.src = this._item.src;\n\t\t}\n\n\t\tif (tag.complete) {\n\t\t\tsuccessCallback(tag);\n\t\t} else {\n            tag.onload = createjs.proxy(function() {\n                successCallback(this._tag);\n            }, this);\n\n            tag.onerror = createjs.proxy(function() {\n                errorCallback(_this._tag);\n            }, this);\n\t\t}\n\t};\n\n\t/**\n\t * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n\t * as an event listener without a proxy/closure, as it doesn't require it - so do not\n\t * include any functionality that requires scope without changing it.\n\t * @method _cleanUpURL\n\t * @param event\n\t * @private\n\t */\n\tp._cleanUpURL = function (event) {\n\t\tvar URL = window.URL || window.webkitURL;\n\t\tURL.revokeObjectURL(event.target.src);\n\t};\n\n\tcreatejs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JavaScriptLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JavaScript files.\n\t * @class JavaScriptLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JavaScriptLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.JAVASCRIPT);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\t\tthis.setTag(document.createElement(\"script\"));\n\t};\n\n\tvar p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n\tvar s = JavaScriptLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.JAVASCRIPT;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JavaScript files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar tag = loader.getTag();\n\t\tif (this._preferXHR) {\n\t\t\ttag.text = loader.getResult(true);\n\t\t}\n\t\treturn tag;\n\t};\n\n\tcreatejs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n\t * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n\t * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t * @class JSONLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.JSON);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n\tvar s = JSONLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.JSON;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JSON files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar json = null;\n\t\ttry {\n\t\t\tjson = createjs.DataUtils.parseJSON(loader.getResult(true));\n\t\t} catch (e) {\n\t\t\tvar event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n\t\t\tthis._sendError(event);\n\t\t\treturn e;\n\t\t}\n\n\t\treturn json;\n\t};\n\n\tcreatejs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONPLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n\t * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n\t * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n\t * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t *\n\t * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n\t * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n\t * JSONP must match the callback passed to the loadItem.\n\t *\n\t * <h4>Example JSONP</h4>\n\t *\n\t * \t\tcallbackName({\n\t * \t\t\t\"name\": \"value\",\n\t *\t \t\t\"num\": 3,\n\t *\t\t\t\"obj\": { \"bool\":true }\n\t * \t\t});\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n\t * \t\tvar queue = new createjs.LoadQueue();\n\t * \t\tqueue.on(\"complete\", handleComplete);\n\t * \t\tqueue.loadItem(loadItem);\n\t *\n\t * \t\tfunction handleComplete(event) }\n\t * \t\t\tvar json = queue.getResult(\"json\");\n\t * \t\t\tconsole.log(json.obj.bool); // true\n\t * \t\t}\n\t *\n\t * Note that JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded\n\t * in order, either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1),\n\t * or set {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n\t *\n\t * @class JSONPLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONPLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, false, createjs.AbstractLoader.JSONP);\n\t\tthis.setTag(document.createElement(\"script\"));\n\t\tthis.getTag().type = \"text/javascript\";\n\t};\n\n\tvar p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n\tvar s = JSONPLoader;\n\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.JSONP;\n\t};\n\n\t// public methods\n\tp.cancel = function () {\n\t\tthis.AbstractLoader_cancel();\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * Loads the JSONp file.  Because of the unique loading needs of JSONp\n\t * we don't use the AbstractLoader.load() method.\n\t *\n\t * @method load\n\t *\n\t */\n\tp.load = function () {\n\t\tif (this._item.callback == null) {\n\t\t\tthrow new Error('callback is required for loading JSONP requests.');\n\t\t}\n\n\t\t// TODO: Look into creating our own iFrame to handle the load\n\t\t// In the first attempt, FF did not get the result\n\t\t//   result instanceof Object did not work either\n\t\t//   so we would need to clone the result.\n\t\tif (window[this._item.callback] != null) {\n\t\t\tthrow new Error(\n\t\t\t\t\"JSONP callback '\" +\n\t\t\t\tthis._item.callback +\n\t\t\t\t\"' already exists on window. You need to specify a different callback or re-name the current one.\");\n\t\t}\n\n\t\twindow[this._item.callback] = createjs.proxy(this._handleLoad, this);\n\t\twindow.document.body.appendChild(this._tag);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\t// Load the tag\n\t\tthis._tag.src = this._item.src;\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the JSONP callback, which is a public method defined on `window`.\n\t * @method _handleLoad\n\t * @param {Object} data The formatted JSON data.\n\t * @private\n\t */\n\tp._handleLoad = function (data) {\n\t\tthis._result = this._rawResult = data;\n\t\tthis._sendComplete();\n\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specfied in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._dispose();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n\t};\n\n\t/**\n\t * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n\t * @method _dispose\n\t * @private\n\t */\n\tp._dispose = function () {\n\t\twindow.document.body.removeChild(this._tag);\n\t\tdelete window[this._item.callback];\n\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\tcreatejs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// ManifestLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n\t * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n\t * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t *\n\t * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n\t * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n\t *\n\t * \t\t{\n\t * \t\t\t\"path\": \"assets/\",\n\t *\t \t    \"manifest\": [\n\t *\t\t\t\t\"image.png\",\n\t *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n\t *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n\t *\t \t    ]\n\t *\t \t}\n\t *\n\t * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n\t *\n\t * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n\t * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}.\n\t * @class ManifestLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ManifestLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, null, createjs.AbstractLoader.MANIFEST);\n\n\t// Public Properties\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n\t\t * used to pass plugins to new LoadQueues that may be created.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis.plugins = null;\n\n\n\t// Protected Properties\n\t\t/**\n\t\t * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n\t\t * @property _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t};\n\n\tvar p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n\tvar s = ManifestLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property MANIFEST_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.MANIFEST_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.MANIFEST;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.MANIFEST_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.MANIFEST_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy();\n\t\tthis._manifestQueue.close();\n\t};\n\n\t/**\n\t * Create and load the manifest items once the actual manifest has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.manifest) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue();\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tfor(var i = 0, l = this.plugins.length; i < l; i++) {\t// conserve order of plugins\n\t\t\t\tqueue.installPlugin(this.plugins[i]);\n\t\t\t}\n\t\t\tqueue.loadManifest(json);\n\t\t} else {\n\t\t\tthis._sendComplete();\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The manifest has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * The manifest has reported an error with one of the files.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n\t * @class SoundLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction SoundLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\n\n\t\t// protected properties\n\t\tif (createjs.RequestUtils.isAudioTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\n\t\t\tthis._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n\tvar s = SoundLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.SOUND;\n\t};\n\n\t// protected methods\n\tp._createTag = function (src) {\n\t\tvar tag = document.createElement(\"audio\");\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\ttag.src = src;\n\t\treturn tag;\n\t};\n\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// VideoLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for video files.\n\t * @class VideoLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction VideoLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.VIDEO);\n\n\t\tif (createjs.RequestUtils.isVideoTag(loadItem) || createjs.RequestUtils.isVideoTag(loadItem.src)) {\n\t\t\tthis.setTag(createjs.RequestUtils.isVideoTag(loadItem)?loadItem:loadItem.src);\n\n\t\t\t// We can't use XHR for a tag that's passed in.\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis.setTag(this._createTag());\n\t\t}\n\t};\n\n\tvar p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n\tvar s = VideoLoader;\n\n\t/**\n\t * Create a new video tag\n\t *\n\t * @returns {HTMLElement}\n\t * @private\n\t */\n\tp._createTag = function () {\n\t\treturn document.createElement(\"video\");\n\t};\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.VIDEO;\n\t};\n\n\tcreatejs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// SpriteSheetLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n\t * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n\t * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n\t * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n\t * to {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}.\n\t *\n\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n\t * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n\t * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n\t * the SpriteSheet images.\n\t *\n\t * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n\t * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n\t * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n\t * @class SpriteSheetLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SpriteSheetLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SPRITESHEET);\n\n\t\t// protected properties\n\t\t/**\n\t\t * An internal queue which loads the SpriteSheet's images.\n\t\t * @method _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t}\n\n\tvar p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n\tvar s = SpriteSheetLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property SPRITESHEET_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.SPRITESHEET_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.SPRITESHEET;\n\t};\n\n\t// public methods\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy;\n\t\tthis._manifestQueue.close();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.SPRITESHEET_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.SPRITESHEET_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\t/**\n\t * Create and load the images once the SpriteSheet JSON has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.images) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tqueue.loadManifest(json.images);\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tvar image = event.result;\n\t\tif (image != null) {\n\t\t\tvar images = this.getResult().images;\n\t\t\tvar pos = images.indexOf(event.item.src);\n\t\t\timages[pos] = image;\n\t\t}\n\t};\n\n\t/**\n\t * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._result = new createjs.SpriteSheet(this._result);\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * An image has reported an error.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SVGLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for SVG files.\n\t * @class SVGLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SVGLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SVG);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"data\";\n\n\t\tif (preferXHR) {\n\t\t\tthis.setTag(document.createElement(\"svg\"));\n\t\t} else {\n\t\t\tthis.setTag(document.createElement(\"object\"));\n\t\t\tthis.getTag().type = \"image/svg+xml\";\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n\tvar s = SVGLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.SVG;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for SVG files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {Object}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\t// mime should be image/svg+xml, but Opera requires text/xml\n\t\tvar xml = createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n\t\tvar tag = loader.getTag();\n\n\t\tif (!this._preferXHR && document.body.contains(tag)) {\n\t\t\tdocument.body.removeChild(tag);\n\t\t}\n\n\t\tif (xml.documentElement != null) {\n\t\t\ttag.appendChild(xml.documentElement);\n\t\t\ttag.style.visibility = \"visible\";\n\t\t\treturn tag;\n\t\t} else { // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n\t\t\treturn xml;\n\t\t}\n\t};\n\n\tcreatejs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// XMLLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class XMLLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction XMLLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.XML);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n\tvar s = XMLLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.XML;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for XML files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {XMLDocument}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n\t};\n\n\tcreatejs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n\n}());\n\n\n// WEBPACK FOOTER //\n// ./bower_components/PreloadJS/lib/preloadjs-0.6.2.combined.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 6\n// module chunks = 0","module.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}